{"version":3,"sources":["webpack:///./openedx/features/course_experience/static/course_experience/js/CourseGoals.js","webpack:///external \"jQuery\"?0cb8*****************"],"names":["CourseGoals","options","$","click","e","goalKey","target","data","choice","ajax","method","url","goalApiUrl","headers","cookie","goal_key","course_key","courseId","user","username","dataType","success","slideDown","text","goal_text","val","successMsg","gettext","toLowerCase","is_unsure","html","parent","hide","error","errorMsg","keypress","which"],"mappings":";;;;;;;;;;AAAA;;AAEA,IAAaA,WAAb,GAA4B;;AAE1B,qBAAYC,OAAZ,EAAqB;AAAA;;AACnBC,IAAE,cAAF,EAAkBC,KAAlB,CAAwB,UAACC,CAAD,EAAO;AAC7B,QAAMC,UAAUH,EAAEE,EAAEE,MAAJ,EAAYC,IAAZ,GAAmBC,MAAnC;AACAN,MAAEO,IAAF,CAAO;AACLC,cAAQ,MADH;AAELC,WAAKV,QAAQW,UAFR;AAGLC,eAAS,EAAE,eAAeX,EAAEY,MAAF,CAAS,WAAT,CAAjB,EAHJ;AAILP,YAAM;AACJQ,kBAAUV,OADN;AAEJW,oBAAYf,QAAQgB,QAFhB;AAGJC,cAAMjB,QAAQkB;AAHV,OAJD;AASLC,gBAAU,MATL;AAULC,eAAS,iBAACd,IAAD,EAAU;AAAE;AACnBL,UAAE,gBAAF,EAAoBoB,SAApB;AACApB,UAAE,4BAAF,EAAgCqB,IAAhC,CAAqChB,KAAKiB,SAA1C;AACAtB,UAAE,uBAAF,EAA2BuB,GAA3B,CAA+BlB,KAAKQ,QAApC;AACA,YAAMW,aAAaC,uDAAqDpB,KAAKiB,SAAL,CAAeI,WAAf,EAArD,OAAnB;AACA,YAAI,CAACrB,KAAKsB,SAAV,EAAqB;AACnB;AACA3B,YAAE,kBAAF,EAAsB4B,IAAtB,mCAA2DJ,UAA3D;AACD,SAHD,MAGO;AACLxB,YAAE,kBAAF,EAAsB6B,MAAtB,GAA+BC,IAA/B;AACD;AACF,OArBI;AAsBLC,aAAO,iBAAM;AAAE;AACb,YAAMC,WAAWP,QAAQ,gFAAR,CAAjB;AACA;AACAzB,UAAE,kBAAF,EAAsB4B,IAAtB,kCAA0DI,QAA1D;AACD;AA1BI,KAAP;AA4BD,GA9BD;;AAgCA;AACAhC,IAAE,cAAF,EAAkBiC,QAAlB,CAA2B,UAAC/B,CAAD,EAAO;AAChC,QAAIA,EAAEgC,KAAF,KAAY,EAAhB,EAAoB;AAClBlC,QAAEE,EAAEE,MAAJ,EAAYH,KAAZ;AACD;AACF,GAJD;AAKD,CAzCH,C;;;;;;;;ACFA,aAAa,mCAAmC,EAAE,I","file":"CourseGoals.js","sourcesContent":["/* globals gettext */\n\nexport class CourseGoals {  // eslint-disable-line import/prefer-default-export\n\n  constructor(options) {\n    $('.goal-option').click((e) => {\n      const goalKey = $(e.target).data().choice;\n      $.ajax({\n        method: 'POST',\n        url: options.goalApiUrl,\n        headers: { 'X-CSRFToken': $.cookie('csrftoken') },\n        data: {\n          goal_key: goalKey,\n          course_key: options.courseId,\n          user: options.username,\n        },\n        dataType: 'json',\n        success: (data) => { // LEARNER-2522 will address the success message\n          $('.section-goals').slideDown();\n          $('.section-goals .goal .text').text(data.goal_text);\n          $('.section-goals select').val(data.goal_key);\n          const successMsg = gettext(`Thank you for setting your course goal to ${data.goal_text.toLowerCase()}!`);\n          if (!data.is_unsure) {\n            // xss-lint: disable=javascript-jquery-html\n            $('.message-content').html(`<div class=\"success-message\">${successMsg}</div>`);\n          } else {\n            $('.message-content').parent().hide();\n          }\n        },\n        error: () => { // LEARNER-2522 will address the error message\n          const errorMsg = gettext('There was an error in setting your goal, please reload the page and try again.');\n          // xss-lint: disable=javascript-jquery-html\n          $('.message-content').html(`<div class=\"error-message\"> ${errorMsg} </div>`);\n        },\n      });\n    });\n\n    // Allow goal selection with an enter press for accessibility purposes\n    $('.goal-option').keypress((e) => {\n      if (e.which === 13) {\n        $(e.target).click();\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./openedx/features/course_experience/static/course_experience/js/CourseGoals.js","(function() { module.exports = window[\"jQuery\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 4 5 6 9 10 12 13 14 16 17 18 19 20 21 22 23 24 25 26 29"],"sourceRoot":""}