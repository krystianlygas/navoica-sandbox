{"version":3,"sources":["webpack:///./cms/static/js/base.js","webpack:///./cms/static/js/collections/chapter.js","webpack:///./cms/static/js/collections/textbook.js","webpack:///./cms/static/js/factories/base.js","webpack:///./cms/static/js/factories/textbooks.js","webpack:///./cms/static/js/models/chapter.js","webpack:///./cms/static/js/models/course.js","webpack:///./cms/static/js/models/section.js","webpack:///./cms/static/js/models/textbook.js","webpack:///./cms/static/js/models/uploads.js","webpack:///./cms/static/js/pages/course.js","webpack:///./cms/static/js/pages/textbooks.js","webpack:///./cms/static/js/utils/change_on_enter.js","webpack:///./cms/static/js/utils/date_utils.js","webpack:///./cms/static/js/utils/handle_iframe_binding.js","webpack:///./cms/static/js/utils/module.js","webpack:///./cms/static/js/utils/regional_pl.js","webpack:///./cms/static/js/utils/templates.js","webpack:///./cms/static/js/views/baseview.js","webpack:///./cms/static/js/views/edit_chapter.js","webpack:///./cms/static/js/views/edit_textbook.js","webpack:///./cms/static/js/views/list_textbooks.js","webpack:///./cms/static/js/views/modals/base_modal.js","webpack:///./cms/static/js/views/show_textbook.js","webpack:///./cms/static/js/views/uploads.js","webpack:///./cms/templates/js/edit-chapter.underscore","webpack:///./common/static/common/js/components/utils/view_utils.js","webpack:///./common/static/common/js/components/views/feedback_prompt.js","webpack:///./common/static/common/js/utils/page_factory.js","webpack:///./common/static/js/src/accessibility_tools.js","webpack:///./common/static/js/src/ie_shim.js","webpack:///./common/static/js/src/lang_edx.js","webpack:///./common/static/js/src/logger.js","webpack:///./common/static/js/src/tooltip_manager.js","webpack:///./common/static/js/vendor/date.js","webpack:///./common/static/js/vendor/jquery.form.js","webpack:///./common/static/js/vendor/jquery.leanModal.js","webpack:///./common/static/js/vendor/timepicker/datepair.js","webpack:///./common/static/js/vendor/timepicker/jquery.timepicker.js","webpack:///./~/backbone-associations/backbone-associations-min.js","webpack:///./~/edx-ui-toolkit/src/js/dropdown-menu/dropdown-menu-view.js","webpack:///./~/edx-ui-toolkit/src/js/dropdown-menu/dropdown.underscore","webpack:///external \"jQuery\"?0cb8","webpack:///external \"Backbone\"","webpack:///external \"_\"","webpack:///external \"gettext\""],"names":["domReady","$","_","gettext","NotificationView","PromptView","DateUtils","ModuleUtils","IframeUtils","DropdownMenuView","$body","dropdownMenuView","on","select","addClass","bind","hideAlert","hideNotification","click","e","removeClass","$subnav","find","$title","hasClass","stopPropagation","attr","leanModal","overlay","closeButton","preventDefault","smoothScrollLink","iframeBinding","browser","msie","ajaxSetup","cache","length","el","postRender","smoothScroll","offset","easing","speed","scrollElement","scrollTarget","smoothScrollTop","closest","Backbone","ChapterModel","ChapterCollection","Collection","extend","model","comparator","nextOrder","last","get","isEmpty","every","m","TextbookModel","TextbookCollection","url","CMS","URL","TEXTBOOKS","Section","ListTextbooksView","textbooksJson","textbooks","parse","tbView","collection","append","render","event","addOne","window","dirty","textbook","isDirty","Chapter","AssociatedModel","defaults","name","asset_path","order","response","title","toJSON","validate","attrs","options","message","attributes","Course","Model","urlRoot","metadata","display_name","initialize","listenTo","showNotification","msg","Mini","show","hide","Textbook","chapters","showChapters","editing","relations","type","Many","key","relatedModel","collectionType","setOriginalAttributes","_originalAttributes","reset","set","isEqual","ret","tab_title","each","chapter","i","invalidChapters","isValid","push","FileUpload","selectedFile","uploading","uploadedBytes","totalBytes","finished","mimeTypes","fileFormats","checkTypeValidity","template","formatValidTypes","fileTypes","map","split","toUpperCase","concat","file","getRegExp","formats","RegExp","join","contains","test","fileExtensions","toLowerCase","or","formatTypes","types","initial","ContextCourse","course","pageFactoryArguments","TextbooksFactory","invokePageFactory","triggerChangeEventOnEnter","which","trigger","blur","date","RegionalPl","moment","TriggerChangeEventOnEnter","setupDatePicker","fieldName","view","index","cacheModel","div","hasOwnProperty","models","$el","collectionSelector","cid","fieldToSelectorMap","datefield","timefield","cacheview","setfield","newVal","getDate","clearValidationErrors","setAndValidate","timepicker","timeFormat","datepicker","dateFormat","setDefaults","regional","change","keyup","current_date","setDate","val","datepickerInput","timepickerInput","time","Date","UTC","getFullYear","getMonth","getHours","getMinutes","datetime","renderDate","dateArg","toLocaleString","timeZone","timeZoneName","parseDateFromString","stringDate","parts","convertDateStringsToObjects","obj","dateFields","target_element","nodeName","modifyTagContent","prop","ifr_source","wmode","indexOf","getQString","search","oldString","newString","lastIndexOf","iframeBindingHtml","html_string","temp_content","document","createElement","html","getUpdateUrl","locator","isUndefined","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","firstDay","isRTL","showMonthAfterYear","yearSuffix","loadTemplate","templateSelector","templateText","text","console","error","TemplateUtils","ViewUtils","BaseView","View","events","collapsedClass","constructor","bindAll","result","Math","trunc","v","isFinite","_this","wrap","beforeRender","afterRender","prototype","apply","arguments","toggleExpandCollapse","$target","target","HtmlUtils","FileUploadModel","UploadDialogView","editChapterTemplate","EditChapter","tagName","className","setHtml","validationError","submit","changeName","silent","changeAssetPath","removeChapter","remove","openUploadDialog","escape","that","onSuccess","asset","displayname","portable_url","EditChapterView","EditTextbook","addAll","createChapter","setValues","add","setName","li","at","setAndClose","saving","save","success","close","complete","cancel","isNew","EditTextbookView","ShowTextbookView","ListTextbooks","emptyTemplate","handleDestroy","empty","$sectionEl","$inputEl","setScrollOffset","focus","BaseModal","closeIcon","icon","modalName","modalType","modalSize","modalWindowClass","viewSpecificClasses","addPrimaryActionButton","primaryActionButtonType","primaryActionButtonTitle","showEditorModeButtons","parent","parentElement","modalTemplate","buttonTemplate","size","getTitle","modalSRTitle","addActionButtons","renderContents","contentHtml","getContentHtml","focusModal","focusModalWindow","undefined","resize","undelegateEvents","addActionButton","isPrimary","getActionBar","getActionButton","enableActionButton","disableActionButton","top","left","modalWindow","modalWidth","modalHeight","availableWidth","availableHeight","maxWidth","maxHeight","width","height","min","outerWidth","outerHeight","css","scrollTop","scrollLeft","ShowTextbook","bookindex","editTextbook","confirmDelete","Warning","actions","primary","delmsg","destroy","secondary","hideChapters","UploadDialog","successMessageTimeout","call","oldInput","replaceWith","UPLOAD_ASSET","selectFile","files","isEmptyObject","changed","upload","ajaxSubmit","uploadProgress","progress","data","notifyOnError","position","total","statusText","xhr","form","removalTimeout","setTimeout","showLoadingIndicator","hideLoadingIndicator","confirmThenRunOperation","runOperationShowingMessage","withDisabledElement","disableElementWhileRunning","getScrollOffset","setScrollTop","redirect","reload","hasChangedAttributes","deleteNotificationHandler","validateRequiredField","validateURLItemEncoding","validateTotalKeyLength","checkTotalKeyLengthViolations","loadJavaScript","MAX_SUM_KEY_LENGTH","toggleClass","children","slideToggle","actionLabel","operation","onCancelCallback","prompt","notificationView","done","functionName","currentTarget","element","always","callback","ajax","animate","elementTop","newScrollTop","location","changedAttributes","has","item","allowUnicode","required","encodeURIComponent","match","key_field_selectors","totalLength","reduce","sum","ele","selectors","classes","message_tpl","errorWrapper","shown","hiding","errorMessage","limit","disabled","deferred","Deferred","require","resolve","reject","promise","str","SystemFeedbackView","Prompt","body","inFocus","outFocus","capitalCamel","intents","compose","capitalize","camelize","intent","subclass","factory","args","Error","$focusedElementBeforeModal","focusableElementsString","reassignTabIndexesAndAriaHidden","focusableElementsFilterString","closeButtonId","modalId","mainPageId","focusableItems","filter","trapTabFocus","$last","keyCode","shiftKey","trapShiftTabFocus","bindReturnFocusListener","$previouslyFocusedElement","bindEscapeKeyListener","trapFocusForAccessibleModal","accessible_modal","initialFocus","href","keypress","SRAlert","readerFeedbackID","$readerFeedbackSelector","edx","interpolateHtml","HTML","clear","readElts","elts","texts","idx","value","readTexts","readText","htmlFeedback","previous_feedback","SR","origin","protocol","hostname","port","Language","$settings_language_selector","self","init","listenForLanguagePreferenceChange","language","is_user_authenticated","JSON","submitAjaxRequest","refresh","stringify","dataType","contentType","beforeSend","setRequestHeader","cookie","fail","ready","Logger","listeners","sendRequest","request","ajaxWithPrefix","async","object","propertyName","log","eventType","requestOptions","callbacks","err","event_type","page","listen","onunload","log_event","TooltipManager","tooltip","class","appendTo","bindEvents","SELECTOR","showTooltip","moveTooltip","hideTooltip","getCoords","pageX","pageY","prepareTooltip","tooltipTimer","clearTimeout","tooltipText","openTooltip","showOnClick","off","globalTooltipManager","CultureInfo","englishName","nativeName","abbreviatedDayNames","shortestDayNames","firstLetterDayNames","abbreviatedMonthNames","amDesignator","pmDesignator","firstDayOfWeek","twoDigitYearMax","dateElementOrder","formatPatterns","shortDate","longDate","shortTime","longTime","fullDateTime","sortableDateTime","universalSortableDateTime","rfc1123","monthDay","yearMonth","regexPatterns","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","sun","mon","tue","wed","thu","fri","sat","future","past","subtract","yesterday","today","tomorrow","now","millisecond","second","minute","hour","week","month","day","year","shortMeridian","longMeridian","timezone","ordinalSuffix","timeContext","timezones","$D","$P","$C","p","s","l","slice","clearTime","setHours","setMinutes","setSeconds","setMilliseconds","setTimeToNow","n","getSeconds","getMilliseconds","compare","date1","date2","isNaN","TypeError","equals","compareTo","getDayNumberFromName","o","getMonthNumberFromName","isLeapYear","getDaysInMonth","getTimezoneAbbreviation","z","getTimezoneOffset","clone","getTime","between","start","end","isAfter","isBefore","isToday","isSameDay","addMilliseconds","addSeconds","addMinutes","addHours","addDays","addWeeks","addMonths","setMonth","addYears","config","_orient","x","milliseconds","seconds","minutes","hours","weeks","months","years","days","$y","$m","$d","getWeek","a","b","c","d","f","g","w","getISOWeek","getUTCFullYear","getUTCMonth","getUTCDate","setWeek","moveToDayOfWeek","_validate","max","RangeError","validateMillisecond","validateSecond","validateMinute","validateHour","validateDay","validateMonth","validateYear","setTimezone","timezoneOffset","setTimezoneOffset","moveToFirstDayOfMonth","moveToLastDayOfMonth","moveToNthOccurrence","dayOfWeek","occurrence","shift","getDay","orient","diff","moveToMonth","getOrdinalNumber","ceil","getTimezone","getUTCOffset","here","there","Number","hasDaylightSavingTime","isDaylightSavingTime","r","toString","charAt","substr","getElapsed","toISOString","getUTCHours","getUTCMinutes","getUTCSeconds","_toString","format","t","ord","replace","h","substring","$N","_nth","_is","_same","_isSecond","_dateElement","next","prev","previous","is","same","weekday","fromNow","after","ago","before","dx","mx","px","pxf","nth","de","toObject","fromObject","df","ntemp","temp","getDayName","getMonthName","sdf","mf","smf","j","ef","o1","o2","k","nf","_ss","nthfn","Parsing","Exception","Operators","rtoken","token","stoken","until","qx","rx","many","optional","not","ignore","product","Array","rule","any","all","sequence","q","ex","ey","d1","d2","_fn","list","best","forward","gr","fname","repl","process","fn","_generator","op","unshift","gx","_vector","vx","flattenAndCompact","ax","Grammar","Translator","meridian","rday","finishExact","finish","unit","operator","expression","gap","mod","datePartDelimiter","timePartDelimiter","whiteSpace","generalDelimiter","_C","ctoken","keys","kx","ctoken2","hh","H","HH","mm","ss","hms","tt","zz","zzz","timeSuffix","dd","ddd","dddd","M","MM","MMM","MMMM","y","yy","yyy","yyyy","orientation","mdy","ymd","dmy","fmt","rules","_F","_get","fx","_formats","_start","_parse","getParseFunction","parseExact","feature","fileapi","formdata","FormData","method","action","$form","trim","ajaxSettings","iframeSrc","veto","beforeSerialize","traditional","elements","formToArray","semantic","extraData","param","beforeSubmit","resetForm","clearForm","includeHidden","oldSuccess","replaceTarget","status","context","fileInputs","hasFileInputs","mp","multipart","fileAPI","shouldUseFrame","jqxhr","iframe","closeKeepAlive","fileUploadIframe","fileUploadXhr","removeData","deepSerialize","serialized","len","part","decodeURIComponent","serializedData","processData","jQuery","onprogress","percent","loaded","lengthComputable","id","$io","io","sub","timedOut","timeoutHandle","useProp","alert","removeAttr","iframeTarget","aborted","responseText","responseXML","getAllResponseHeaders","getResponseHeader","abort","contentWindow","execCommand","global","active","clk","clk_x","clk_y","CLIENT_TIMEOUT_ABORT","SERVER_ABORT","getDoc","frame","doc","contentDocument","csrf_token","csrf_param","doSubmit","setAttribute","skipEncodingOverride","encoding","enctype","timeout","cb","checkState","state","readyState","extraInputs","isPlainObject","attachEvent","addEventListener","forceSync","domCheckCount","callbackProcessed","detachEvent","removeEventListener","errMsg","isXml","XMLDocument","isXMLDoc","opera","innerHTML","docRoot","documentElement","header","headers","getAttribute","dt","scr","textarea","ta","getElementsByTagName","pre","textContent","innerText","toXml","httpData","parseXML","ActiveXObject","loadXML","DOMParser","parseFromString","parseJSON","ct","xml","dataFilter","globalEval","ajaxForm","delegation","isFunction","selector","isReady","doAjaxSubmit","captureSubmittingElement","ajaxFormUnbind","isDefaultPrevented","offsetX","offsetY","offsetLeft","offsetTop","unbind","els","jmax","fieldValue","$input","input","formSerialize","fieldSerialize","successful","merge","tag","checked","selectedIndex","ops","one","selected","specified","clearFields","clearInputs","re","nodeType","enable","$sel","debug","postError","modal_id","close_modal","modal_height","modal_width","opacity","fadeTo","fadeOut","$this","doDatepair","opts","onSelect","initDatepair","container","startDateInput","endDateInput","dateDelta","startDate","endDate","startTimeInput","endTimeInput","startInt","endInt","updateDatePair","updateTimePair","oldDelta","newEnd","newDelta","startTimeVal","endDateAdvance","startInput","endInput","returnStr","replaceChars","curChar","shortMonths","longMonths","shortDays","longDays","D","N","S","W","F","L","Y","A","B","G","I","O","abs","P","T","toTimeString","Z","U","define","_baseDate","_generateBaseDate","_ONE_DAY","_closeEvent","_defaults","minTime","maxTime","durationTime","step","showDuration","scrollDefaultNow","scrollDefaultTime","selectOnBlur","forceRoundTime","_lang","decimal","mins","hr","hrs","globalInit","methods","raw_attrs","nodeValue","settings","_time2int","lang","_formatValue","_keyhandler","_render","_findRow","topOffset","_selectValue","option","getSecondsFromMidnight","valueOf","setTime","prettyTime","_int2time","durStart","timeInt","row","duration","_int2duration","_setSelected","_currentTimezoneOffset","_baseDateTimezoneOffset","out","halfStep","jObj","timeValue","cursor","timeString","round","toFixed","output","code","floor","parseInt"],"mappings":"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AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,2BAA2B,OAAO;AAClC,6BAA6B,EAAE;AAC/B;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AAAA,oGACA;AACA,CAAC;AACD;AACA;AACA;AACA;;;;;;;;AC3RA,sIAAsI,2FAA2F,8BAA8B,kGAAkG,wJAAwJ,mBAAmB,+HAA+H,qGAAqG,kOAAkO,qLAAqL,EAAE,iB;;;;;;;ACAzoC,aAAa,mCAAmC,EAAE,I;;;;;;;ACAlD,aAAa,qCAAqC,EAAE,I;;;;;;;ACApD,aAAa,8BAA8B,EAAE,I;;;;;;;ACA7C,aAAa,oCAAoC,EAAE,I","file":"js/pages/textbooks.js","sourcesContent":["define([\n    'domReady',\n    'jquery',\n    'underscore',\n    'gettext',\n    'common/js/components/views/feedback_notification',\n    'common/js/components/views/feedback_prompt',\n    'js/utils/date_utils',\n    'js/utils/module',\n    'js/utils/handle_iframe_binding',\n    'edx-ui-toolkit/js/dropdown-menu/dropdown-menu-view',\n    'jquery.ui',\n    'jquery.leanModal',\n    'jquery.form',\n    'jquery.smoothScroll'\n],\n    function(\n        domReady,\n        $,\n        _,\n        gettext,\n        NotificationView,\n        PromptView,\n        DateUtils,\n        ModuleUtils,\n        IframeUtils,\n        DropdownMenuView\n    ) {\n        var $body;\n\n        domReady(function() {\n            var dropdownMenuView;\n\n            $body = $('body');\n\n            $body.on('click', '.embeddable-xml-input', function() {\n                $(this).select();\n            });\n\n            $body.addClass('js');\n\n            // alerts/notifications - manual close\n            $('.action-alert-close, .alert.has-actions .nav-actions a').bind('click', hideAlert);\n            $('.action-notification-close').bind('click', hideNotification);\n\n            // nav - dropdown related\n            $body.click(function(e) {\n                $('.nav-dd .nav-item .wrapper-nav-sub').removeClass('is-shown');\n                $('.nav-dd .nav-item .title').removeClass('is-selected');\n            });\n\n            $('.nav-dd .nav-item, .filterable-column .nav-item').click(function(e) {\n                $subnav = $(this).find('.wrapper-nav-sub');\n                $title = $(this).find('.title');\n\n                if ($subnav.hasClass('is-shown')) {\n                    $subnav.removeClass('is-shown');\n                    $title.removeClass('is-selected');\n                } else {\n                    $('.nav-dd .nav-item .title').removeClass('is-selected');\n                    $('.nav-dd .nav-item .wrapper-nav-sub').removeClass('is-shown');\n                    $title.addClass('is-selected');\n                    $subnav.addClass('is-shown');\n            // if propagation is not stopped, the event will bubble up to the\n            // body element, which will close the dropdown.\n                    e.stopPropagation();\n                }\n            });\n\n            // general link management - new window/tab\n            $('a[rel=\"external\"]:not([title])').attr('title', gettext('This link will open in a new browser window/tab'));\n            $('a[rel=\"external\"]').attr('target', '_blank');\n\n            // general link management - lean modal window\n            $('a[rel=\"modal\"]').attr('title', gettext('This link will open in a modal window')).leanModal({\n                overlay: 0.50,\n                closeButton: '.action-modal-close'\n            });\n            $('.action-modal-close').click(function(e) {\n                (e).preventDefault();\n            });\n\n            // general link management - smooth scrolling page links\n            $('a[rel*=\"view\"][href^=\"#\"]').bind('click', smoothScrollLink);\n\n            IframeUtils.iframeBinding();\n\n            // disable ajax caching in IE so that backbone fetches work\n            if ($.browser.msie) {\n                $.ajaxSetup({cache: false});\n            }\n\n            // Initiate the edx tool kit dropdown menu\n            if ($('.js-header-user-menu').length) {\n                dropdownMenuView = new DropdownMenuView({\n                    el: '.js-header-user-menu'\n                });\n                dropdownMenuView.postRender();\n            }\n        });\n\n        function smoothScrollLink(e) {\n            (e).preventDefault();\n\n            $.smoothScroll({\n                offset: -200,\n                easing: 'swing',\n                speed: 1000,\n                scrollElement: null,\n                scrollTarget: $(this).attr('href')\n            });\n        }\n\n        function smoothScrollTop(e) {\n            (e).preventDefault();\n\n            $.smoothScroll({\n                offset: -200,\n                easing: 'swing',\n                speed: 1000,\n                scrollElement: null,\n                scrollTarget: $('#view-top')\n            });\n        }\n\n        function hideNotification(e) {\n            (e).preventDefault();\n            $(this).closest('.wrapper-notification').removeClass('is-shown').addClass('is-hiding').attr('aria-hidden', 'true');\n        }\n\n        function hideAlert(e) {\n            (e).preventDefault();\n            $(this).closest('.wrapper-alert').removeClass('is-shown');\n        }\n    }); // end require()\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/base.js","define(['backbone', 'js/models/chapter'], function(Backbone, ChapterModel) {\n    var ChapterCollection = Backbone.Collection.extend({\n        model: ChapterModel,\n        comparator: 'order',\n        nextOrder: function() {\n            if (!this.length) return 1;\n            return this.last().get('order') + 1;\n        },\n        isEmpty: function() {\n            return this.length === 0 || this.every(function(m) { return m.isEmpty(); });\n        }\n    });\n    return ChapterCollection;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/collections/chapter.js","define(['backbone', 'js/models/textbook'],\n        function(Backbone, TextbookModel) {\n            var TextbookCollection = Backbone.Collection.extend({\n                model: TextbookModel,\n                url: function() { return CMS.URL.TEXTBOOKS; }\n            });\n            return TextbookCollection;\n        });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/collections/textbook.js","define(['js/base', 'cms/js/main', 'js/src/logger', 'datepair', 'accessibility',\n    'ieshim', 'tooltip_manager', 'lang_edx', 'js/models/course'],\n    function() {\n        'use strict';\n    }\n);\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/factories/base.js","define([\n    'gettext', 'js/models/section', 'js/collections/textbook', 'js/views/list_textbooks'\n], function(gettext, Section, TextbookCollection, ListTextbooksView) {\n    'use strict';\n    return function(textbooksJson) {\n        var textbooks = new TextbookCollection(textbooksJson, {parse: true}),\n            tbView = new ListTextbooksView({collection: textbooks});\n\n        $('.content-primary').append(tbView.render().el);\n        $('.nav-actions .new-button').click(function(event) {\n            tbView.addOne(event);\n        });\n        $(window).on('beforeunload', function() {\n            var dirty = textbooks.find(function(textbook) { return textbook.isDirty(); });\n            if (dirty) {\n                return gettext('You have unsaved changes. Do you really want to leave this page?');\n            }\n        });\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/factories/textbooks.js","define(['backbone', 'gettext', 'backbone.associations'], function(Backbone, gettext) {\n    var Chapter = Backbone.AssociatedModel.extend({\n        defaults: function() {\n            return {\n                name: '',\n                asset_path: '',\n                order: this.collection ? this.collection.nextOrder() : 1\n            };\n        },\n        isEmpty: function() {\n            return !this.get('name') && !this.get('asset_path');\n        },\n        parse: function(response) {\n            if ('title' in response && !('name' in response)) {\n                response.name = response.title;\n                delete response.title;\n            }\n            if ('url' in response && !('asset_path' in response)) {\n                response.asset_path = response.url;\n                delete response.url;\n            }\n            return response;\n        },\n        toJSON: function() {\n            return {\n                title: this.get('name'),\n                url: this.get('asset_path')\n            };\n        },\n        // NOTE: validation functions should return non-internationalized error\n        // messages. The messages will be passed through gettext in the template.\n        validate: function(attrs, options) {\n            if (!attrs.name && !attrs.asset_path) {\n                return {\n                    message: gettext('Chapter name and asset_path are both required'),\n                    attributes: {name: true, asset_path: true}\n                };\n            } else if (!attrs.name) {\n                return {\n                    message: gettext('Chapter name is required'),\n                    attributes: {name: true}\n                };\n            } else if (!attrs.asset_path) {\n                return {\n                    message: gettext('asset_path is required'),\n                    attributes: {asset_path: true}\n                };\n            }\n        }\n    });\n    return Chapter;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/models/chapter.js","define(['backbone'], function(Backbone) {\n    var Course = Backbone.Model.extend({\n        defaults: {\n            name: ''\n        },\n        validate: function(attrs, options) {\n            if (!attrs.name) {\n                return gettext('You must specify a name');\n            }\n        }\n    });\n    return Course;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/models/course.js","define(['backbone', 'gettext', 'common/js/components/views/feedback_notification', 'js/utils/module'],\n    function(Backbone, gettext, NotificationView, ModuleUtils) {\n        var Section = Backbone.Model.extend({\n            defaults: {\n                name: ''\n            },\n            validate: function(attrs, options) {\n                if (!attrs.name) {\n                    return gettext('You must specify a name');\n                }\n            },\n            urlRoot: ModuleUtils.urlRoot,\n            toJSON: function() {\n                return {\n                    metadata: {\n                        display_name: this.get('name')\n                    }\n                };\n            },\n            initialize: function() {\n                this.listenTo(this, 'request', this.showNotification);\n                this.listenTo(this, 'sync', this.hideNotification);\n            },\n            showNotification: function() {\n                if (!this.msg) {\n                    this.msg = new NotificationView.Mini({\n                        title: gettext('Saving')\n                    });\n                }\n                this.msg.show();\n            },\n            hideNotification: function() {\n                if (!this.msg) { return; }\n                this.msg.hide();\n            }\n        });\n        return Section;\n    });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/models/section.js","define(['backbone', 'underscore', 'gettext', 'js/models/chapter', 'js/collections/chapter',\n    'backbone.associations', 'cms/js/main'],\n    function(Backbone, _, gettext, ChapterModel, ChapterCollection) {\n        var Textbook = Backbone.AssociatedModel.extend({\n            defaults: function() {\n                return {\n                    name: '',\n                    chapters: new ChapterCollection([{}]),\n                    showChapters: false,\n                    editing: false\n                };\n            },\n            relations: [{\n                type: Backbone.Many,\n                key: 'chapters',\n                relatedModel: ChapterModel,\n                collectionType: ChapterCollection\n            }],\n            initialize: function() {\n                this.setOriginalAttributes();\n                return this;\n            },\n            setOriginalAttributes: function() {\n                this._originalAttributes = this.parse(this.toJSON());\n            },\n            reset: function() {\n                this.set(this._originalAttributes, {parse: true});\n            },\n            isDirty: function() {\n                return !_.isEqual(this._originalAttributes, this.parse(this.toJSON()));\n            },\n            isEmpty: function() {\n                return !this.get('name') && this.get('chapters').isEmpty();\n            },\n            urlRoot: function() { return CMS.URL.TEXTBOOKS; },\n            parse: function(response) {\n                var ret = $.extend(true, {}, response);\n                if ('tab_title' in ret && !('name' in ret)) {\n                    ret.name = ret.tab_title;\n                    delete ret.tab_title;\n                }\n                if ('url' in ret && !('chapters' in ret)) {\n                    ret.chapters = {url: ret.url};\n                    delete ret.url;\n                }\n                _.each(ret.chapters, function(chapter, i) {\n                    chapter.order = chapter.order || i + 1;\n                });\n                return ret;\n            },\n            toJSON: function() {\n                return {\n                    tab_title: this.get('name'),\n                    chapters: this.get('chapters').toJSON()\n                };\n            },\n        // NOTE: validation functions should return non-internationalized error\n        // messages. The messages will be passed through gettext in the template.\n            validate: function(attrs, options) {\n                if (!attrs.name) {\n                    return {\n                        message: gettext('Textbook name is required'),\n                        attributes: {name: true}\n                    };\n                }\n                if (attrs.chapters.length === 0) {\n                    return {\n                        message: gettext('Please add at least one chapter'),\n                        attributes: {chapters: true}\n                    };\n                } else {\n                // validate all chapters\n                    var invalidChapters = [];\n                    attrs.chapters.each(function(chapter) {\n                        if (!chapter.isValid()) {\n                            invalidChapters.push(chapter);\n                        }\n                    });\n                    if (!_.isEmpty(invalidChapters)) {\n                        return {\n                            message: gettext('All chapters must have a name and asset'),\n                            attributes: {chapters: invalidChapters}\n                        };\n                    }\n                }\n            }\n        });\n        return Textbook;\n    });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/models/textbook.js","define(['backbone', 'underscore', 'gettext'], function(Backbone, _, gettext) {\n    var FileUpload = Backbone.Model.extend({\n        defaults: {\n            title: '',\n            message: '',\n            selectedFile: null,\n            uploading: false,\n            uploadedBytes: 0,\n            totalBytes: 0,\n            finished: false,\n            mimeTypes: [],\n            fileFormats: []\n        },\n        validate: function(attrs, options) {\n            if (attrs.selectedFile && !this.checkTypeValidity(attrs.selectedFile)) {\n                return {\n                    message: _.template(gettext('Only <%= fileTypes %> files can be uploaded. Please select a file ending in <%= fileExtensions %> to upload.'))(  // eslint-disable-line max-len\n                    this.formatValidTypes()\n                ),\n                    attributes: {selectedFile: true}\n                };\n            }\n        },\n    // Return a list of this uploader's valid file types\n        fileTypes: function() {\n            var mimeTypes = _.map(\n                this.attributes.mimeTypes,\n                function(type) {\n                    return type.split('/')[1].toUpperCase();\n                }\n            ),\n                fileFormats = _.map(\n                this.attributes.fileFormats,\n                function(type) {\n                    return type.toUpperCase();\n                }\n            );\n\n            return mimeTypes.concat(fileFormats);\n        },\n        checkTypeValidity: function(file) {\n            var attrs = this.attributes,\n                getRegExp = function(formats) {\n                // Creates regular expression like: /(?:.+)\\.(jpg|png|gif)$/i\n                    return RegExp(('(?:.+)\\\\.(' + formats.join('|') + ')$'), 'i');\n                };\n\n            return (attrs.mimeTypes.length === 0 && attrs.fileFormats.length === 0) ||\n                _.contains(attrs.mimeTypes, file.type) ||\n                getRegExp(attrs.fileFormats).test(file.name);\n        },\n    // Return strings for the valid file types and extensions this\n    // uploader accepts, formatted as natural language\n        formatValidTypes: function() {\n            var attrs = this.attributes;\n\n            if (attrs.mimeTypes.concat(attrs.fileFormats).length === 1) {\n                return {\n                    fileTypes: this.fileTypes()[0],\n                    fileExtensions: '.' + this.fileTypes()[0].toLowerCase()\n                };\n            }\n            var or = gettext('or');\n            var formatTypes = function(types) {\n                return _.template('<%= initial %> <%= or %> <%= last %>')({\n                    initial: _.initial(types).join(', '),\n                    or: or,\n                    last: _.last(types)\n                });\n            };\n            return {\n                fileTypes: formatTypes(this.fileTypes()),\n                fileExtensions: formatTypes(\n                _.map(this.fileTypes(),\n                      function(type) {\n                          return '.' + type.toLowerCase();\n                      })\n            )\n            };\n        }\n    });\n\n    return FileUpload;\n}); // end define()\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/models/uploads.js","define(\n    ['js/models/course'],\n    function(ContextCourse) {\n        window.course = new ContextCourse(window.pageFactoryArguments.ContextCourse);\n    }\n);\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/pages/course.js","define(\n    ['js/factories/textbooks', 'common/js/utils/page_factory', 'js/factories/base', 'js/pages/course'],\n    function(TextbooksFactory, invokePageFactory) {\n        'use strict';\n        invokePageFactory('TextbooksFactory', TextbooksFactory);\n    }\n);\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/pages/textbooks.js","define(['jquery'], function($) {\n    // Trigger \"Change\" event on \"Enter\" keyup event\n    var triggerChangeEventOnEnter = function(e) {\n        if (e.which == 13) {\n            $(this).trigger('change').blur();\n        }\n    };\n\n    return triggerChangeEventOnEnter;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/utils/change_on_enter.js","define(['jquery', 'date', 'js/utils/regional_pl' ,'moment' ,'js/utils/change_on_enter', 'jquery.ui', 'jquery.timepicker'],\nfunction($, date, RegionalPl,  moment, TriggerChangeEventOnEnter) {\n    'use strict';\n    var setupDatePicker = function(fieldName, view, index) {\n        var cacheModel;\n        var div;\n        if (typeof index !== 'undefined' && view.hasOwnProperty('collection')) {\n            cacheModel = view.collection.models[index];\n            div = view.$el.find('#' + view.collectionSelector(cacheModel.cid));\n        } else {\n            cacheModel = view.model;\n            div = view.$el.find('#' + view.fieldToSelectorMap[fieldName]);\n        }\n        var datefield = $(div).find('input.date');\n        var timefield = $(div).find('input.time');\n        var cacheview = view;\n        var setfield = function(event) {\n            var newVal = getDate(datefield, timefield);\n            // Setting to null clears the time as well, as date and time are linked.\n            // Note also that the validation logic prevents us from clearing the start date\n            // (start date is required by the back end).\n            cacheview.clearValidationErrors();\n            cacheview.setAndValidate(fieldName, (newVal || null), event);\n        };\n\n        // instrument as date and time pickers\n        timefield.timepicker({timeFormat: 'H:i'});\n        datefield.datepicker({ dateFormat: 'dd/mm/yy' });\n\n        if ($(\"html\").attr(\"lang\")==='pl'){\n            $.datepicker.setDefaults(RegionalPl);\n        } else {\n            $.datepicker.setDefaults($.datepicker.regional['']);\n        }\n\n\n        // Using the change event causes setfield to be triggered twice, but it is necessary\n        // to pick up when the date is typed directly in the field.\n        datefield.change(setfield).keyup(TriggerChangeEventOnEnter);\n        timefield.on('changeTime', setfield);\n        timefield.on('input', setfield);\n\n        var current_date = null;\n        if (cacheModel) {\n            current_date = cacheModel.get(fieldName);\n        }\n        // timepicker doesn't let us set null, so check that we have a time\n        if (current_date) {\n            setDate(datefield, timefield, current_date);\n        } // but reset fields either way\n        else {\n            timefield.val('');\n            datefield.val('');\n        }\n    };\n\n    var getDate = function(datepickerInput, timepickerInput) {\n        // given a pair of inputs (datepicker and timepicker), return a JS Date\n        // object that corresponds to the datetime.js that they represent. Assume\n        // UTC timezone, NOT the timezone of the user's browser.\n        var date = null,\n            time = null;\n        if (datepickerInput.length > 0) {\n            date = $(datepickerInput).datepicker('getDate');\n        }\n        if (timepickerInput.length > 0) {\n            time = $(timepickerInput).timepicker('getTime');\n        }\n        if (date && time) {\n            return new Date(Date.UTC(\n                date.getFullYear(), date.getMonth(), date.getDate(),\n                time.getHours(), time.getMinutes()\n            ));\n        } else if (date) {\n            return new Date(Date.UTC(\n                date.getFullYear(), date.getMonth(), date.getDate()));\n        } else {\n            return null;\n        }\n    };\n\n    var setDate = function(datepickerInput, timepickerInput, datetime) {\n        // given a pair of inputs (datepicker and timepicker) and the date as an\n        // ISO-formatted date string.\n        datetime = date.parse(datetime);\n        if (datetime) {\n            $(datepickerInput).datepicker('setDate', datetime);\n            if (timepickerInput.length > 0) {\n                $(timepickerInput).timepicker('setTime', datetime);\n            }\n        }\n    };\n\n    var renderDate = function(dateArg) {\n        // Render a localized date from an argument that can be passed to\n        // the Date constructor (e.g. another Date or an ISO 8601 string)\n        var date = new Date(dateArg);\n        return date.toLocaleString(\n            [],\n            {timeZone: 'UTC', timeZoneName: 'short'}\n        );\n    };\n\n    var parseDateFromString = function(stringDate) {\n        if (stringDate && typeof stringDate === 'string') {\n            var parts = stringDate.split('/');\n            return new Date(parts[2], parts[1]-1, parts[0]);\n        } else {\n            return stringDate;\n        }\n    };\n\n    var convertDateStringsToObjects = function(obj, dateFields) {\n        for (var i = 0; i < dateFields.length; i++) {\n            if (obj[dateFields[i]]) {\n                obj[dateFields[i]] = parseDateFromString(obj[dateFields[i]]);\n            }\n        }\n        return obj;\n    };\n\n    return {\n        getDate: getDate,\n        setDate: setDate,\n        renderDate: renderDate,\n        convertDateStringsToObjects: convertDateStringsToObjects,\n        parseDateFromString: parseDateFromString,\n        setupDatePicker: setupDatePicker\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/utils/date_utils.js","define(['jquery'], function($) {\n    var iframeBinding = function(e) {\n        var target_element = null;\n        if (typeof(e) === 'undefined') {\n            target_element = $('iframe, embed');\n        } else {\n            if (typeof(e.nodeName) !== 'undefined') {\n                target_element = $(e).find('iframe, embed');\n            } else {\n                target_element = e.$('iframe, embed');\n            }\n        }\n        modifyTagContent(target_element);\n    };\n\n    var modifyTagContent = function(target_element) {\n        target_element.each(function() {\n            if ($(this).prop('tagName') === 'IFRAME') {\n                var ifr_source = $(this).attr('src');\n\n                // Modify iframe src only if it is not empty\n                if (ifr_source) {\n                    var wmode = 'wmode=transparent';\n                    if (ifr_source.indexOf('?') !== -1) {\n                        var getQString = ifr_source.split('?');\n                        if (getQString[1].search('wmode=transparent') === -1) {\n                            var oldString = getQString[1];\n                            var newString = getQString[0];\n                            $(this).attr('src', newString + '?' + wmode + '&' + oldString);\n                        }\n                    }\n                    // The TinyMCE editor is hosted in an iframe, and before the iframe is\n                    // removed we execute this code. To avoid throwing an error when setting the\n                    // attr, check that the source doesn't start with the value specified by TinyMCE ('javascript:\"\"').\n                    else if (ifr_source.lastIndexOf('javascript:', 0) !== 0) {\n                        $(this).attr('src', ifr_source + '?' + wmode);\n                    }\n                }\n            } else {\n                $(this).attr('wmode', 'transparent');\n            }\n        });\n    };\n\n    // Modify iframe/embed tags in provided html string\n    // Use this method when provided data is just html sting not dom element\n    // This method will only modify iframe (add wmode=transparent in url querystring) and embed (add wmode=transparent as attribute)\n    // tags in html string so both tags will attach to dom and don't create z-index problem for other popups\n    // Note: embed tags should be modified before rendering as they are static objects as compared to iframes\n    // Note: this method can modify unintended html (invalid tags) while converting to dom object\n    var iframeBindingHtml = function(html_string) {\n        if (html_string) {\n            var target_element = null;\n            var temp_content = document.createElement('div');\n            $(temp_content).html(html_string);\n            target_element = $(temp_content).find('iframe, embed');\n            if (target_element.length > 0) {\n                modifyTagContent(target_element);\n                html_string = $(temp_content).html();\n            }\n        }\n        return html_string;\n    };\n\n    return {\n        iframeBinding: iframeBinding,\n        iframeBindingHtml: iframeBindingHtml\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/utils/handle_iframe_binding.js","/**\n * Utilities for modules/xblocks.\n *\n * Returns:\n *\n * urlRoot: the root for creating/updating an xblock.\n * getUpdateUrl: a utility method that returns the xblock update URL, appending\n *               the location if passed in.\n */\ndefine(['underscore'], function(_) {\n    var urlRoot = '/xblock';\n\n    var getUpdateUrl = function(locator) {\n        if (_.isUndefined(locator)) {\n            return urlRoot + '/';\n        } else {\n            return urlRoot + '/' + locator;\n        }\n    };\n    return {\n        urlRoot: urlRoot,\n        getUpdateUrl: getUpdateUrl\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/utils/module.js","define(['jquery'],\nfunction($) {\n\nreturn {\n                closeText: \"Zamknij\",\n                prevText: \"&#x3C;Poprzedni\",\n                nextText: \"Nastpny&#x3E;\",\n                currentText: \"Dzi\",\n                monthNames: [\"Stycze\", \"Luty\", \"Marzec\", \"Kwiecie\", \"Maj\", \"Czerwiec\",\n                    \"Lipiec\", \"Sierpie\", \"Wrzesie\", \"Padziernik\", \"Listopad\", \"Grudzie\"],\n                monthNamesShort: [\"Sty\", \"Lu\", \"Mar\", \"Kw\", \"Maj\", \"Cze\",\n                    \"Lip\", \"Sie\", \"Wrz\", \"Pa\", \"Lis\", \"Gru\"],\n                dayNames: [\"Niedziela\", \"Poniedziaek\", \"Wtorek\", \"roda\", \"Czwartek\", \"Pitek\", \"Sobota\"],\n                dayNamesShort: [\"Nie\", \"Pn\", \"Wt\", \"r\", \"Czw\", \"Pt\", \"So\"],\n                dayNamesMin: [\"N\", \"Pn\", \"Wt\", \"r\", \"Cz\", \"Pt\", \"So\"],\n                weekHeader: \"Tydz\",\n                dateFormat: \"dd/mm/yy\",\n                firstDay: 1,\n                isRTL: false,\n                showMonthAfterYear: false,\n                yearSuffix: \"\"\n            };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/utils/regional_pl.js","define(['jquery', 'underscore'], function($, _) {\n    /**\n     * Loads the named template from the page, or logs an error if it fails.\n     * @param name The name of the template.\n     * @returns The loaded template.\n     */\n    var loadTemplate = function(name) {\n        var templateSelector = '#' + name + '-tpl',\n            templateText = $(templateSelector).text();\n        if (!templateText) {\n            console.error('Failed to load ' + name + ' template');\n        }\n        return _.template(templateText);\n    };\n\n    return {\n        loadTemplate: loadTemplate\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/utils/templates.js","define(['jquery', 'underscore', 'backbone', 'gettext', 'js/utils/handle_iframe_binding', 'js/utils/templates',\n    'common/js/components/utils/view_utils'],\n    function($, _, Backbone, gettext, IframeUtils, TemplateUtils, ViewUtils) {\n        /*\n         This view is extended from backbone to provide useful functionality for all Studio views.\n         This functionality includes:\n         - automatic expand and collapse of elements with the 'ui-toggle-expansion' class specified\n         - additional control of rendering by overriding 'beforeRender' or 'afterRender'\n\n         Note: the default 'afterRender' function calls a utility function 'iframeBinding' which modifies\n         iframe src urls on a page so that they are rendered as part of the DOM.\n         */\n\n        var BaseView = Backbone.View.extend({\n            events: {\n                'click .ui-toggle-expansion': 'toggleExpandCollapse'\n            },\n\n            options: {\n                // UX is moving towards using 'is-collapsed' in preference over 'collapsed',\n                // but use the old scheme as the default so that existing code doesn't need\n                // to be rewritten.\n                collapsedClass: 'collapsed'\n            },\n\n            // override the constructor function\n            constructor: function(options) {\n                _.bindAll(this, 'beforeRender', 'render', 'afterRender');\n\n                // Merge passed options and view's options property and\n                // attach to the view's options property\n                if (this.options) {\n                    options = _.extend({}, _.result(this, 'options'), options);\n                }\n\n                // trunc is not available in IE, and it provides polyfill for it.\n                // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc\n                if (!Math.trunc) {\n                    Math.trunc = function(v) {\n                        v = +v;  // eslint-disable-line no-param-reassign\n                        return (v - v % 1) || (!isFinite(v) || v === 0 ? v : v < 0 ? -0 : 0);\n                    };\n                }\n                this.options = options;\n\n                var _this = this;\n                this.render = _.wrap(this.render, function(render, options) {\n                    _this.beforeRender();\n                    render(options);\n                    _this.afterRender();\n                    return _this;\n                });\n\n                // call Backbone's own constructor\n                Backbone.View.prototype.constructor.apply(this, arguments);\n            },\n\n            beforeRender: function() {\n            },\n\n            render: function() {\n                return this;\n            },\n\n            afterRender: function() {\n                IframeUtils.iframeBinding(this);\n            },\n\n            toggleExpandCollapse: function(event) {\n                var $target = $(event.target);\n                // Don't propagate the event as it is possible that two views will both contain\n                // this element, e.g. clicking on the element of a child view container in a parent.\n                event.stopPropagation();\n                event.preventDefault();\n                ViewUtils.toggleExpandCollapse($target, this.options.collapsedClass);\n            },\n\n            /**\n             * Loads the named template from the page, or logs an error if it fails.\n             * @param name The name of the template.\n             * @returns The loaded template.\n             */\n            loadTemplate: function(name) {\n                return TemplateUtils.loadTemplate(name);\n            }\n        });\n\n        return BaseView;\n    });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/baseview.js","/* global course */\n\ndefine(['underscore', 'jquery', 'gettext', 'edx-ui-toolkit/js/utils/html-utils',\n    'js/views/baseview', 'js/models/uploads', 'js/views/uploads', 'templates/edit-chapter.underscore'],\n    function(_, $, gettext, HtmlUtils, BaseView, FileUploadModel, UploadDialogView, editChapterTemplate) {\n        'use strict';\n\n        var EditChapter = BaseView.extend({\n            initialize: function() {\n                this.template = HtmlUtils.template(editChapterTemplate);\n                this.listenTo(this.model, 'change', this.render);\n            },\n            tagName: 'li',\n            className: function() {\n                return 'field-group chapter chapter' + this.model.get('order');\n            },\n            render: function() {\n                HtmlUtils.setHtml(\n                    this.$el,\n                    this.template({\n                        name: this.model.get('name'),\n                        asset_path: this.model.get('asset_path'),\n                        order: this.model.get('order'),\n                        error: this.model.validationError\n                    })\n                );\n                return this;\n            },\n            events: {\n                'change .chapter-name': 'changeName',\n                'change .chapter-asset-path': 'changeAssetPath',\n                'click .action-close': 'removeChapter',\n                'click .action-upload': 'openUploadDialog',\n                submit: 'uploadAsset'\n            },\n            changeName: function(e) {\n                if (e && e.preventDefault) { e.preventDefault(); }\n                this.model.set({\n                    name: this.$('.chapter-name').val()\n                }, {silent: true});\n                return this;\n            },\n            changeAssetPath: function(e) {\n                if (e && e.preventDefault) { e.preventDefault(); }\n                this.model.set({\n                    asset_path: this.$('.chapter-asset-path').val()\n                }, {silent: true});\n                return this;\n            },\n            removeChapter: function(e) {\n                if (e && e.preventDefault) { e.preventDefault(); }\n                this.model.collection.remove(this.model);\n                return this.remove();\n            },\n            openUploadDialog: function(e) {\n                if (e && e.preventDefault) { e.preventDefault(); }\n                this.model.set({\n                    name: this.$('input.chapter-name').val(),\n                    asset_path: this.$('input.chapter-asset-path').val()\n                });\n                var msg = new FileUploadModel({\n                    title: _.template(gettext('Upload a new PDF to <%= name %>'))(\n                        {name: course.escape('name')}),\n                    message: gettext('Please select a PDF file to upload.'),\n                    mimeTypes: ['application/pdf']\n                });\n                var that = this;\n                var view = new UploadDialogView({\n                    model: msg,\n                    onSuccess: function(response) {\n                        var options = {};\n                        if (!that.model.get('name')) {\n                            options.name = response.asset.displayname;\n                        }\n                        options.asset_path = response.asset.portable_url;\n                        that.model.set(options);\n                    }\n                });\n                view.show();\n            }\n        });\n\n        return EditChapter;\n    });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/edit_chapter.js","define(['js/views/baseview', 'underscore', 'jquery', 'js/views/edit_chapter', 'common/js/components/views/feedback_notification'],\n        function(BaseView, _, $, EditChapterView, NotificationView) {\n            var EditTextbook = BaseView.extend({\n                initialize: function() {\n                    this.template = this.loadTemplate('edit-textbook');\n                    this.listenTo(this.model, 'invalid', this.render);\n                    var chapters = this.model.get('chapters');\n                    this.listenTo(chapters, 'add', this.addOne);\n                    this.listenTo(chapters, 'reset', this.addAll);\n                    this.listenTo(chapters, 'all', this.render);\n                },\n                tagName: 'section',\n                className: 'textbook',\n                render: function() {\n                    this.$el.html(this.template({\n                        name: this.model.get('name'),\n                        error: this.model.validationError\n                    }));\n                    this.addAll();\n                    return this;\n                },\n                events: {\n                    'change input[name=textbook-name]': 'setName',\n                    submit: 'setAndClose',\n                    'click .action-cancel': 'cancel',\n                    'click .action-add-chapter': 'createChapter'\n                },\n                addOne: function(chapter) {\n                    var view = new EditChapterView({model: chapter});\n                    this.$('ol.chapters').append(view.render().el);\n                    return this;\n                },\n                addAll: function() {\n                    this.model.get('chapters').each(this.addOne, this);\n                },\n                createChapter: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.setValues();\n                    this.model.get('chapters').add([{}]);\n                },\n                setName: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.model.set('name', this.$('#textbook-name-input').val(), {silent: true});\n                },\n                setValues: function() {\n                    this.setName();\n                    var that = this;\n                    _.each(this.$('li'), function(li, i) {\n                        var chapter = that.model.get('chapters').at(i);\n                        if (!chapter) { return; }\n                        chapter.set({\n                            name: $('.chapter-name', li).val(),\n                            asset_path: $('.chapter-asset-path', li).val()\n                        });\n                    });\n                    return this;\n                },\n                setAndClose: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.setValues();\n                    if (!this.model.isValid()) { return; }\n                    var saving = new NotificationView.Mini({\n                        title: gettext('Saving')\n                    }).show();\n                    var that = this;\n                    this.model.save({}, {\n                        success: function() {\n                            that.model.setOriginalAttributes();\n                            that.close();\n                        },\n                        complete: function() {\n                            saving.hide();\n                        }\n                    });\n                },\n                cancel: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.model.reset();\n                    return this.close();\n                },\n                close: function() {\n                    var textbooks = this.model.collection;\n                    this.remove();\n                    if (this.model.isNew()) {\n                // if the textbook has never been saved, remove it\n                        textbooks.remove(this.model);\n                    }\n            // don't forget to tell the model that it's no longer being edited\n                    this.model.set('editing', false);\n                    return this;\n                }\n            });\n            return EditTextbook;\n        });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/edit_textbook.js","define(['js/views/baseview', 'jquery', 'js/views/edit_textbook', 'js/views/show_textbook', 'common/js/components/utils/view_utils'],\n        function(BaseView, $, EditTextbookView, ShowTextbookView, ViewUtils) {\n            var ListTextbooks = BaseView.extend({\n                initialize: function() {\n                    this.emptyTemplate = this.loadTemplate('no-textbooks');\n                    this.listenTo(this.collection, 'all', this.render);\n                    this.listenTo(this.collection, 'destroy', this.handleDestroy);\n                },\n                tagName: 'div',\n                className: 'textbooks-list',\n                render: function() {\n                    var textbooks = this.collection;\n                    if (textbooks.length === 0) {\n                        this.$el.html(this.emptyTemplate());\n                    } else {\n                        this.$el.empty();\n                        var that = this;\n                        textbooks.each(function(textbook) {\n                            var view;\n                            if (textbook.get('editing')) {\n                                view = new EditTextbookView({model: textbook});\n                            } else {\n                                view = new ShowTextbookView({model: textbook});\n                            }\n                            that.$el.append(view.render().el);\n                        });\n                    }\n                    return this;\n                },\n                events: {\n                    'click .new-button': 'addOne'\n                },\n                addOne: function(e) {\n                    var $sectionEl, $inputEl;\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.collection.add([{editing: true}]); // (render() call triggered here)\n            // find the outer 'section' tag for the newly added textbook\n                    $sectionEl = this.$el.find('section:last');\n            // scroll to put this at top of viewport\n                    ViewUtils.setScrollOffset($sectionEl, 0);\n            // find the first input element in this section\n                    $inputEl = $sectionEl.find('input:first');\n            // activate the text box (so user can go ahead and start typing straight away)\n                    $inputEl.focus().select();\n                },\n                handleDestroy: function(model, collection, options) {\n                    collection.remove(model);\n                }\n            });\n            return ListTextbooks;\n        });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/list_textbooks.js","/**\n * This is a base modal implementation that provides common utilities.\n *\n * A modal implementation should override the following methods:\n *\n *   getTitle():\n *     returns the title for the modal.\n *   getContentHtml():\n *     returns the HTML content to be shown inside the modal.\n *\n * A modal implementation should also provide the following options:\n *\n *   modalName: A string identifying the modal.\n *   modalType: A string identifying the type of the modal.\n *   modalSize: A string, either 'sm', 'med', or 'lg' indicating the\n *     size of the modal.\n *   viewSpecificClasses: A string of CSS classes to be attached to\n *     the modal window.\n *   addPrimaryActionButton: A boolean indicating whether to include a primary action\n *     button on the modal.\n *   primaryActionButtonType: A string to be used as type for primary action button.\n *   primaryActionButtonTitle: A string to be used as title for primary action button.\n *   showEditorModeButtons: Whether to show editor mode button in the modal header.\n */\ndefine(['jquery', 'underscore', 'gettext', 'js/views/baseview'],\n    function($, _, gettext, BaseView) {\n        var BaseModal = BaseView.extend({\n            events: {\n                'click .action-cancel': 'cancel'\n            },\n\n            options: _.extend({}, BaseView.prototype.options, {\n                type: 'prompt',\n                closeIcon: false,\n                icon: false,\n                modalName: 'basic',\n                modalType: 'generic',\n                modalSize: 'lg',\n                title: '',\n                modalWindowClass: '.modal-window',\n                // A list of class names, separated by space.\n                viewSpecificClasses: '',\n                addPrimaryActionButton: false,\n                primaryActionButtonType: 'save',\n                primaryActionButtonTitle: gettext('Save'),\n                showEditorModeButtons: true\n            }),\n\n            initialize: function() {\n                var parent = this.options.parent,\n                    parentElement = this.options.parentElement;\n                this.modalTemplate = this.loadTemplate('basic-modal');\n                this.buttonTemplate = this.loadTemplate('modal-button');\n                if (parent) {\n                    parentElement = parent.$el;\n                } else if (!parentElement) {\n                    parentElement = this.$el.closest(this.options.modalWindowClass);\n                    if (parentElement.length === 0) {\n                        parentElement = $('body');\n                    }\n                }\n                this.parentElement = parentElement;\n            },\n\n            render: function() {\n                this.$el.html(this.modalTemplate({\n                    name: this.options.modalName,\n                    type: this.options.modalType,\n                    size: this.options.modalSize,\n                    title: this.getTitle(),\n                    modalSRTitle: this.options.modalSRTitle,\n                    showEditorModeButtons: this.options.showEditorModeButtons,\n                    viewSpecificClasses: this.options.viewSpecificClasses\n                }));\n                this.addActionButtons();\n                this.renderContents();\n                this.parentElement.append(this.$el);\n            },\n\n            getTitle: function() {\n                return this.options.title;\n            },\n\n            renderContents: function() {\n                var contentHtml = this.getContentHtml();\n                this.$('.modal-content').html(contentHtml);\n            },\n\n            /**\n             * Returns the content to be shown in the modal.\n             */\n            getContentHtml: function() {\n                return '';\n            },\n\n            show: function(focusModal) {\n                var focusModalWindow = focusModal === undefined;\n                this.render();\n                this.resize();\n                $(window).resize(_.bind(this.resize, this));\n\n                // child may want to have its own focus management\n                if (focusModalWindow) {\n                    // after showing and resizing, send focus\n                    this.$el.find(this.options.modalWindowClass).focus();\n                }\n            },\n\n            hide: function() {\n                // Completely remove the modal from the DOM\n                this.undelegateEvents();\n                this.$el.html('');\n            },\n\n            cancel: function(event) {\n                if (event) {\n                    event.preventDefault();\n                    event.stopPropagation(); // Make sure parent modals don't see the click\n                }\n                this.hide();\n            },\n\n            /**\n             * Adds the action buttons to the modal.\n             */\n            addActionButtons: function() {\n                if (this.options.addPrimaryActionButton) {\n                    this.addActionButton(\n                        this.options.primaryActionButtonType,\n                        this.options.primaryActionButtonTitle,\n                        true\n                    );\n                }\n                this.addActionButton('cancel', gettext('Cancel'));\n            },\n\n            /**\n             * Adds a new action button to the modal.\n             * @param type The type of the action.\n             * @param name The action's name.\n             * @param isPrimary True if this button is the primary one.\n             */\n            addActionButton: function(type, name, isPrimary) {\n                var html = this.buttonTemplate({\n                    type: type,\n                    name: name,\n                    isPrimary: isPrimary\n                });\n                this.getActionBar().find('ul').append(html);\n            },\n\n            /**\n             * Returns the action bar that contains the modal's action buttons.\n             */\n            getActionBar: function() {\n                return this.$(this.options.modalWindowClass + ' > div > .modal-actions');\n            },\n\n            /**\n             * Returns the action button of the specified type.\n             */\n            getActionButton: function(type) {\n                return this.getActionBar().find('.action-' + type);\n            },\n\n            enableActionButton: function(type) {\n                this.getActionBar().find('.action-' + type).prop('disabled', false).removeClass('is-disabled');\n            },\n\n            disableActionButton: function(type) {\n                this.getActionBar().find('.action-' + type).prop('disabled', true).addClass('is-disabled');\n            },\n\n            resize: function() {\n                var top, left, modalWindow, modalWidth, modalHeight,\n                    availableWidth, availableHeight, maxWidth, maxHeight;\n\n                modalWindow = this.$el.find(this.options.modalWindowClass);\n                availableWidth = $(window).width();\n                availableHeight = $(window).height();\n                maxWidth = availableWidth * 0.80;\n                maxHeight = availableHeight * 0.80;\n                modalWidth = Math.min(modalWindow.outerWidth(), maxWidth);\n                modalHeight = Math.min(modalWindow.outerHeight(), maxHeight);\n\n                left = (availableWidth - modalWidth) / 2;\n                top = (availableHeight - modalHeight) / 2;\n\n                modalWindow.css({\n                    top: top + $(window).scrollTop(),\n                    left: left + $(window).scrollLeft()\n                });\n            }\n        });\n\n        return BaseModal;\n    });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/modals/base_modal.js","define(['js/views/baseview', 'underscore', 'gettext', 'common/js/components/views/feedback_notification',\n    'common/js/components/views/feedback_prompt'],\n        function(BaseView, _, gettext, NotificationView, PromptView) {\n            var ShowTextbook = BaseView.extend({\n                initialize: function() {\n                    this.template = _.template($('#show-textbook-tpl').text());\n                    this.listenTo(this.model, 'change', this.render);\n                },\n                tagName: 'section',\n                className: 'textbook',\n                events: {\n                    'click .edit': 'editTextbook',\n                    'click .delete': 'confirmDelete',\n                    'click .show-chapters': 'showChapters',\n                    'click .hide-chapters': 'hideChapters'\n                },\n                render: function() {\n                    var attrs = $.extend({}, this.model.attributes);\n                    attrs.bookindex = this.model.collection.indexOf(this.model);\n                    attrs.course = window.course.attributes;\n                    this.$el.html(this.template(attrs));\n                    return this;\n                },\n                editTextbook: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.model.set('editing', true);\n                },\n                confirmDelete: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    var textbook = this.model;\n                    new PromptView.Warning({\n                        title: _.template(gettext('Delete <%= name %>?'))(\n                    {name: textbook.get('name')}\n                ),\n                        message: gettext(\"Deleting a textbook cannot be undone and once deleted any reference to it in your courseware's navigation will also be removed.\"),\n                        actions: {\n                            primary: {\n                                text: gettext('Delete'),\n                                click: function(view) {\n                                    view.hide();\n                                    var delmsg = new NotificationView.Mini({\n                                        title: gettext('Deleting')\n                                    }).show();\n                                    textbook.destroy({\n                                        complete: function() {\n                                            delmsg.hide();\n                                        }\n                                    });\n                                }\n                            },\n                            secondary: {\n                                text: gettext('Cancel'),\n                                click: function(view) {\n                                    view.hide();\n                                }\n                            }\n                        }\n                    }).show();\n                },\n                showChapters: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.model.set('showChapters', true);\n                },\n                hideChapters: function(e) {\n                    if (e && e.preventDefault) { e.preventDefault(); }\n                    this.model.set('showChapters', false);\n                }\n            });\n            return ShowTextbook;\n        });\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/show_textbook.js","define(['jquery', 'underscore', 'gettext', 'js/views/modals/base_modal', 'jquery.form'],\n    function($, _, gettext, BaseModal) {\n        var UploadDialog = BaseModal.extend({\n            events: _.extend({}, BaseModal.prototype.events, {\n                'change input[type=file]': 'selectFile',\n                'click .action-upload': 'upload'\n            }),\n\n            options: $.extend({}, BaseModal.prototype.options, {\n                modalName: 'assetupload',\n                modalSize: 'med',\n                successMessageTimeout: 2000, // 2 seconds\n                viewSpecificClasses: 'confirm'\n            }),\n\n            initialize: function() {\n                BaseModal.prototype.initialize.call(this);\n                this.template = this.loadTemplate('upload-dialog');\n                this.listenTo(this.model, 'change', this.renderContents);\n                this.options.title = this.model.get('title');\n            },\n\n            addActionButtons: function() {\n                this.addActionButton('upload', gettext('Upload'), true);\n                BaseModal.prototype.addActionButtons.call(this);\n            },\n\n            renderContents: function() {\n                var isValid = this.model.isValid(),\n                    selectedFile = this.model.get('selectedFile'),\n                    oldInput = this.$('input[type=file]').get(0);\n                BaseModal.prototype.renderContents.call(this);\n                // Ideally, we'd like to tell the browser to pre-populate the\n                // <input type=\"file\"> with the selectedFile if we have one -- but\n                // browser security prohibits that. So instead, we'll swap out the\n                // new input (that has no file selected) with the old input (that\n                // already has the selectedFile selected). However, we only want to do\n                // this if the selected file is valid: if it isn't, we want to render\n                // a blank input to prompt the user to upload a different (valid) file.\n                if (selectedFile && isValid) {\n                    $(oldInput).removeClass('error');\n                    this.$('input[type=file]').replaceWith(oldInput);\n                    this.$('.action-upload').removeClass('disabled');\n                } else {\n                    this.$('.action-upload').addClass('disabled');\n                }\n                return this;\n            },\n\n            getContentHtml: function() {\n                return this.template({\n                    url: this.options.url || CMS.URL.UPLOAD_ASSET,\n                    message: this.model.escape('message'),\n                    selectedFile: this.model.get('selectedFile'),\n                    uploading: this.model.get('uploading'),\n                    uploadedBytes: this.model.get('uploadedBytes'),\n                    totalBytes: this.model.get('totalBytes'),\n                    finished: this.model.get('finished'),\n                    error: this.model.validationError\n                });\n            },\n\n            selectFile: function(e) {\n                var selectedFile = e.target.files[0] || null;\n                this.model.set({\n                    selectedFile: selectedFile\n                });\n                // This change event triggering necessary for FireFox, because the browser don't\n                // consider change of File object (file input field) as a change in model.\n                if (selectedFile && $.isEmptyObject(this.model.changed)) {\n                    this.model.trigger('change');\n                }\n            },\n\n            upload: function(e) {\n                if (e && e.preventDefault) { e.preventDefault(); }\n                this.model.set('uploading', true);\n                this.$('form').ajaxSubmit({\n                    success: _.bind(this.success, this),\n                    error: _.bind(this.error, this),\n                    uploadProgress: _.bind(this.progress, this),\n                    data: {\n                        // don't show the generic error notification; we're in a modal,\n                        // and we're better off modifying it instead.\n                        notifyOnError: false\n                    }\n                });\n            },\n\n            progress: function(event, position, total) {\n                this.model.set({\n                    uploadedBytes: position,\n                    totalBytes: total\n                });\n            },\n\n            success: function(response, statusText, xhr, form) {\n                this.model.set({\n                    uploading: false,\n                    finished: true\n                });\n                if (this.options.onSuccess) {\n                    this.options.onSuccess(response, statusText, xhr, form);\n                }\n                var that = this;\n                this.removalTimeout = setTimeout(function() {\n                    that.hide();\n                }, this.options.successMessageTimeout);\n            },\n\n            error: function() {\n                this.model.set({\n                    uploading: false,\n                    uploadedBytes: 0,\n                    title: gettext(\"We're sorry, there was an error\")\n                });\n            }\n        });\n        return UploadDialog;\n    }); // end define()\n\n\n\n// WEBPACK FOOTER //\n// ./cms/static/js/views/uploads.js","module.exports = \"<div class=\\\"input-wrap field text required field-add-chapter-name chapter<%- order %>-name\\n    <% if (error && error.attributes && error.attributes.name) { print('error'); } %>\\\">\\n  <label for=\\\"chapter<%- order %>-name\\\"><%- gettext(\\\"Chapter Name\\\") %></label>\\n  <input id=\\\"chapter<%- order %>-name\\\" name=\\\"chapter<%- order %>-name\\\" class=\\\"chapter-name short\\\" placeholder=\\\"<%- StringUtils.interpolate(gettext(\\\"Chapter {order}\\\"), {order: order}) %>\\\" value=\\\"<%- name %>\\\" type=\\\"text\\\">\\n  <span class=\\\"tip tip-stacked\\\"><%- gettext(\\\"provide the title/name of the chapter that will be used in navigating\\\") %></span>\\n</div>\\n<div class=\\\"input-wrap field text required field-add-chapter-asset chapter<%- order %>-asset\\n    <% if (error && error.attributes && error.attributes.asset_path) { print('error'); } %>\\\">\\n  <label for=\\\"chapter<%- order %>-asset-path\\\"><%- gettext(\\\"Chapter Asset\\\") %></label>\\n  <input id=\\\"chapter<%- order %>-asset-path\\\" name=\\\"chapter<%- order %>-asset-path\\\" class=\\\"chapter-asset-path\\\" placeholder=\\\"<%- StringUtils.interpolate(gettext(\\\"path/to/introductionToCookieBaking-CH{order}.pdf\\\"), {order: order}) %>\\\" value=\\\"<%- asset_path %>\\\" type=\\\"text\\\" dir=\\\"ltr\\\">\\n  <span class=\\\"tip tip-stacked\\\"><%- gettext(\\\"upload a PDF file or provide the path to a Studio asset file\\\") %></span>\\n<button class=\\\"action action-upload\\\"><%- gettext(\\\"Upload PDF\\\") %></button>\\n</div>\\n<a href=\\\"\\\" class=\\\"action action-close\\\"><span class=\\\"icon fa fa-times-circle\\\" aria-hidden=\\\"true\\\"></span> <span class=\\\"sr\\\"><%- gettext(\\\"delete chapter\\\") %></span></a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./cms/templates/js/edit-chapter.underscore\n// module id = ./cms/templates/js/edit-chapter.underscore\n// module chunks = 4","/**\n * Provides useful utilities for views.\n */\n\n    'use strict';\n\n    define(['jquery', 'underscore', 'gettext', 'common/js/components/views/feedback_notification',\n        'common/js/components/views/feedback_prompt'],\n        function($, _, gettext, NotificationView, PromptView) {\n            var toggleExpandCollapse, showLoadingIndicator, hideLoadingIndicator, confirmThenRunOperation,\n                runOperationShowingMessage, withDisabledElement, disableElementWhileRunning,\n                getScrollOffset, setScrollOffset, setScrollTop, redirect, reload, hasChangedAttributes,\n                deleteNotificationHandler, validateRequiredField, validateURLItemEncoding,\n                validateTotalKeyLength, checkTotalKeyLengthViolations, loadJavaScript;\n\n            // see https://openedx.atlassian.net/browse/TNL-889 for what is it and why it's 65\n            var MAX_SUM_KEY_LENGTH = 65;\n\n            /**\n             * Toggles the expanded state of the current element.\n             */\n            toggleExpandCollapse = function(target, collapsedClass) {\n                // Support the old 'collapsed' option until fully switched over to is-collapsed\n                if (!collapsedClass) {\n                    collapsedClass = 'collapsed';\n                }\n                target.closest('.expand-collapse').toggleClass('expand collapse');\n                target.closest('.is-collapsible, .window').toggleClass(collapsedClass);\n                target.closest('.is-collapsible').children('article').slideToggle();\n            };\n\n            /**\n             * Show the page's loading indicator.\n             */\n            showLoadingIndicator = function() {\n                $('.ui-loading').show();\n            };\n\n            /**\n             * Hide the page's loading indicator.\n             */\n            hideLoadingIndicator = function() {\n                $('.ui-loading').hide();\n            };\n\n            /**\n             * Confirms with the user whether to run an operation or not, and then runs it if desired.\n             */\n            confirmThenRunOperation = function(title, message, actionLabel, operation, onCancelCallback) {\n                return new PromptView.Warning({\n                    title: title,\n                    message: message,\n                    actions: {\n                        primary: {\n                            text: actionLabel,\n                            click: function(prompt) {\n                                prompt.hide();\n                                operation();\n                            }\n                        },\n                        secondary: {\n                            text: gettext('Cancel'),\n                            click: function(prompt) {\n                                if (onCancelCallback) {\n                                    onCancelCallback();\n                                }\n                                return prompt.hide();\n                            }\n                        }\n                    }\n                }).show();\n            };\n\n            /**\n             * Shows a progress message for the duration of an asynchronous operation.\n             * Note: this does not remove the notification upon failure because an error\n             * will be shown that shouldn't be removed.\n             * @param message The message to show.\n             * @param operation A function that returns a promise representing the operation.\n             */\n            runOperationShowingMessage = function(message, operation) {\n                var notificationView;\n                notificationView = new NotificationView.Mini({\n                    title: gettext(message)\n                });\n                notificationView.show();\n                return operation().done(function() {\n                    notificationView.hide();\n                });\n            };\n\n            /**\n             * Wraps a Backbone event callback to disable the event's target element.\n             *\n             * This paradigm is designed to be used in Backbone event maps where\n             * multiple events firing simultaneously is not desired.\n             *\n             * @param functionName the function to execute, as a string.\n             * The function must return a jQuery promise and be able to take an event\n             */\n            withDisabledElement = function(functionName) {\n                return function(event) {\n                    var view = this;\n                    disableElementWhileRunning($(event.currentTarget), function() {\n                        // call view.functionName(event), with view as the current this\n                        return view[functionName].apply(view, [event]);\n                    });\n                };\n            };\n\n            /**\n             * Disables a given element when a given operation is running.\n             * @param {jQuery} element the element to be disabled.\n             * @param operation the operation during whose duration the\n             * element should be disabled. The operation should return\n             * a JQuery promise.\n             */\n            disableElementWhileRunning = function(element, operation) {\n                element.addClass('is-disabled').attr('aria-disabled', true);\n                return operation().always(function() {\n                    element.removeClass('is-disabled').attr('aria-disabled', false);\n                });\n            };\n\n            /**\n             * Returns a handler that removes a notification, both dismissing it and deleting it from the database.\n             * @param callback function to call when deletion succeeds\n             */\n            deleteNotificationHandler = function(callback) {\n                return function(event) {\n                    event.preventDefault();\n                    $.ajax({\n                        url: $(this).data('dismiss-link'),\n                        type: 'DELETE',\n                        success: callback\n                    });\n                };\n            };\n\n            /**\n             * Performs an animated scroll so that the window has the specified scroll top.\n             * @param scrollTop The desired scroll top for the window.\n             */\n            setScrollTop = function(scrollTop) {\n                $('html, body').animate({\n                    scrollTop: scrollTop\n                }, 500);\n            };\n\n            /**\n             * Returns the relative position that the element is scrolled from the top of the view port.\n             * @param element The element in question.\n             */\n            getScrollOffset = function(element) {\n                var elementTop = element.offset().top;\n                return elementTop - $(window).scrollTop();\n            };\n\n            /**\n             * Scrolls the window so that the element is scrolled down to the specified relative position\n             * from the top of the view port.\n             * @param element The element in question.\n             * @param offset The amount by which the element should be scrolled from the top of the view port.\n             */\n            setScrollOffset = function(element, offset) {\n                var elementTop = element.offset().top,\n                    newScrollTop = elementTop - offset;\n                setScrollTop(newScrollTop);\n            };\n\n            /**\n             * Redirects to the specified URL. This is broken out as its own function for unit testing.\n             */\n            redirect = function(url) {\n                window.location = url;\n            };\n\n            /**\n             * Reloads the page. This is broken out as its own function for unit testing.\n             */\n            reload = function() {\n                window.location.reload();\n            };\n\n            /**\n             * Returns true if a model has changes to at least one of the specified attributes.\n             * @param model The model in question.\n             * @param attributes The list of attributes to be compared.\n             * @returns {boolean} Returns true if attribute changes are found.\n             */\n            hasChangedAttributes = function(model, attributes) {\n                var i,\n                    changedAttributes = model.changedAttributes();\n                if (!changedAttributes) {\n                    return false;\n                }\n                for (i = 0; i < attributes.length; i++) {\n                    if (_.has(changedAttributes, attributes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n\n            /**\n             * Helper method for course/library creation - verifies a required field is not blank.\n             */\n            validateRequiredField = function(msg) {\n                return msg.length === 0 ? gettext('Required field.') : '';\n            };\n\n            /**\n             * Helper method for course/library creation.\n             * Check that a course (org, number, run) doesn't use any special characters\n             */\n            validateURLItemEncoding = function(item, allowUnicode) {\n                var required = validateRequiredField(item);\n                if (required) {\n                    return required;\n                }\n                if (allowUnicode) {\n                    if (/\\s/g.test(item)) {\n                        return gettext('Please do not use any spaces in this field.');\n                    }\n                } else {\n                    if (item !== encodeURIComponent(item) || item.match(/[!'()*]/)) {\n                        return gettext('Please do not use any spaces or special characters in this field.');\n                    }\n                }\n                return '';\n            };\n\n            // Ensure that sum length of key field values <= ${MAX_SUM_KEY_LENGTH} chars.\n            validateTotalKeyLength = function(key_field_selectors) {\n                var totalLength = _.reduce(\n                    key_field_selectors,\n                    function(sum, ele) { return sum + $(ele).val().length; },\n                    0\n                );\n                return totalLength <= MAX_SUM_KEY_LENGTH;\n            };\n\n            checkTotalKeyLengthViolations = function(selectors, classes, key_field_selectors, message_tpl) {\n                if (!validateTotalKeyLength(key_field_selectors)) {\n                    $(selectors.errorWrapper).addClass(classes.shown).removeClass(classes.hiding);\n                    $(selectors.errorMessage).html(\n                        '<p>' + _.template(message_tpl)({limit: MAX_SUM_KEY_LENGTH}) + '</p>'\n                    );\n                    $(selectors.save).addClass(classes.disabled);\n                } else {\n                    $(selectors.errorWrapper).removeClass(classes.shown).addClass(classes.hiding);\n                }\n            };\n\n            /**\n             * Dynamically loads the specified JavaScript file.\n             * @param url The URL to a JavaScript file.\n             * @returns {Promise} A promise indicating when the URL has been loaded.\n             */\n            loadJavaScript = function(url) {\n                var deferred = $.Deferred();\n                require([url],\n                    function() {\n                        deferred.resolve();\n                    },\n                    function() {\n                        deferred.reject();\n                    });\n                return deferred.promise();\n            };\n\n            return {\n                toggleExpandCollapse: toggleExpandCollapse,\n                showLoadingIndicator: showLoadingIndicator,\n                hideLoadingIndicator: hideLoadingIndicator,\n                confirmThenRunOperation: confirmThenRunOperation,\n                runOperationShowingMessage: runOperationShowingMessage,\n                withDisabledElement: withDisabledElement,\n                disableElementWhileRunning: disableElementWhileRunning,\n                deleteNotificationHandler: deleteNotificationHandler,\n                setScrollTop: setScrollTop,\n                getScrollOffset: getScrollOffset,\n                setScrollOffset: setScrollOffset,\n                redirect: redirect,\n                reload: reload,\n                hasChangedAttributes: hasChangedAttributes,\n                validateRequiredField: validateRequiredField,\n                validateURLItemEncoding: validateURLItemEncoding,\n                validateTotalKeyLength: validateTotalKeyLength,\n                checkTotalKeyLengthViolations: checkTotalKeyLengthViolations,\n                loadJavaScript: loadJavaScript\n            };\n        });\n\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/common/js/components/utils/view_utils.js","\n    'use strict';\n    define(['jquery', 'underscore', 'underscore.string', 'common/js/components/views/feedback'],\n        function($, _, str, SystemFeedbackView) {\n            var Prompt = SystemFeedbackView.extend({\n                options: $.extend({}, SystemFeedbackView.prototype.options, {\n                    type: 'prompt',\n                    closeIcon: false,\n                    icon: false\n                }),\n                render: function() {\n                    if (!window.$body) { window.$body = $(document.body); }\n                    if (this.options.shown) {\n                        $body.addClass('prompt-is-shown');\n                    } else {\n                        $body.removeClass('prompt-is-shown');\n                    }\n                    // super() in Javascript has awkward syntax :(\n                    return SystemFeedbackView.prototype.render.apply(this, arguments);\n                },\n                show: function() {\n                    SystemFeedbackView.prototype.show.apply(this, arguments);\n                    return this.inFocus();\n                },\n\n                hide: function() {\n                    SystemFeedbackView.prototype.hide.apply(this, arguments);\n                    return this.outFocus();\n                }\n            });\n\n            // create Prompt.Warning, Prompt.Confirmation, etc\n            var capitalCamel, intents;\n            capitalCamel = _.compose(str.capitalize, str.camelize);\n            intents = ['warning', 'error', 'confirmation', 'announcement', 'step-required', 'help', 'mini'];\n            _.each(intents, function(intent) {\n                var subclass;\n                subclass = Prompt.extend({\n                    options: $.extend({}, Prompt.prototype.options, {\n                        intent: intent\n                    })\n                });\n                Prompt[capitalCamel(intent)] = subclass;\n            });\n\n            return Prompt;\n        });\n\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/common/js/components/views/feedback_prompt.js","define([], function() {\n    'use strict';\n\n    return function invokePageFactory(name, factory) {\n        var args;\n\n        if (typeof window.pageFactoryArguments === 'undefined') {\n            throw Error(\n                'window.pageFactoryArguments must be initialized before calling invokePageFactory(' +\n                name +\n                '). Use the <%static:invoke_page_bundle> template tag.'\n            );\n        }\n        args = window.pageFactoryArguments[name];\n\n        if (typeof args === 'undefined') {\n            throw Error(\n                'window.pageFactoryArguments[\"' +\n                name +\n                '\"] must be initialized before calling invokePageFactory(' +\n                name +\n                '). Use the <%static:invoke_page_bundle> template tag.'\n            );\n        }\n        factory.apply(null, window.pageFactoryArguments[name]);\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/common/js/utils/page_factory.js","/*\n\n============================================\nLicense for Application\n============================================\n\nThis license is governed by United States copyright law, and with respect to matters\nof tort, contract, and other causes of action it is governed by North Carolina law,\nwithout regard to North Carolina choice of law provisions.  The forum for any dispute\nresolution shall be in Wake County, North Carolina.\n\nRedistribution and use in source and binary forms, with or without modification, are\npermitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this list\n   of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice, this\n   list of conditions and the following disclaimer in the documentation and/or other\n   materials provided with the distribution.\n\n3. The name of the author may not be used to endorse or promote products derived from\n   this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE AUTHOR \"AS IS\" AND ANY EXPRESS OR IMPLIED\nWARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE\nLIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\nNEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\nADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n*/\n\nvar $focusedElementBeforeModal,\n    focusableElementsString = 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]';\n\nvar reassignTabIndexesAndAriaHidden = function(focusableElementsFilterString, closeButtonId, modalId, mainPageId) {\n    // Sets appropriate elements to tab indexable and properly sets aria_hidden on content outside of modal\n    // \"focusableElementsFilterString\" is a string that indicates all elements that should be focusable\n    // \"closeButtonId\" is the selector for the button that closes out the modal.\n    // \"modalId\" is the selector for the modal being managed\n    // \"mainPageId\" is the selector for the main part of the page\n    // Returns a list of focusableItems\n    var focusableItems;\n\n    $(mainPageId).attr('aria-hidden', 'true');\n    $(modalId).attr('aria-hidden', 'false');\n\n    focusableItems = $(modalId).find('*')\n        .filter(focusableElementsFilterString)\n        .filter(':visible');\n\n    focusableItems.attr('tabindex', '2');\n    $(closeButtonId).attr('tabindex', '1').focus();\n\n    return focusableItems;\n};\n\nvar trapTabFocus = function(focusableItems, closeButtonId) {\n    // Determines last element in modal and traps focus by causing tab\n    // to focus on the first modal element (close button)\n    // \"focusableItems\" all elements in the modal that are focusable\n    // \"closeButtonId\" is the selector for the button that closes out the modal.\n    // returns the last focusable element in the modal.\n    var $last;\n    if (focusableItems.length !== 0) {\n        $last = focusableItems.last();\n    } else {\n        $last = $(closeButtonId);\n    }\n\n    // tab on last element in modal returns to the first one\n    $last.on('keydown', function(e) {\n        var keyCode = e.keyCode || e.which;\n        // 9 is the js keycode for tab\n        if (!e.shiftKey && keyCode === 9) {\n            e.preventDefault();\n            $(closeButtonId).focus();\n        }\n    });\n\n    return $last;\n};\n\nvar trapShiftTabFocus = function($last, closeButtonId) {\n    $(closeButtonId).on('keydown', function(e) {\n        var keyCode = e.keyCode || e.which;\n        // 9 is the js keycode for tab\n        if (e.shiftKey && keyCode === 9) {\n            e.preventDefault();\n            $last.focus();\n        }\n    });\n};\n\nvar bindReturnFocusListener = function($previouslyFocusedElement, closeButtonId, modalId, mainPageId) {\n    // Ensures that on modal close, focus is returned to the element\n    // that had focus before the modal was opened.\n    $('#lean_overlay, ' + closeButtonId).click(function() {\n        $(mainPageId).attr('aria-hidden', 'false');\n        $(modalId).attr('aria-hidden', 'true');\n        $previouslyFocusedElement.focus();\n    });\n};\n\nvar bindEscapeKeyListener = function(modalId, closeButtonId) {\n    $(modalId).on('keydown', function(e) {\n        var keyCode = e.keyCode || e.which;\n        // 27 is the javascript keycode for the ESC key\n        if (keyCode === 27) {\n            e.preventDefault();\n            $(closeButtonId).click();\n        }\n    });\n};\n\nvar trapFocusForAccessibleModal = function(\n    $previouslyFocusedElement,\n    focusableElementsFilterString,\n    closeButtonId,\n    modalId,\n    mainPageId) {\n    // Re assess the page for which items internal to the modal should be focusable,\n    // Should be called after the content of the accessible_modal is changed in order\n    // to ensure that the correct elements are accessible.\n    var focusableItems, $last;\n    focusableItems = reassignTabIndexesAndAriaHidden(\n      focusableElementsFilterString,\n      closeButtonId,\n      modalId,\n      mainPageId\n    );\n    $last = trapTabFocus(focusableItems, closeButtonId);\n    trapShiftTabFocus($last, closeButtonId);\n    bindReturnFocusListener($previouslyFocusedElement, closeButtonId, modalId, mainPageId);\n    bindEscapeKeyListener(modalId, closeButtonId);\n};\n\nvar accessible_modal = function(trigger, closeButtonId, modalId, mainPageId) {\n  // Modifies a lean modal to optimize focus management.\n  // \"trigger\" is the selector for the link element that triggers the modal.\n  // \"closeButtonId\" is the selector for the button that closes out the modal.\n  // \"modalId\" is the selector for the modal being managed\n  // \"mainPageId\" is the selector for the main part of the page\n  //\n  // based on http://accessibility.oit.ncsu.edu/training/aria/modal-window/modal-window.js\n  //\n  // see http://accessibility.oit.ncsu.edu/blog/2013/09/13/the-incredible-accessible-modal-dialog/\n  // for more information on managing modals\n  //\n    var initialFocus\n    $(trigger).click(function() {\n        $focusedElementBeforeModal = $(trigger);\n\n        trapFocusForAccessibleModal(\n            $focusedElementBeforeModal,\n            focusableElementsString,\n            closeButtonId,\n            modalId,\n            mainPageId\n        );\n\n        // In IE, focus shifts to iframes when they load.\n        // These lines ensure that focus is shifted back to the close button\n        // in the case that a modal that contains an iframe is opened in IE.\n        // see http://stackoverflow.com/questions/15792620/\n        initialFocus = true;\n        $(modalId).find('iframe').on('focus', function() {\n            if (initialFocus) {\n                $(closeButtonId).focus();\n                initialFocus = false;\n            }\n        });\n    });\n};\n\n// NOTE: This is a gross hack to make the skip links work for Webkit browsers\n// see http://stackoverflow.com/questions/6280399/skip-links-not-working-in-chrome/12720183#12720183\n\n// handle things properly for clicks\n$('.nav-skip').click(function() {\n    var href = $(this).attr('href');\n    if (href) {\n        $(href).attr('tabIndex', -1).focus();\n    }\n});\n// and for the enter key\n$('.nav-skip').keypress(function(e) {\n    var href;\n    if (e.which === 13) {\n        href = $(this).attr('href');\n        if (href) {\n            $(href).attr('tabIndex', -1).focus();\n        }\n    }\n});\n\n// Creates a window level SR object that can be used for giving audible feedback to screen readers.\n$(function() {\n    var SRAlert;\n\n    SRAlert = (function() {\n        function SRAlert() {\n            // This initialization sometimes gets done twice, so take to only create a single reader-feedback div.\n            var readerFeedbackID = 'reader-feedback',\n                $readerFeedbackSelector = $('#' + readerFeedbackID);\n\n            if ($readerFeedbackSelector.length === 0) {\n                edx.HtmlUtils.append(\n                    $('body'),\n                    edx.HtmlUtils.interpolateHtml(\n                        edx.HtmlUtils.HTML('<div id=\"{readerFeedbackID}\" class=\"sr\" aria-live=\"polite\"></div>'),\n                        {readerFeedbackID: readerFeedbackID}\n                    )\n                );\n            }\n            this.el = $('#' + readerFeedbackID);\n        }\n\n        SRAlert.prototype.clear = function() {\n            edx.HtmlUtils.setHtml(this.el, '');\n        };\n\n        SRAlert.prototype.readElts = function(elts) {\n            var texts = [];\n            $.each(elts, function(idx, value) {\n                texts.push($(value).html());\n            });\n            return this.readTexts(texts);\n        };\n\n        SRAlert.prototype.readText = function(text) {\n            return this.readTexts([text]);\n        };\n\n        SRAlert.prototype.readTexts = function(texts) {\n            var htmlFeedback = edx.HtmlUtils.HTML('');\n            $.each(texts, function(idx, value) {\n                htmlFeedback = edx.HtmlUtils.interpolateHtml(\n                    edx.HtmlUtils.HTML('{previous_feedback}<p>{value}</p>\\n'),\n                    // \"value\" may be HTML, if an element is being passed\n                    {previous_feedback: htmlFeedback, value: edx.HtmlUtils.HTML(value)}\n                );\n            });\n            edx.HtmlUtils.setHtml(this.el, htmlFeedback);\n        };\n\n        return SRAlert;\n    }());\n\n    window.SR = new SRAlert();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/src/accessibility_tools.js","/*\n * This file is used for keeping compatibility with Internet Explorer.\n * As starting with IE10, the conditional comments are not supported, this file\n * will always be loaded whether the browser is IE or not. Therefore, the code\n * here should not make any assumption and should always detect the execution\n * conditions itself.\n */\n\n// Shim name: Create the attribute of 'window.location.origin'\n// IE version: 11 or earlier, 12 or later not tested\n// Internet Explorer does not have built-in property 'window.location.origin',\n// we need to create one here as some vendor code such as TinyMCE uses this.\nif (!window.location.origin) {\n    window.location.origin = window.location.protocol + '//' + window.location.hostname\n                           + (window.location.port ? ':' + window.location.port : '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/src/ie_shim.js","var Language = (function() {\n    'use strict';\n    var $settings_language_selector,\n        self = null;\n    return {\n        init: function() {\n            $settings_language_selector = $('#settings-language-value');\n            self = this;\n            this.listenForLanguagePreferenceChange();\n        },\n\n            /**\n             * Listener on changing language from selector.\n             * Send an ajax request to save user language preferences.\n             */\n        listenForLanguagePreferenceChange: function() {\n            $settings_language_selector.change(function(event) {\n                var language = this.value,\n                    url = $('.url-endpoint').val(),\n                    is_user_authenticated = JSON.parse($('.url-endpoint').data('user-is-authenticated'));\n                event.preventDefault();\n                self.submitAjaxRequest(language, url, function() {\n                    if (is_user_authenticated) {\n                            // User language preference has been set successfully\n                            // Now submit the form in success callback.\n                        $('#language-settings-form').submit();\n                    } else {\n                        self.refresh();\n                    }\n                });\n            });\n        },\n\n            /**\n             * Send an ajax request to set user language preferences.\n             */\n        submitAjaxRequest: function(language, url, callback) {\n            $.ajax({\n                type: 'PATCH',\n                data: JSON.stringify({'pref-lang': language}),\n                url: url,\n                dataType: 'json',\n                contentType: 'application/merge-patch+json',\n                notifyOnError: false,\n                beforeSend: function(xhr) {\n                    xhr.setRequestHeader('X-CSRFToken', $.cookie('csrftoken'));\n                }\n            }).done(function() {\n                callback();\n            }).fail(function() {\n                self.refresh();\n            });\n        },\n\n            /**\n             * refresh the page.\n             */\n        refresh: function() {\n                // reloading the page so we can get the latest state of released languages from model\n            location.reload();\n        }\n\n    };\n}());\n$(document).ready(function() {\n    'use strict';\n    Language.init();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/src/lang_edx.js","(function() {\n    'use strict';\n    var Logger = (function() {\n        // listeners[event_type][element] -> list of callbacks\n        var listeners = {},\n            sendRequest, has;\n\n        sendRequest = function(data, options) {\n            var request = $.ajaxWithPrefix ? $.ajaxWithPrefix : $.ajax;\n\n            options = $.extend(true, {\n                url: '/event',\n                type: 'POST',\n                data: data,\n                async: true\n            }, options);\n            return request(options);\n        };\n\n        has = function(object, propertyName) {\n            return {}.hasOwnProperty.call(object, propertyName);\n        };\n\n        return {\n            /**\n             * Emits an event.\n             *\n             * Note that this method is used by external XBlocks, and the API cannot change without\n             * proper deprecation and notification for external authors.\n             */\n            log: function(eventType, data, element, requestOptions) {\n                var callbacks;\n\n                if (!element) {\n                    // null element in the listener dictionary means any element will do.\n                    // null element in the Logger.log call means we don't know the element name.\n                    element = null;\n                }\n                // Check to see if we're listening for the event type.\n                if (has(listeners, eventType)) {\n                    if (has(listeners[eventType], element)) {\n                        // Make the callbacks.\n                        callbacks = listeners[eventType][element];\n                        $.each(callbacks, function(index, callback) {\n                            try {\n                                callback(eventType, data, element);\n                            } catch (err) {\n                                console.error({\n                                    eventType: eventType,\n                                    data: data,\n                                    element: element,\n                                    error: err\n                                });\n                            }\n                        });\n                    }\n                }\n                // Regardless of whether any callbacks were made, log this event.\n                return sendRequest({\n                    event_type: eventType,\n                    event: JSON.stringify(data),\n                    page: window.location.href\n                }, requestOptions);\n            },\n\n            /**\n             * Adds a listener. If you want any element to trigger this listener,\n             * do element = null.\n             *\n             * Note that this method is used by external XBlocks, and the API cannot change without\n             * proper deprecation and notification for external authors.\n             */\n            listen: function(eventType, element, callback) {\n                listeners[eventType] = listeners[eventType] || {};\n                listeners[eventType][element] = listeners[eventType][element] || [];\n                listeners[eventType][element].push(callback);\n            },\n\n            /**\n             * Binds `page_close` event.\n             *\n             * Note that this method is used by external XBlocks, and the API cannot change without\n             * proper deprecation and notification for external authors.\n             */\n            bind: function() {\n                window.onunload = function() {\n                    sendRequest({\n                        event_type: 'page_close',\n                        event: '',\n                        page: window.location.href\n                    }, {type: 'GET', async: false});\n                };\n            }\n        };\n    }());\n\n    this.Logger = Logger;\n    // log_event exists for compatibility reasons and will soon be deprecated.\n    this.log_event = Logger.log;\n}).call(this);\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/src/logger.js","(function() {\n    'use strict';\n    var TooltipManager = function(element) {\n        this.element = $(element);\n        // If tooltip container already exist, use it.\n        this.tooltip = $('div.' + this.className.split(/\\s+/).join('.'));\n        // Otherwise, create new one.\n        if (!this.tooltip.length) {\n            this.tooltip = $('<div />', {\n                class: this.className\n            }).appendTo(this.element);\n        }\n\n        this.hide();\n        _.bindAll(this, 'show', 'hide', 'showTooltip', 'moveTooltip', 'hideTooltip', 'click');\n        this.bindEvents();\n    };\n\n    TooltipManager.prototype = {\n        // Space separated list of class names for the tooltip container.\n        className: 'tooltip',\n        SELECTOR: '[data-tooltip]',\n\n        bindEvents: function() {\n            this.element.on({\n                'mouseover.TooltipManager': this.showTooltip,\n                'mousemove.TooltipManager': this.moveTooltip,\n                'mouseout.TooltipManager': this.hideTooltip,\n                'click.TooltipManager': this.click\n            }, this.SELECTOR);\n        },\n\n        getCoords: function(pageX, pageY) {\n            return {\n                left: pageX - 0.5 * this.tooltip.outerWidth(),\n                top: pageY - (this.tooltip.outerHeight() + 15)\n            };\n        },\n\n        show: function() {\n            this.tooltip.show().css('opacity', 1);\n        },\n\n        hide: function() {\n            this.tooltip.hide().css('opacity', 0);\n        },\n\n        showTooltip: function(event) {\n            this.prepareTooltip(event.currentTarget, event.pageX, event.pageY);\n            if (this.tooltipTimer) {\n                clearTimeout(this.tooltipTimer);\n            }\n            this.tooltipTimer = setTimeout(this.show, 500);\n        },\n\n        prepareTooltip: function(element, pageX, pageY) {\n            pageX = typeof pageX !== 'undefined' ? pageX : element.offset().left + element.width() / 2;\n            pageY = typeof pageY !== 'undefined' ? pageY : element.offset().top + element.height() / 2;\n            var tooltipText = $(element).attr('data-tooltip');\n            this.tooltip\n                .html(tooltipText)\n                .css(this.getCoords(pageX, pageY));\n        },\n\n        // To manually trigger a tooltip to reveal, other than through user mouse movement:\n        openTooltip: function(element) {\n            this.prepareTooltip(element);\n            this.show();\n            if (this.tooltipTimer) {\n                clearTimeout(this.tooltipTimer);\n            }\n        },\n\n        moveTooltip: function(event) {\n            this.tooltip.css(this.getCoords(event.pageX, event.pageY));\n        },\n\n        hideTooltip: function() {\n            clearTimeout(this.tooltipTimer);\n            // Wait for a 50ms before hiding the tooltip to avoid blinking when\n            // the item contains nested elements.\n            this.tooltipTimer = setTimeout(this.hide, 50);\n        },\n\n        click: function(event) {\n            var showOnClick = !!$(event.currentTarget).data('tooltip-show-on-click'); // Default is false\n            if (showOnClick) {\n                this.show();\n                if (this.tooltipTimer) {\n                    clearTimeout(this.tooltipTimer);\n                }\n            } else {\n                this.hideTooltip(event);\n            }\n        },\n\n        destroy: function() {\n            this.tooltip.remove();\n            // Unbind all delegated event handlers in the \".TooltipManager\"\n            // namespace.\n            this.element.off('.TooltipManager', this.SELECTOR);\n        }\n    };\n\n    window.TooltipManager = TooltipManager;\n    $(document).ready(function() {\n        window.globalTooltipManager = new TooltipManager(document.body);\n    });\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/src/tooltip_manager.js","/**\n * @version: 1.0 Alpha-1\n * @author: Coolite Inc. http://www.coolite.com/\n * @date: 2008-05-13\n * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.\n * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/.\n * @website: http://www.datejs.com/\n */\nDate.CultureInfo={name:\"en-US\",englishName:\"English (United States)\",nativeName:\"English (United States)\",dayNames:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],abbreviatedDayNames:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],shortestDayNames:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"],firstLetterDayNames:[\"S\",\"M\",\"T\",\"W\",\"T\",\"F\",\"S\"],monthNames:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],abbreviatedMonthNames:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],amDesignator:\"AM\",pmDesignator:\"PM\",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:\"mdy\",formatPatterns:{shortDate:\"M/d/yyyy\",longDate:\"dddd, MMMM dd, yyyy\",shortTime:\"h:mm tt\",longTime:\"h:mm:ss tt\",fullDateTime:\"dddd, MMMM dd, yyyy h:mm:ss tt\",sortableDateTime:\"yyyy-MM-ddTHH:mm:ss\",universalSortableDateTime:\"yyyy-MM-dd HH:mm:ssZ\",rfc1123:\"ddd, dd MMM yyyy HH:mm:ss GMT\",monthDay:\"MMMM dd\",yearMonth:\"MMMM, yyyy\"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\\+|aft(er)?|from|hence)/i,subtract:/^(\\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\\.?m?\\.?|p\\.?m?\\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\\s*(\\+|\\-)\\s*\\d\\d\\d\\d?)|gmt|utc)/i,ordinalSuffix:/^\\s*(st|nd|rd|th)/i,timeContext:/^\\s*(\\:|a(?!u|p)|p)/i},timezones:[{name:\"UTC\",offset:\"-000\"},{name:\"GMT\",offset:\"-000\"},{name:\"EST\",offset:\"-0500\"},{name:\"EDT\",offset:\"-0400\"},{name:\"CST\",offset:\"-0600\"},{name:\"CDT\",offset:\"-0500\"},{name:\"MST\",offset:\"-0700\"},{name:\"MDT\",offset:\"-0600\"},{name:\"PST\",offset:\"-0800\"},{name:\"PDT\",offset:\"-0700\"}]};\n(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,p=function(s,l){if(!l){l=2;}\nreturn(\"000\"+s).slice(l*-1);};$P.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};$P.setTimeToNow=function(){var n=new Date();this.setHours(n.getHours());this.setMinutes(n.getMinutes());this.setSeconds(n.getSeconds());this.setMilliseconds(n.getMilliseconds());return this;};$D.today=function(){return new Date().clearTime();};$D.compare=function(date1,date2){if(isNaN(date1)||isNaN(date2)){throw new Error(date1+\" - \"+date2);}else if(date1 instanceof Date&&date2 instanceof Date){return(date1<date2)?-1:(date1>date2)?1:0;}else{throw new TypeError(date1+\" - \"+date2);}};$D.equals=function(date1,date2){return(date1.compareTo(date2)===0);};$D.getDayNumberFromName=function(name){var n=$C.dayNames,m=$C.abbreviatedDayNames,o=$C.shortestDayNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s||o[i].toLowerCase()==s){return i;}}\nreturn-1;};$D.getMonthNumberFromName=function(name){var n=$C.monthNames,m=$C.abbreviatedMonthNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s){return i;}}\nreturn-1;};$D.isLeapYear=function(year){return((year%4===0&&year%100!==0)||year%400===0);};$D.getDaysInMonth=function(year,month){return[31,($D.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month];};$D.getTimezoneAbbreviation=function(offset){var z=$C.timezones,p;for(var i=0;i<z.length;i++){if(z[i].offset===offset){return z[i].name;}}\nreturn null;};$D.getTimezoneOffset=function(name){var z=$C.timezones,p;for(var i=0;i<z.length;i++){if(z[i].name===name.toUpperCase()){return z[i].offset;}}\nreturn null;};$P.clone=function(){return new Date(this.getTime());};$P.compareTo=function(date){return Date.compare(this,date);};$P.equals=function(date){return Date.equals(this,date||new Date());};$P.between=function(start,end){return this.getTime()>=start.getTime()&&this.getTime()<=end.getTime();};$P.isAfter=function(date){return this.compareTo(date||new Date())===1;};$P.isBefore=function(date){return(this.compareTo(date||new Date())===-1);};$P.isToday=function(){return this.isSameDay(new Date());};$P.isSameDay=function(date){return this.clone().clearTime().equals(date.clone().clearTime());};$P.addMilliseconds=function(value){this.setMilliseconds(this.getMilliseconds()+value);return this;};$P.addSeconds=function(value){return this.addMilliseconds(value*1000);};$P.addMinutes=function(value){return this.addMilliseconds(value*60000);};$P.addHours=function(value){return this.addMilliseconds(value*3600000);};$P.addDays=function(value){this.setDate(this.getDate()+value);return this;};$P.addWeeks=function(value){return this.addDays(value*7);};$P.addMonths=function(value){var n=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+value);this.setDate(Math.min(n,$D.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};$P.addYears=function(value){return this.addMonths(value*12);};$P.add=function(config){if(typeof config==\"number\"){this._orient=config;return this;}\nvar x=config;if(x.milliseconds){this.addMilliseconds(x.milliseconds);}\nif(x.seconds){this.addSeconds(x.seconds);}\nif(x.minutes){this.addMinutes(x.minutes);}\nif(x.hours){this.addHours(x.hours);}\nif(x.weeks){this.addWeeks(x.weeks);}\nif(x.months){this.addMonths(x.months);}\nif(x.years){this.addYears(x.years);}\nif(x.days){this.addDays(x.days);}\nreturn this;};var $y,$m,$d;$P.getWeek=function(){var a,b,c,d,e,f,g,n,s,w;$y=(!$y)?this.getFullYear():$y;$m=(!$m)?this.getMonth()+1:$m;$d=(!$d)?this.getDate():$d;if($m<=2){a=$y-1;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=0;f=$d-1+(31*($m-1));}else{a=$y;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=s+1;f=$d+((153*($m-3)+2)/5)+58+s;}\ng=(a+b)%7;d=(f+g-e)%7;n=(f+3-d)|0;if(n<0){w=53-((g-s)/5|0);}else if(n>364+s){w=1;}else{w=(n/7|0)+1;}\n$y=$m=$d=null;return w;};$P.getISOWeek=function(){$y=this.getUTCFullYear();$m=this.getUTCMonth()+1;$d=this.getUTCDate();return p(this.getWeek());};$P.setWeek=function(n){return this.moveToDayOfWeek(1).addWeeks(n-this.getWeek());};$D._validate=function(n,min,max,name){if(typeof n==\"undefined\"){return false;}else if(typeof n!=\"number\"){throw new TypeError(n+\" is not a Number.\");}else if(n<min||n>max){throw new RangeError(n+\" is not a valid value for \"+name+\".\");}\nreturn true;};$D.validateMillisecond=function(value){return $D._validate(value,0,999,\"millisecond\");};$D.validateSecond=function(value){return $D._validate(value,0,59,\"second\");};$D.validateMinute=function(value){return $D._validate(value,0,59,\"minute\");};$D.validateHour=function(value){return $D._validate(value,0,23,\"hour\");};$D.validateDay=function(value,year,month){return $D._validate(value,1,$D.getDaysInMonth(year,month),\"day\");};$D.validateMonth=function(value){return $D._validate(value,0,11,\"month\");};$D.validateYear=function(value){return $D._validate(value,0,9999,\"year\");};$P.set=function(config){if($D.validateMillisecond(config.millisecond)){this.addMilliseconds(config.millisecond-this.getMilliseconds());}\nif($D.validateSecond(config.second)){this.addSeconds(config.second-this.getSeconds());}\nif($D.validateMinute(config.minute)){this.addMinutes(config.minute-this.getMinutes());}\nif($D.validateHour(config.hour)){this.addHours(config.hour-this.getHours());}\nif($D.validateMonth(config.month)){this.addMonths(config.month-this.getMonth());}\nif($D.validateYear(config.year)){this.addYears(config.year-this.getFullYear());}\nif($D.validateDay(config.day,this.getFullYear(),this.getMonth())){this.addDays(config.day-this.getDate());}\nif(config.timezone){this.setTimezone(config.timezone);}\nif(config.timezoneOffset){this.setTimezoneOffset(config.timezoneOffset);}\nif(config.week&&$D._validate(config.week,0,53,\"week\")){this.setWeek(config.week);}\nreturn this;};$P.moveToFirstDayOfMonth=function(){return this.set({day:1});};$P.moveToLastDayOfMonth=function(){return this.set({day:$D.getDaysInMonth(this.getFullYear(),this.getMonth())});};$P.moveToNthOccurrence=function(dayOfWeek,occurrence){var shift=0;if(occurrence>0){shift=occurrence-1;}\nelse if(occurrence===-1){this.moveToLastDayOfMonth();if(this.getDay()!==dayOfWeek){this.moveToDayOfWeek(dayOfWeek,-1);}\nreturn this;}\nreturn this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(dayOfWeek,+1).addWeeks(shift);};$P.moveToDayOfWeek=function(dayOfWeek,orient){var diff=(dayOfWeek-this.getDay()+7*(orient||+1))%7;return this.addDays((diff===0)?diff+=7*(orient||+1):diff);};$P.moveToMonth=function(month,orient){var diff=(month-this.getMonth()+12*(orient||+1))%12;return this.addMonths((diff===0)?diff+=12*(orient||+1):diff);};$P.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};$P.getTimezone=function(){return $D.getTimezoneAbbreviation(this.getUTCOffset());};$P.setTimezoneOffset=function(offset){var here=this.getTimezoneOffset(),there=Number(offset)*-6/10;return this.addMinutes(there-here);};$P.setTimezone=function(offset){return this.setTimezoneOffset($D.getTimezoneOffset(offset));};$P.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};$P.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset());};$P.getUTCOffset=function(){var n=this.getTimezoneOffset()*-10/6,r;if(n<0){r=(n-10000).toString();return r.charAt(0)+r.substr(2);}else{r=(n+10000).toString();return\"+\"+r.substr(1);}};$P.getElapsed=function(date){return(date||new Date())-this;};if(!$P.toISOString){$P.toISOString=function(){function f(n){return n<10?'0'+n:n;}\nreturn'\"'+this.getUTCFullYear()+'-'+\nf(this.getUTCMonth()+1)+'-'+\nf(this.getUTCDate())+'T'+\nf(this.getUTCHours())+':'+\nf(this.getUTCMinutes())+':'+\nf(this.getUTCSeconds())+'Z\"';};}\nif(typeof $P._toString === 'undefined'){$P._toString=$P.toString;}$P.toString=function(format){var x=this;if(format&&format.length==1){var c=$C.formatPatterns;x.t=x.toString;switch(format){case\"d\":return x.t(c.shortDate);case\"D\":return x.t(c.longDate);case\"F\":return x.t(c.fullDateTime);case\"m\":return x.t(c.monthDay);case\"r\":return x.t(c.rfc1123);case\"s\":return x.t(c.sortableDateTime);case\"t\":return x.t(c.shortTime);case\"T\":return x.t(c.longTime);case\"u\":return x.t(c.universalSortableDateTime);case\"y\":return x.t(c.yearMonth);}}\nvar ord=function(n){switch(n*1){case 1:case 21:case 31:return\"st\";case 2:case 22:return\"nd\";case 3:case 23:return\"rd\";default:return\"th\";}};return format?format.replace(/(\\\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(m){if(m.charAt(0)===\"\\\\\"){return m.replace(\"\\\\\",\"\");}\nx.h=x.getHours;switch(m){case\"hh\":return p(x.h()<13?(x.h()===0?12:x.h()):(x.h()-12));case\"h\":return x.h()<13?(x.h()===0?12:x.h()):(x.h()-12);case\"HH\":return p(x.h());case\"H\":return x.h();case\"mm\":return p(x.getMinutes());case\"m\":return x.getMinutes();case\"ss\":return p(x.getSeconds());case\"s\":return x.getSeconds();case\"yyyy\":return p(x.getFullYear(),4);case\"yy\":return p(x.getFullYear());case\"dddd\":return $C.dayNames[x.getDay()];case\"ddd\":return $C.abbreviatedDayNames[x.getDay()];case\"dd\":return p(x.getDate());case\"d\":return x.getDate();case\"MMMM\":return $C.monthNames[x.getMonth()];case\"MMM\":return $C.abbreviatedMonthNames[x.getMonth()];case\"MM\":return p((x.getMonth()+1));case\"M\":return x.getMonth()+1;case\"t\":return x.h()<12?$C.amDesignator.substring(0,1):$C.pmDesignator.substring(0,1);case\"tt\":return x.h()<12?$C.amDesignator:$C.pmDesignator;case\"S\":return ord(x.getDate());default:return m;}}):this._toString();};}());\n(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,$N=Number.prototype;$P._orient=+1;$P._nth=null;$P._is=false;$P._same=false;$P._isSecond=false;$N._dateElement=\"day\";$P.next=function(){this._orient=+1;return this;};$D.next=function(){return $D.today().next();};$P.last=$P.prev=$P.previous=function(){this._orient=-1;return this;};$D.last=$D.prev=$D.previous=function(){return $D.today().last();};$P.is=function(){this._is=true;return this;};$P.same=function(){this._same=true;this._isSecond=false;return this;};$P.today=function(){return this.same().day();};$P.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun());}\nreturn false;};$P.at=function(time){return(typeof time===\"string\")?$D.parse(this.toString(\"d\")+\" \"+time):this.set(time);};$N.fromNow=$N.after=function(date){var c={};c[this._dateElement]=this;return((!date)?new Date():date.clone()).add(c);};$N.ago=$N.before=function(date){var c={};c[this._dateElement]=this*-1;return((!date)?new Date():date.clone()).add(c);};var dx=(\"sunday monday tuesday wednesday thursday friday saturday\").split(/\\s/),mx=(\"january february march april may june july august september october november december\").split(/\\s/),px=(\"Millisecond Second Minute Hour Day Week Month Year\").split(/\\s/),pxf=(\"Milliseconds Seconds Minutes Hours Date Week Month FullYear\").split(/\\s/),nth=(\"final first second third fourth fifth\").split(/\\s/),de;$P.toObject=function(){var o={};for(var i=0;i<px.length;i++){o[px[i].toLowerCase()]=this[\"get\"+pxf[i]]();}\nreturn o;};$D.fromObject=function(config){config.week=null;return Date.today().set(config);};var df=function(n){return function(){if(this._is){this._is=false;return this.getDay()==n;}\nif(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1);}\nthis._isSecond=false;var ntemp=this._nth;this._nth=null;var temp=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(n,ntemp);if(this>temp){throw new RangeError($D.getDayName(n)+\" does not occur \"+ntemp+\" times in the month of \"+$D.getMonthName(temp.getMonth())+\" \"+temp.getFullYear()+\".\");}\nreturn this;}\nreturn this.moveToDayOfWeek(n,this._orient);};};var sdf=function(n){return function(){var t=$D.today(),shift=n-t.getDay();if(n===0&&$C.firstDayOfWeek===1&&t.getDay()!==0){shift=shift+7;}\nreturn t.addDays(shift);};};for(var i=0;i<dx.length;i++){$D[dx[i].toUpperCase()]=$D[dx[i].toUpperCase().substring(0,3)]=i;$D[dx[i]]=$D[dx[i].substring(0,3)]=sdf(i);$P[dx[i]]=$P[dx[i].substring(0,3)]=df(i);}\nvar mf=function(n){return function(){if(this._is){this._is=false;return this.getMonth()===n;}\nreturn this.moveToMonth(n,this._orient);};};var smf=function(n){return function(){return $D.today().set({month:n,day:1});};};for(var j=0;j<mx.length;j++){$D[mx[j].toUpperCase()]=$D[mx[j].toUpperCase().substring(0,3)]=j;$D[mx[j]]=$D[mx[j].substring(0,3)]=smf(j);$P[mx[j]]=$P[mx[j].substring(0,3)]=mf(j);}\nvar ef=function(j){return function(){if(this._isSecond){this._isSecond=false;return this;}\nif(this._same){this._same=this._is=false;var o1=this.toObject(),o2=(arguments[0]||new Date()).toObject(),v=\"\",k=j.toLowerCase();for(var m=(px.length-1);m>-1;m--){v=px[m].toLowerCase();if(o1[v]!=o2[v]){return false;}\nif(k==v){break;}}\nreturn true;}\nif(j.substring(j.length-1)!=\"s\"){j+=\"s\";}\nreturn this[\"add\"+j](this._orient);};};var nf=function(n){return function(){this._dateElement=n;return this;};};for(var k=0;k<px.length;k++){de=px[k].toLowerCase();$P[de]=$P[de+\"s\"]=ef(px[k]);$N[de]=$N[de+\"s\"]=nf(de);}\n$P._ss=ef(\"Second\");var nthfn=function(n){return function(dayOfWeek){if(this._same){return this._ss(arguments[0]);}\nif(dayOfWeek||dayOfWeek===0){return this.moveToNthOccurrence(dayOfWeek,n);}\nthis._nth=n;if(n===2&&(dayOfWeek===undefined||dayOfWeek===null)){this._isSecond=true;return this.addSeconds(this._orient);}\nreturn this;};};for(var l=0;l<nth.length;l++){$P[nth[l]]=(l===0)?nthfn(-1):nthfn(l);}}());\n(function(){Date.Parsing={Exception:function(s){this.message=\"Parse error at '\"+s.substring(0,10)+\" ...'\";}};var $P=Date.Parsing;var _=$P.Operators={rtoken:function(r){return function(s){var mx=s.match(r);if(mx){return([mx[0],s.substring(mx[0].length)]);}else{throw new $P.Exception(s);}};},token:function(s){return function(s){return _.rtoken(new RegExp(\"^\\s*\"+s+\"\\s*\"))(s);};},stoken:function(s){return _.rtoken(new RegExp(\"^\"+s));},until:function(p){return function(s){var qx=[],rx=null;while(s.length){try{rx=p.call(this,s);}catch(e){qx.push(rx[0]);s=rx[1];continue;}\nbreak;}\nreturn[qx,s];};},many:function(p){return function(s){var rx=[],r=null;while(s.length){try{r=p.call(this,s);}catch(e){return[rx,s];}\nrx.push(r[0]);s=r[1];}\nreturn[rx,s];};},optional:function(p){return function(s){var r=null;try{r=p.call(this,s);}catch(e){return[null,s];}\nreturn[r[0],r[1]];};},not:function(p){return function(s){try{p.call(this,s);}catch(e){return[null,s];}\nthrow new $P.Exception(s);};},ignore:function(p){return p?function(s){var r=null;r=p.call(this,s);return[null,r[1]];}:null;},product:function(){var px=arguments[0],qx=Array.prototype.slice.call(arguments,1),rx=[];for(var i=0;i<px.length;i++){rx.push(_.each(px[i],qx));}\nreturn rx;},cache:function(rule){var cache={},r=null;return function(s){try{r=cache[s]=(cache[s]||rule.call(this,s));}catch(e){r=cache[s]=e;}\nif(r instanceof $P.Exception){throw r;}else{return r;}};},any:function(){var px=arguments;return function(s){var r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}\ntry{r=(px[i].call(this,s));}catch(e){r=null;}\nif(r){return r;}}\nthrow new $P.Exception(s);};},each:function(){var px=arguments;return function(s){var rx=[],r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}\ntry{r=(px[i].call(this,s));}catch(e){throw new $P.Exception(s);}\nrx.push(r[0]);s=r[1];}\nreturn[rx,s];};},all:function(){var px=arguments,_=_;return _.each(_.optional(px));},sequence:function(px,d,c){d=d||_.rtoken(/^\\s*/);c=c||null;if(px.length==1){return px[0];}\nreturn function(s){var r=null,q=null;var rx=[];for(var i=0;i<px.length;i++){try{r=px[i].call(this,s);}catch(e){break;}\nrx.push(r[0]);try{q=d.call(this,r[1]);}catch(ex){q=null;break;}\ns=q[1];}\nif(!r){throw new $P.Exception(s);}\nif(q){throw new $P.Exception(q[1]);}\nif(c){try{r=c.call(this,r[1]);}catch(ey){throw new $P.Exception(r[1]);}}\nreturn[rx,(r?r[1]:s)];};},between:function(d1,p,d2){d2=d2||d1;var _fn=_.each(_.ignore(d1),p,_.ignore(d2));return function(s){var rx=_fn.call(this,s);return[[rx[0][0],r[0][2]],rx[1]];};},list:function(p,d,c){d=d||_.rtoken(/^\\s*/);c=c||null;return(p instanceof Array?_.each(_.product(p.slice(0,-1),_.ignore(d)),p.slice(-1),_.ignore(c)):_.each(_.many(_.each(p,_.ignore(d))),px,_.ignore(c)));},set:function(px,d,c){d=d||_.rtoken(/^\\s*/);c=c||null;return function(s){var r=null,p=null,q=null,rx=null,best=[[],s],last=false;for(var i=0;i<px.length;i++){q=null;p=null;r=null;last=(px.length==1);try{r=px[i].call(this,s);}catch(e){continue;}\nrx=[[r[0]],r[1]];if(r[1].length>0&&!last){try{q=d.call(this,r[1]);}catch(ex){last=true;}}else{last=true;}\nif(!last&&q[1].length===0){last=true;}\nif(!last){var qx=[];for(var j=0;j<px.length;j++){if(i!=j){qx.push(px[j]);}}\np=_.set(qx,d).call(this,q[1]);if(p[0].length>0){rx[0]=rx[0].concat(p[0]);rx[1]=p[1];}}\nif(rx[1].length<best[1].length){best=rx;}\nif(best[1].length===0){break;}}\nif(best[0].length===0){return best;}\nif(c){try{q=c.call(this,best[1]);}catch(ey){throw new $P.Exception(best[1]);}\nbest[1]=q[1];}\nreturn best;};},forward:function(gr,fname){return function(s){return gr[fname].call(this,s);};},replace:function(rule,repl){return function(s){var r=rule.call(this,s);return[repl,r[1]];};},process:function(rule,fn){return function(s){var r=rule.call(this,s);return[fn.call(this,r[0]),r[1]];};},min:function(min,rule){return function(s){var rx=rule.call(this,s);if(rx[0].length<min){throw new $P.Exception(s);}\nreturn rx;};}};var _generator=function(op){return function(){var args=null,rx=[];if(arguments.length>1){args=Array.prototype.slice.call(arguments);}else if(arguments[0]instanceof Array){args=arguments[0];}\nif(args){for(var i=0,px=args.shift();i<px.length;i++){args.unshift(px[i]);rx.push(op.apply(null,args));args.shift();return rx;}}else{return op.apply(null,arguments);}};};var gx=\"optional not ignore cache\".split(/\\s/);for(var i=0;i<gx.length;i++){_[gx[i]]=_generator(_[gx[i]]);}\nvar _vector=function(op){return function(){if(arguments[0]instanceof Array){return op.apply(null,arguments[0]);}else{return op.apply(null,arguments);}};};var vx=\"each any all\".split(/\\s/);for(var j=0;j<vx.length;j++){_[vx[j]]=_vector(_[vx[j]]);}}());(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo;var flattenAndCompact=function(ax){var rx=[];for(var i=0;i<ax.length;i++){if(ax[i]instanceof Array){rx=rx.concat(flattenAndCompact(ax[i]));}else{if(ax[i]){rx.push(ax[i]);}}}\nreturn rx;};$D.Grammar={};$D.Translator={hour:function(s){return function(){this.hour=Number(s);};},minute:function(s){return function(){this.minute=Number(s);};},second:function(s){return function(){this.second=Number(s);};},meridian:function(s){return function(){this.meridian=s.slice(0,1).toLowerCase();};},timezone:function(s){return function(){var n=s.replace(/[^\\d\\+\\-]/g,\"\");if(n.length){this.timezoneOffset=Number(n);}else{this.timezone=s.toLowerCase();}};},day:function(x){var s=x[0];return function(){this.day=Number(s.match(/\\d+/)[0]);};},month:function(s){return function(){this.month=(s.length==3)?\"jan feb mar apr may jun jul aug sep oct nov dec\".indexOf(s)/4:Number(s)-1;};},year:function(s){return function(){var n=Number(s);this.year=((s.length>2)?n:(n+(((n+2000)<$C.twoDigitYearMax)?2000:1900)));};},rday:function(s){return function(){switch(s){case\"yesterday\":this.days=-1;break;case\"tomorrow\":this.days=1;break;case\"today\":this.days=0;break;case\"now\":this.days=0;this.now=true;break;}};},finishExact:function(x){x=(x instanceof Array)?x:[x];for(var i=0;i<x.length;i++){if(x[i]){x[i].call(this);}}\nvar now=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=now.getDate();}\nif(!this.year){this.year=now.getFullYear();}\nif(!this.month&&this.month!==0){this.month=now.getMonth();}\nif(!this.day){this.day=1;}\nif(!this.hour){this.hour=0;}\nif(!this.minute){this.minute=0;}\nif(!this.second){this.second=0;}\nif(this.meridian&&this.hour){if(this.meridian==\"p\"&&this.hour<12){this.hour=this.hour+12;}else if(this.meridian==\"a\"&&this.hour==12){this.hour=0;}}\nif(this.day>$D.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+\" is not a valid value for days.\");}\nvar r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){r.set({timezone:this.timezone});}else if(this.timezoneOffset){r.set({timezoneOffset:this.timezoneOffset});}\nreturn r;},finish:function(x){x=(x instanceof Array)?flattenAndCompact(x):[x];if(x.length===0){return null;}\nfor(var i=0;i<x.length;i++){if(typeof x[i]==\"function\"){x[i].call(this);}}\nvar today=$D.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else if(this.now){today=new Date();}\nvar expression=!!(this.days&&this.days!==null||this.orient||this.operator);var gap,mod,orient;orient=((this.orient==\"past\"||this.operator==\"subtract\")?-1:1);if(!this.now&&\"hour minute second\".indexOf(this.unit)!=-1){today.setTimeToNow();}\nif(this.month||this.month===0){if(\"year day hour minute second\".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;expression=true;}}\nif(!expression&&this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate();if(!this.month){this.month=temp.getMonth();}\nthis.year=temp.getFullYear();}\nif(expression&&this.weekday&&this.unit!=\"month\"){this.unit=\"day\";gap=($D.getDayNumberFromName(this.weekday)-today.getDay());mod=7;this.days=gap?((gap+(orient*mod))%mod):(orient*mod);}\nif(this.month&&this.unit==\"day\"&&this.operator){this.value=(this.month+1);this.month=null;}\nif(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}\nif(this.month&&!this.day&&this.value){today.set({day:this.value*1});if(!expression){this.day=this.value*1;}}\nif(!this.month&&this.value&&this.unit==\"month\"&&!this.now){this.month=this.value;expression=true;}\nif(expression&&(this.month||this.month===0)&&this.unit!=\"year\"){this.unit=\"month\";gap=(this.month-today.getMonth());mod=12;this.months=gap?((gap+(orient*mod))%mod):(orient*mod);this.month=null;}\nif(!this.unit){this.unit=\"day\";}\nif(!this.value&&this.operator&&this.operator!==null&&this[this.unit+\"s\"]&&this[this.unit+\"s\"]!==null){this[this.unit+\"s\"]=this[this.unit+\"s\"]+((this.operator==\"add\")?1:-1)+(this.value||0)*orient;}else if(this[this.unit+\"s\"]==null||this.operator!=null){if(!this.value){this.value=1;}\nthis[this.unit+\"s\"]=this.value*orient;}\nif(this.meridian&&this.hour){if(this.meridian==\"p\"&&this.hour<12){this.hour=this.hour+12;}else if(this.meridian==\"a\"&&this.hour==12){this.hour=0;}}\nif(this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate();if(temp.getMonth()!==today.getMonth()){this.month=temp.getMonth();}}\nif((this.month||this.month===0)&&!this.day){this.day=1;}\nif(!this.orient&&!this.operator&&this.unit==\"week\"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}\nif(expression&&this.timezone&&this.day&&this.days){this.day=this.days;}\nreturn(expression)?today.add(this):today.set(this);}};var _=$D.Parsing.Operators,g=$D.Grammar,t=$D.Translator,_fn;g.datePartDelimiter=_.rtoken(/^([\\s\\-\\.\\,\\/\\x27]+)/);g.timePartDelimiter=_.stoken(\":\");g.whiteSpace=_.rtoken(/^\\s*/);g.generalDelimiter=_.rtoken(/^(([\\s\\,]|at|@|on)+)/);var _C={};g.ctoken=function(keys){var fn=_C[keys];if(!fn){var c=$C.regexPatterns;var kx=keys.split(/\\s+/),px=[];for(var i=0;i<kx.length;i++){px.push(_.replace(_.rtoken(c[kx[i]]),kx[i]));}\nfn=_C[keys]=_.any.apply(null,px);}\nreturn fn;};g.ctoken2=function(key){return _.rtoken($C.regexPatterns[key]);};g.h=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),t.hour));g.hh=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/),t.hour));g.H=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),t.hour));g.HH=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/),t.hour));g.m=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.minute));g.mm=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.minute));g.s=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.second));g.ss=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.second));g.hms=_.cache(_.sequence([g.H,g.m,g.s],g.timePartDelimiter));g.t=_.cache(_.process(g.ctoken2(\"shortMeridian\"),t.meridian));g.tt=_.cache(_.process(g.ctoken2(\"longMeridian\"),t.meridian));g.z=_.cache(_.process(_.rtoken(/^((\\+|\\-)\\s*\\d\\d\\d\\d)|((\\+|\\-)\\d\\d\\:?\\d\\d)/),t.timezone));g.zz=_.cache(_.process(_.rtoken(/^((\\+|\\-)\\s*\\d\\d\\d\\d)|((\\+|\\-)\\d\\d\\:?\\d\\d)/),t.timezone));g.zzz=_.cache(_.process(g.ctoken2(\"timezone\"),t.timezone));g.timeSuffix=_.each(_.ignore(g.whiteSpace),_.set([g.tt,g.zzz]));g.time=_.each(_.optional(_.ignore(_.stoken(\"T\"))),g.hms,g.timeSuffix);g.d=_.cache(_.process(_.each(_.rtoken(/^([0-2]\\d|3[0-1]|\\d)/),_.optional(g.ctoken2(\"ordinalSuffix\"))),t.day));g.dd=_.cache(_.process(_.each(_.rtoken(/^([0-2]\\d|3[0-1])/),_.optional(g.ctoken2(\"ordinalSuffix\"))),t.day));g.ddd=g.dddd=_.cache(_.process(g.ctoken(\"sun mon tue wed thu fri sat\"),function(s){return function(){this.weekday=s;};}));g.M=_.cache(_.process(_.rtoken(/^(1[0-2]|0\\d|\\d)/),t.month));g.MM=_.cache(_.process(_.rtoken(/^(1[0-2]|0\\d)/),t.month));g.MMM=g.MMMM=_.cache(_.process(g.ctoken(\"jan feb mar apr may jun jul aug sep oct nov dec\"),t.month));g.y=_.cache(_.process(_.rtoken(/^(\\d\\d?)/),t.year));g.yy=_.cache(_.process(_.rtoken(/^(\\d\\d)/),t.year));g.yyy=_.cache(_.process(_.rtoken(/^(\\d\\d?\\d?\\d?)/),t.year));g.yyyy=_.cache(_.process(_.rtoken(/^(\\d\\d\\d\\d)/),t.year));_fn=function(){return _.each(_.any.apply(null,arguments),_.not(g.ctoken2(\"timeContext\")));};g.day=_fn(g.d,g.dd);g.month=_fn(g.M,g.MMM);g.year=_fn(g.yyyy,g.yy);g.orientation=_.process(g.ctoken(\"past future\"),function(s){return function(){this.orient=s;};});g.operator=_.process(g.ctoken(\"add subtract\"),function(s){return function(){this.operator=s;};});g.rday=_.process(g.ctoken(\"yesterday tomorrow today now\"),t.rday);g.unit=_.process(g.ctoken(\"second minute hour day week month year\"),function(s){return function(){this.unit=s;};});g.value=_.process(_.rtoken(/^\\d\\d?(st|nd|rd|th)?/),function(s){return function(){this.value=s.replace(/\\D/g,\"\");};});g.expression=_.set([g.rday,g.operator,g.value,g.unit,g.orientation,g.ddd,g.MMM]);_fn=function(){return _.set(arguments,g.datePartDelimiter);};g.mdy=_fn(g.ddd,g.month,g.day,g.year);g.ymd=_fn(g.ddd,g.year,g.month,g.day);g.dmy=_fn(g.ddd,g.day,g.month,g.year);g.date=function(s){return((g[$C.dateElementOrder]||g.mdy).call(this,s));};g.format=_.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(fmt){if(g[fmt]){return g[fmt];}else{throw $D.Parsing.Exception(fmt);}}),_.process(_.rtoken(/^[^dMyhHmstz]+/),function(s){return _.ignore(_.stoken(s));}))),function(rules){return _.process(_.each.apply(null,rules),t.finishExact);});var _F={};var _get=function(f){return _F[f]=(_F[f]||g.format(f)[0]);};g.formats=function(fx){if(fx instanceof Array){var rx=[];for(var i=0;i<fx.length;i++){rx.push(_get(fx[i]));}\nreturn _.any.apply(null,rx);}else{return _get(fx);}};g._formats=g.formats([\"\\\"yyyy-MM-ddTHH:mm:ssZ\\\"\",\"yyyy-MM-ddTHH:mm:ssZ\",\"yyyy-MM-ddTHH:mm:ssz\",\"yyyy-MM-ddTHH:mm:ss\",\"yyyy-MM-ddTHH:mmZ\",\"yyyy-MM-ddTHH:mmz\",\"yyyy-MM-ddTHH:mm\",\"ddd, MMM dd, yyyy H:mm:ss tt\",\"ddd MMM d yyyy HH:mm:ss zzz\",\"MMddyyyy\",\"ddMMyyyy\",\"Mddyyyy\",\"ddMyyyy\",\"Mdyyyy\",\"dMyyyy\",\"yyyy\",\"Mdyy\",\"dMyy\",\"d\"]);g._start=_.process(_.set([g.date,g.time,g.expression],g.generalDelimiter,g.whiteSpace),t.finish);g.start=function(s){try{var r=g._formats.call({},s);if(r[1].length===0){return r;}}catch(e){}\nreturn g._start.call({},s);};$D._parse=$D.parse;$D.parse=function(s){var r=null;if(!s){return null;}\nif(s instanceof Date){return s;}\ntry{r=$D.Grammar.start.call({},s.replace(/^\\s*(\\S*(\\s+\\S+)*)\\s*$/,\"$1\"));}catch(e){return null;}\nreturn((r[1].length===0)?r[0]:null);};$D.getParseFunction=function(fx){var fn=$D.Grammar.formats(fx);return function(s){var r=null;try{r=fn.call({},s);}catch(e){return null;}\nreturn((r[1].length===0)?r[0]:null);};};$D.parseExact=function(s,fx){return $D.getParseFunction(fx)(s);};}());\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/vendor/date.js","/*!\n * jQuery Form Plugin\n * version: 3.18 (28-SEP-2012)\n * @requires jQuery v1.5 or later\n *\n * Examples and documentation at: http://malsup.com/jquery/form/\n * Project repository: https://github.com/malsup/form\n * Dual licensed under the MIT and GPL licenses:\n *    http://malsup.github.com/mit-license.txt\n *    http://malsup.github.com/gpl-license-v2.txt\n */\n/*global ActiveXObject alert */\n;(function($) {\n\"use strict\";\n\n/*\n    Usage Note:\n    -----------\n    Do not use both ajaxSubmit and ajaxForm on the same form.  These\n    functions are mutually exclusive.  Use ajaxSubmit if you want\n    to bind your own submit handler to the form.  For example,\n\n    $(document).ready(function() {\n        $('#myForm').on('submit', function(e) {\n            e.preventDefault(); // <-- important\n            $(this).ajaxSubmit({\n                target: '#output'\n            });\n        });\n    });\n\n    Use ajaxForm when you want the plugin to manage all the event binding\n    for you.  For example,\n\n    $(document).ready(function() {\n        $('#myForm').ajaxForm({\n            target: '#output'\n        });\n    });\n    \n    You can also use ajaxForm with delegation (requires jQuery v1.7+), so the\n    form does not have to exist when you invoke ajaxForm:\n\n    $('#myForm').ajaxForm({\n        delegation: true,\n        target: '#output'\n    });\n    \n    When using ajaxForm, the ajaxSubmit function will be invoked for you\n    at the appropriate time.\n*/\n\n/**\n * Feature detection\n */\nvar feature = {};\nfeature.fileapi = $(\"<input type='file'/>\").get(0).files !== undefined;\nfeature.formdata = window.FormData !== undefined;\n\n/**\n * ajaxSubmit() provides a mechanism for immediately submitting\n * an HTML form using AJAX.\n */\n$.fn.ajaxSubmit = function(options) {\n    /*jshint scripturl:true */\n\n    // fast fail if nothing selected (http://dev.jquery.com/ticket/2752)\n    if (!this.length) {\n        log('ajaxSubmit: skipping submit process - no element selected');\n        return this;\n    }\n    \n    var method, action, url, $form = this;\n\n    if (typeof options == 'function') {\n        options = { success: options };\n    }\n\n    method = this.attr('method');\n    action = this.attr('action');\n    url = (typeof action === 'string') ? $.trim(action) : '';\n    url = url || window.location.href || '';\n    if (url) {\n        // clean url (don't include hash vaue)\n        url = (url.match(/^([^#]+)/)||[])[1];\n    }\n\n    options = $.extend(true, {\n        url:  url,\n        success: $.ajaxSettings.success,\n        type: method || 'GET',\n        iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank'\n    }, options);\n\n    // hook for manipulating the form data before it is extracted;\n    // convenient for use with rich editors like tinyMCE or FCKEditor\n    var veto = {};\n    this.trigger('form-pre-serialize', [this, options, veto]);\n    if (veto.veto) {\n        log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');\n        return this;\n    }\n\n    // provide opportunity to alter form data before it is serialized\n    if (options.beforeSerialize && options.beforeSerialize(this, options) === false) {\n        log('ajaxSubmit: submit aborted via beforeSerialize callback');\n        return this;\n    }\n\n    var traditional = options.traditional;\n    if ( traditional === undefined ) {\n        traditional = $.ajaxSettings.traditional;\n    }\n    \n    var elements = [];\n    var qx, a = this.formToArray(options.semantic, elements);\n    if (options.data) {\n        options.extraData = options.data;\n        qx = $.param(options.data, traditional);\n    }\n\n    // give pre-submit callback an opportunity to abort the submit\n    if (options.beforeSubmit && options.beforeSubmit(a, this, options) === false) {\n        log('ajaxSubmit: submit aborted via beforeSubmit callback');\n        return this;\n    }\n\n    // fire vetoable 'validate' event\n    this.trigger('form-submit-validate', [a, this, options, veto]);\n    if (veto.veto) {\n        log('ajaxSubmit: submit vetoed via form-submit-validate trigger');\n        return this;\n    }\n\n    var q = $.param(a, traditional);\n    if (qx) {\n        q = ( q ? (q + '&' + qx) : qx );\n    }    \n    if (options.type.toUpperCase() == 'GET') {\n        options.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;\n        options.data = null;  // data is null for 'get'\n    }\n    else {\n        options.data = q; // data is the query string for 'post'\n    }\n\n    var callbacks = [];\n    if (options.resetForm) {\n        callbacks.push(function() { $form.resetForm(); });\n    }\n    if (options.clearForm) {\n        callbacks.push(function() { $form.clearForm(options.includeHidden); });\n    }\n\n    // perform a load on the target only if dataType is not provided\n    if (!options.dataType && options.target) {\n        var oldSuccess = options.success || function(){};\n        callbacks.push(function(data) {\n            var fn = options.replaceTarget ? 'replaceWith' : 'html';\n            $(options.target)[fn](data).each(oldSuccess, arguments);\n        });\n    }\n    else if (options.success) {\n        callbacks.push(options.success);\n    }\n\n    options.success = function(data, status, xhr) { // jQuery 1.4+ passes xhr as 3rd arg\n        var context = options.context || this ;    // jQuery 1.4+ supports scope context \n        for (var i=0, max=callbacks.length; i < max; i++) {\n            callbacks[i].apply(context, [data, status, xhr || $form, $form]);\n        }\n    };\n\n    // are there files to upload?\n    var fileInputs = $('input:file:enabled[value]', this); // [value] (issue #113)\n    var hasFileInputs = fileInputs.length > 0;\n    var mp = 'multipart/form-data';\n    var multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);\n\n    var fileAPI = feature.fileapi && feature.formdata;\n    log(\"fileAPI :\" + fileAPI);\n    var shouldUseFrame = (hasFileInputs || multipart) && !fileAPI;\n\n    var jqxhr;\n\n    // options.iframe allows user to force iframe mode\n    // 06-NOV-09: now defaulting to iframe mode if file input is detected\n    if (options.iframe !== false && (options.iframe || shouldUseFrame)) {\n        // hack to fix Safari hang (thanks to Tim Molendijk for this)\n        // see:  http://groups.google.com/group/jquery-dev/browse_thread/thread/36395b7ab510dd5d\n        if (options.closeKeepAlive) {\n            $.get(options.closeKeepAlive, function() {\n                jqxhr = fileUploadIframe(a);\n            });\n        }\n        else {\n            jqxhr = fileUploadIframe(a);\n        }\n    }\n    else if ((hasFileInputs || multipart) && fileAPI) {\n        jqxhr = fileUploadXhr(a);\n    }\n    else {\n        jqxhr = $.ajax(options);\n    }\n\n    $form.removeData('jqxhr').data('jqxhr', jqxhr);\n\n    // clear element array\n    for (var k=0; k < elements.length; k++)\n        elements[k] = null;\n\n    // fire 'notify' event\n    this.trigger('form-submit-notify', [this, options]);\n    return this;\n\n    // utility fn for deep serialization\n    function deepSerialize(extraData){\n        var serialized = $.param(extraData).split('&');\n        var len = serialized.length;\n        var result = {};\n        var i, part;\n        for (i=0; i < len; i++) {\n            part = serialized[i].split('=');\n            result[decodeURIComponent(part[0])] = decodeURIComponent(part[1]);\n        }\n        return result;\n    }\n\n     // XMLHttpRequest Level 2 file uploads (big hat tip to francois2metz)\n    function fileUploadXhr(a) {\n        var formdata = new FormData();\n\n        for (var i=0; i < a.length; i++) {\n            formdata.append(a[i].name, a[i].value);\n        }\n\n        if (options.extraData) {\n            var serializedData = deepSerialize(options.extraData);\n            for (var p in serializedData)\n                if (serializedData.hasOwnProperty(p))\n                    formdata.append(p, serializedData[p]);\n        }\n\n        options.data = null;\n\n        var s = $.extend(true, {}, $.ajaxSettings, options, {\n            contentType: false,\n            processData: false,\n            cache: false,\n            type: method || 'POST'\n        });\n        \n        if (options.uploadProgress) {\n            // workaround because jqXHR does not expose upload property\n            s.xhr = function() {\n                var xhr = jQuery.ajaxSettings.xhr();\n                if (xhr.upload) {\n                    xhr.upload.onprogress = function(event) {\n                        var percent = 0;\n                        var position = event.loaded || event.position; /*event.position is deprecated*/\n                        var total = event.total;\n                        if (event.lengthComputable) {\n                            percent = Math.ceil(position / total * 100);\n                        }\n                        options.uploadProgress(event, position, total, percent);\n                    };\n                }\n                return xhr;\n            };\n        }\n\n        s.data = null;\n            var beforeSend = s.beforeSend;\n            s.beforeSend = function(xhr, o) {\n                o.data = formdata;\n                if(beforeSend)\n                    beforeSend.call(this, xhr, o);\n        };\n        return $.ajax(s);\n    }\n\n    // private function for handling file uploads (hat tip to YAHOO!)\n    function fileUploadIframe(a) {\n        var form = $form[0], el, i, s, g, id, $io, io, xhr, sub, n, timedOut, timeoutHandle;\n        var useProp = !!$.fn.prop;\n        var deferred = $.Deferred();\n\n        if ($(':input[name=submit],:input[id=submit]', form).length) {\n            // if there is an input with a name or id of 'submit' then we won't be\n            // able to invoke the submit fn on the form (at least not x-browser)\n            alert('Error: Form elements must not have name or id of \"submit\".');\n            deferred.reject();\n            return deferred;\n        }\n        \n        if (a) {\n            // ensure that every serialized input is still enabled\n            for (i=0; i < elements.length; i++) {\n                el = $(elements[i]);\n                if ( useProp )\n                    el.prop('disabled', false);\n                else\n                    el.removeAttr('disabled');\n            }\n        }\n\n        s = $.extend(true, {}, $.ajaxSettings, options);\n        s.context = s.context || s;\n        id = 'jqFormIO' + (new Date().getTime());\n        if (s.iframeTarget) {\n            $io = $(s.iframeTarget);\n            n = $io.attr('name');\n            if (!n)\n                 $io.attr('name', id);\n            else\n                id = n;\n        }\n        else {\n            $io = $('<iframe name=\"' + id + '\" src=\"'+ s.iframeSrc +'\" />');\n            $io.css({ position: 'absolute', top: '-1000px', left: '-1000px' });\n        }\n        io = $io[0];\n\n\n        xhr = { // mock object\n            aborted: 0,\n            responseText: null,\n            responseXML: null,\n            status: 0,\n            statusText: 'n/a',\n            getAllResponseHeaders: function() {},\n            getResponseHeader: function() {},\n            setRequestHeader: function() {},\n            abort: function(status) {\n                var e = (status === 'timeout' ? 'timeout' : 'aborted');\n                log('aborting upload... ' + e);\n                this.aborted = 1;\n                // #214\n                if (io.contentWindow.document.execCommand) {\n                    try { // #214\n                        io.contentWindow.document.execCommand('Stop');\n                    } catch(ignore) {}\n                }\n                $io.attr('src', s.iframeSrc); // abort op in progress\n                xhr.error = e;\n                if (s.error)\n                    s.error.call(s.context, xhr, e, status);\n                if (g)\n                    $.event.trigger(\"ajaxError\", [xhr, s, e]);\n                if (s.complete)\n                    s.complete.call(s.context, xhr, e);\n            }\n        };\n\n        g = s.global;\n        // trigger ajax global events so that activity/block indicators work like normal\n        if (g && 0 === $.active++) {\n            $.event.trigger(\"ajaxStart\");\n        }\n        if (g) {\n            $.event.trigger(\"ajaxSend\", [xhr, s]);\n        }\n\n        if (s.beforeSend && s.beforeSend.call(s.context, xhr, s) === false) {\n            if (s.global) {\n                $.active--;\n            }\n            deferred.reject();\n            return deferred;\n        }\n        if (xhr.aborted) {\n            deferred.reject();\n            return deferred;\n        }\n\n        // add submitting element to data if we know it\n        sub = form.clk;\n        if (sub) {\n            n = sub.name;\n            if (n && !sub.disabled) {\n                s.extraData = s.extraData || {};\n                s.extraData[n] = sub.value;\n                if (sub.type == \"image\") {\n                    s.extraData[n+'.x'] = form.clk_x;\n                    s.extraData[n+'.y'] = form.clk_y;\n                }\n            }\n        }\n        \n        var CLIENT_TIMEOUT_ABORT = 1;\n        var SERVER_ABORT = 2;\n\n        function getDoc(frame) {\n            var doc = frame.contentWindow ? frame.contentWindow.document : frame.contentDocument ? frame.contentDocument : frame.document;\n            return doc;\n        }\n        \n        // Rails CSRF hack (thanks to Yvan Barthelemy)\n        var csrf_token = $('meta[name=csrf-token]').attr('content');\n        var csrf_param = $('meta[name=csrf-param]').attr('content');\n        if (csrf_param && csrf_token) {\n            s.extraData = s.extraData || {};\n            s.extraData[csrf_param] = csrf_token;\n        }\n\n        // take a breath so that pending repaints get some cpu time before the upload starts\n        function doSubmit() {\n            // make sure form attrs are set\n            var t = $form.attr('target'), a = $form.attr('action');\n\n            // update form attrs in IE friendly way\n            form.setAttribute('target',id);\n            if (!method) {\n                form.setAttribute('method', 'POST');\n            }\n            if (a != s.url) {\n                form.setAttribute('action', s.url);\n            }\n\n            // ie borks in some cases when setting encoding\n            if (! s.skipEncodingOverride && (!method || /post/i.test(method))) {\n                $form.attr({\n                    encoding: 'multipart/form-data',\n                    enctype:  'multipart/form-data'\n                });\n            }\n\n            // support timout\n            if (s.timeout) {\n                timeoutHandle = setTimeout(function() { timedOut = true; cb(CLIENT_TIMEOUT_ABORT); }, s.timeout);\n            }\n            \n            // look for server aborts\n            function checkState() {\n                try {\n                    var state = getDoc(io).readyState;\n                    log('state = ' + state);\n                    if (state && state.toLowerCase() == 'uninitialized')\n                        setTimeout(checkState,50);\n                }\n                catch(e) {\n                    log('Server abort: ' , e, ' (', e.name, ')');\n                    cb(SERVER_ABORT);\n                    if (timeoutHandle)\n                        clearTimeout(timeoutHandle);\n                    timeoutHandle = undefined;\n                }\n            }\n\n            // add \"extra\" data to form if provided in options\n            var extraInputs = [];\n            try {\n                if (s.extraData) {\n                    for (var n in s.extraData) {\n                        if (s.extraData.hasOwnProperty(n)) {\n                           // if using the $.param format that allows for multiple values with the same name\n                           if($.isPlainObject(s.extraData[n]) && s.extraData[n].hasOwnProperty('name') && s.extraData[n].hasOwnProperty('value')) {\n                               extraInputs.push(\n                               $('<input type=\"hidden\" name=\"'+s.extraData[n].name+'\">').attr('value',s.extraData[n].value)\n                                   .appendTo(form)[0]);\n                           } else {\n                               extraInputs.push(\n                               $('<input type=\"hidden\" name=\"'+n+'\">').attr('value',s.extraData[n])\n                                   .appendTo(form)[0]);\n                           }\n                        }\n                    }\n                }\n\n                if (!s.iframeTarget) {\n                    // add iframe to doc and submit the form\n                    $io.appendTo('body');\n                    if (io.attachEvent)\n                        io.attachEvent('onload', cb);\n                    else\n                        io.addEventListener('load', cb, false);\n                }\n                setTimeout(checkState,15);\n                form.submit();\n            }\n            finally {\n                // reset attrs and remove \"extra\" input elements\n                form.setAttribute('action',a);\n                if(t) {\n                    form.setAttribute('target', t);\n                } else {\n                    $form.removeAttr('target');\n                }\n                $(extraInputs).remove();\n            }\n        }\n\n        if (s.forceSync) {\n            doSubmit();\n        }\n        else {\n            setTimeout(doSubmit, 10); // this lets dom updates render\n        }\n\n        var data, doc, domCheckCount = 50, callbackProcessed;\n\n        function cb(e) {\n            if (xhr.aborted || callbackProcessed) {\n                return;\n            }\n            try {\n                doc = getDoc(io);\n            }\n            catch(ex) {\n                log('cannot access response document: ', ex);\n                e = SERVER_ABORT;\n            }\n            if (e === CLIENT_TIMEOUT_ABORT && xhr) {\n                xhr.abort('timeout');\n                deferred.reject(xhr, 'timeout');\n                return;\n            }\n            else if (e == SERVER_ABORT && xhr) {\n                xhr.abort('server abort');\n                deferred.reject(xhr, 'error', 'server abort');\n                return;\n            }\n\n            if (!doc || doc.location.href == s.iframeSrc) {\n                // response not received yet\n                if (!timedOut)\n                    return;\n            }\n            if (io.detachEvent)\n                io.detachEvent('onload', cb);\n            else    \n                io.removeEventListener('load', cb, false);\n\n            var status = 'success', errMsg;\n            try {\n                if (timedOut) {\n                    throw 'timeout';\n                }\n\n                var isXml = s.dataType == 'xml' || doc.XMLDocument || $.isXMLDoc(doc);\n                log('isXml='+isXml);\n                if (!isXml && window.opera && (doc.body === null || !doc.body.innerHTML)) {\n                    if (--domCheckCount) {\n                        // in some browsers (Opera) the iframe DOM is not always traversable when\n                        // the onload callback fires, so we loop a bit to accommodate\n                        log('requeing onLoad callback, DOM not available');\n                        setTimeout(cb, 250);\n                        return;\n                    }\n                    // let this fall through because server response could be an empty document\n                    //log('Could not access iframe DOM after mutiple tries.');\n                    //throw 'DOMException: not available';\n                }\n\n                //log('response detected');\n                var docRoot = doc.body ? doc.body : doc.documentElement;\n                xhr.responseText = docRoot ? docRoot.innerHTML : null;\n                xhr.responseXML = doc.XMLDocument ? doc.XMLDocument : doc;\n                if (isXml)\n                    s.dataType = 'xml';\n                xhr.getResponseHeader = function(header){\n                    var headers = {'content-type': s.dataType};\n                    return headers[header];\n                };\n                // support for XHR 'status' & 'statusText' emulation :\n                if (docRoot) {\n                    xhr.status = Number( docRoot.getAttribute('status') ) || xhr.status;\n                    xhr.statusText = docRoot.getAttribute('statusText') || xhr.statusText;\n                }\n\n                var dt = (s.dataType || '').toLowerCase();\n                var scr = /(json|script|text)/.test(dt);\n                if (scr || s.textarea) {\n                    // see if user embedded response in textarea\n                    var ta = doc.getElementsByTagName('textarea')[0];\n                    if (ta) {\n                        xhr.responseText = ta.value;\n                        // support for XHR 'status' & 'statusText' emulation :\n                        xhr.status = Number( ta.getAttribute('status') ) || xhr.status;\n                        xhr.statusText = ta.getAttribute('statusText') || xhr.statusText;\n                    }\n                    else if (scr) {\n                        // account for browsers injecting pre around json response\n                        var pre = doc.getElementsByTagName('pre')[0];\n                        var b = doc.getElementsByTagName('body')[0];\n                        if (pre) {\n                            xhr.responseText = pre.textContent ? pre.textContent : pre.innerText;\n                        }\n                        else if (b) {\n                            xhr.responseText = b.textContent ? b.textContent : b.innerText;\n                        }\n                    }\n                }\n                else if (dt == 'xml' && !xhr.responseXML && xhr.responseText) {\n                    xhr.responseXML = toXml(xhr.responseText);\n                }\n\n                try {\n                    data = httpData(xhr, dt, s);\n                }\n                catch (e) {\n                    status = 'parsererror';\n                    xhr.error = errMsg = (e || status);\n                }\n            }\n            catch (e) {\n                log('error caught: ',e);\n                status = 'error';\n                xhr.error = errMsg = (e || status);\n            }\n\n            if (xhr.aborted) {\n                log('upload aborted');\n                status = null;\n            }\n\n            if (xhr.status) { // we've set xhr.status\n                status = (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ? 'success' : 'error';\n            }\n\n            // ordering of these callbacks/triggers is odd, but that's how $.ajax does it\n            if (status === 'success') {\n                if (s.success)\n                    s.success.call(s.context, data, 'success', xhr);\n                deferred.resolve(xhr.responseText, 'success', xhr);\n                if (g)\n                    $.event.trigger(\"ajaxSuccess\", [xhr, s]);\n            }\n            else if (status) {\n                if (errMsg === undefined)\n                    errMsg = xhr.statusText;\n                if (s.error)\n                    s.error.call(s.context, xhr, status, errMsg);\n                deferred.reject(xhr, 'error', errMsg);\n                if (g)\n                    $.event.trigger(\"ajaxError\", [xhr, s, errMsg]);\n            }\n\n            if (g)\n                $.event.trigger(\"ajaxComplete\", [xhr, s]);\n\n            if (g && ! --$.active) {\n                $.event.trigger(\"ajaxStop\");\n            }\n\n            if (s.complete)\n                s.complete.call(s.context, xhr, status);\n\n            callbackProcessed = true;\n            if (s.timeout)\n                clearTimeout(timeoutHandle);\n\n            // clean up\n            setTimeout(function() {\n                if (!s.iframeTarget)\n                    $io.remove();\n                xhr.responseXML = null;\n            }, 100);\n        }\n\n        var toXml = $.parseXML || function(s, doc) { // use parseXML if available (jQuery 1.5+)\n            if (window.ActiveXObject) {\n                doc = new ActiveXObject('Microsoft.XMLDOM');\n                doc.async = 'false';\n                doc.loadXML(s);\n            }\n            else {\n                doc = (new DOMParser()).parseFromString(s, 'text/xml');\n            }\n            return (doc && doc.documentElement && doc.documentElement.nodeName != 'parsererror') ? doc : null;\n        };\n        var parseJSON = $.parseJSON || function(s) {\n            /*jslint evil:true */\n            return window['eval']('(' + s + ')');\n        };\n\n        var httpData = function( xhr, type, s ) { // mostly lifted from jq1.4.4\n\n            var ct = xhr.getResponseHeader('content-type') || '',\n                xml = type === 'xml' || !type && ct.indexOf('xml') >= 0,\n                data = xml ? xhr.responseXML : xhr.responseText;\n\n            if (xml && data.documentElement.nodeName === 'parsererror') {\n                if ($.error)\n                    $.error('parsererror');\n            }\n            if (s && s.dataFilter) {\n                data = s.dataFilter(data, type);\n            }\n            if (typeof data === 'string') {\n                if (type === 'json' || !type && ct.indexOf('json') >= 0) {\n                    data = parseJSON(data);\n                } else if (type === \"script\" || !type && ct.indexOf(\"javascript\") >= 0) {\n                    $.globalEval(data);\n                }\n            }\n            return data;\n        };\n\n        return deferred;\n    }\n};\n\n/**\n * ajaxForm() provides a mechanism for fully automating form submission.\n *\n * The advantages of using this method instead of ajaxSubmit() are:\n *\n * 1: This method will include coordinates for <input type=\"image\" /> elements (if the element\n *    is used to submit the form).\n * 2. This method will include the submit element's name/value data (for the element that was\n *    used to submit the form).\n * 3. This method binds the submit() method to the form for you.\n *\n * The options argument for ajaxForm works exactly as it does for ajaxSubmit.  ajaxForm merely\n * passes the options argument along after properly binding events for submit elements and\n * the form itself.\n */\n$.fn.ajaxForm = function(options) {\n    options = options || {};\n    options.delegation = options.delegation && $.isFunction($.fn.on);\n    \n    // in jQuery 1.3+ we can fix mistakes with the ready state\n    if (!options.delegation && this.length === 0) {\n        var o = { s: this.selector, c: this.context };\n        if (!$.isReady && o.s) {\n            log('DOM not ready, queuing ajaxForm');\n            $(function() {\n                $(o.s,o.c).ajaxForm(options);\n            });\n            return this;\n        }\n        // is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()\n        log('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));\n        return this;\n    }\n\n    if ( options.delegation ) {\n        $(document)\n            .off('submit.form-plugin', this.selector, doAjaxSubmit)\n            .off('click.form-plugin', this.selector, captureSubmittingElement)\n            .on('submit.form-plugin', this.selector, options, doAjaxSubmit)\n            .on('click.form-plugin', this.selector, options, captureSubmittingElement);\n        return this;\n    }\n\n    return this.ajaxFormUnbind()\n        .bind('submit.form-plugin', options, doAjaxSubmit)\n        .bind('click.form-plugin', options, captureSubmittingElement);\n};\n\n// private event handlers    \nfunction doAjaxSubmit(e) {\n    /*jshint validthis:true */\n    var options = e.data;\n    if (!e.isDefaultPrevented()) { // if event has been canceled, don't proceed\n        e.preventDefault();\n        $(this).ajaxSubmit(options);\n    }\n}\n    \nfunction captureSubmittingElement(e) {\n    /*jshint validthis:true */\n    var target = e.target;\n    var $el = $(target);\n    if (!($el.is(\":submit,input:image\"))) {\n        // is this a child element of the submit el?  (ex: a span within a button)\n        var t = $el.closest(':submit');\n        if (t.length === 0) {\n            return;\n        }\n        target = t[0];\n    }\n    var form = this;\n    form.clk = target;\n    if (target.type == 'image') {\n        if (e.offsetX !== undefined) {\n            form.clk_x = e.offsetX;\n            form.clk_y = e.offsetY;\n        } else if (typeof $.fn.offset == 'function') {\n            var offset = $el.offset();\n            form.clk_x = e.pageX - offset.left;\n            form.clk_y = e.pageY - offset.top;\n        } else {\n            form.clk_x = e.pageX - target.offsetLeft;\n            form.clk_y = e.pageY - target.offsetTop;\n        }\n    }\n    // clear form vars\n    setTimeout(function() { form.clk = form.clk_x = form.clk_y = null; }, 100);\n}\n\n\n// ajaxFormUnbind unbinds the event handlers that were bound by ajaxForm\n$.fn.ajaxFormUnbind = function() {\n    return this.unbind('submit.form-plugin click.form-plugin');\n};\n\n/**\n * formToArray() gathers form element data into an array of objects that can\n * be passed to any of the following ajax functions: $.get, $.post, or load.\n * Each object in the array has both a 'name' and 'value' property.  An example of\n * an array for a simple login form might be:\n *\n * [ { name: 'username', value: 'jresig' }, { name: 'password', value: 'secret' } ]\n *\n * It is this array that is passed to pre-submit callback functions provided to the\n * ajaxSubmit() and ajaxForm() methods.\n */\n$.fn.formToArray = function(semantic, elements) {\n    var a = [];\n    if (this.length === 0) {\n        return a;\n    }\n\n    var form = this[0];\n    var els = semantic ? form.getElementsByTagName('*') : form.elements;\n    if (!els) {\n        return a;\n    }\n\n    var i,j,n,v,el,max,jmax;\n    for(i=0, max=els.length; i < max; i++) {\n        el = els[i];\n        n = el.name;\n        if (!n) {\n            continue;\n        }\n\n        if (semantic && form.clk && el.type == \"image\") {\n            // handle image inputs on the fly when semantic == true\n            if(!el.disabled && form.clk == el) {\n                a.push({name: n, value: $(el).val(), type: el.type });\n                a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});\n            }\n            continue;\n        }\n\n        v = $.fieldValue(el, true);\n        if (v && v.constructor == Array) {\n            if (elements) \n                elements.push(el);\n            for(j=0, jmax=v.length; j < jmax; j++) {\n                a.push({name: n, value: v[j]});\n            }\n        }\n        else if (feature.fileapi && el.type == 'file' && !el.disabled) {\n            if (elements) \n                elements.push(el);\n            var files = el.files;\n            if (files.length) {\n                for (j=0; j < files.length; j++) {\n                    a.push({name: n, value: files[j], type: el.type});\n                }\n            }\n            else {\n                // #180\n                a.push({ name: n, value: '', type: el.type });\n            }\n        }\n        else if (v !== null && typeof v != 'undefined') {\n            if (elements) \n                elements.push(el);\n            a.push({name: n, value: v, type: el.type, required: el.required});\n        }\n    }\n\n    if (!semantic && form.clk) {\n        // input type=='image' are not found in elements array! handle it here\n        var $input = $(form.clk), input = $input[0];\n        n = input.name;\n        if (n && !input.disabled && input.type == 'image') {\n            a.push({name: n, value: $input.val()});\n            a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});\n        }\n    }\n    return a;\n};\n\n/**\n * Serializes form data into a 'submittable' string. This method will return a string\n * in the format: name1=value1&amp;name2=value2\n */\n$.fn.formSerialize = function(semantic) {\n    //hand off to jQuery.param for proper encoding\n    return $.param(this.formToArray(semantic));\n};\n\n/**\n * Serializes all field elements in the jQuery object into a query string.\n * This method will return a string in the format: name1=value1&amp;name2=value2\n */\n$.fn.fieldSerialize = function(successful) {\n    var a = [];\n    this.each(function() {\n        var n = this.name;\n        if (!n) {\n            return;\n        }\n        var v = $.fieldValue(this, successful);\n        if (v && v.constructor == Array) {\n            for (var i=0,max=v.length; i < max; i++) {\n                a.push({name: n, value: v[i]});\n            }\n        }\n        else if (v !== null && typeof v != 'undefined') {\n            a.push({name: this.name, value: v});\n        }\n    });\n    //hand off to jQuery.param for proper encoding\n    return $.param(a);\n};\n\n/**\n * Returns the value(s) of the element in the matched set.  For example, consider the following form:\n *\n *  <form><fieldset>\n *      <input name=\"A\" type=\"text\" />\n *      <input name=\"A\" type=\"text\" />\n *      <input name=\"B\" type=\"checkbox\" value=\"B1\" />\n *      <input name=\"B\" type=\"checkbox\" value=\"B2\"/>\n *      <input name=\"C\" type=\"radio\" value=\"C1\" />\n *      <input name=\"C\" type=\"radio\" value=\"C2\" />\n *  </fieldset></form>\n *\n *  var v = $(':text').fieldValue();\n *  // if no values are entered into the text inputs\n *  v == ['','']\n *  // if values entered into the text inputs are 'foo' and 'bar'\n *  v == ['foo','bar']\n *\n *  var v = $(':checkbox').fieldValue();\n *  // if neither checkbox is checked\n *  v === undefined\n *  // if both checkboxes are checked\n *  v == ['B1', 'B2']\n *\n *  var v = $(':radio').fieldValue();\n *  // if neither radio is checked\n *  v === undefined\n *  // if first radio is checked\n *  v == ['C1']\n *\n * The successful argument controls whether or not the field element must be 'successful'\n * (per http://www.w3.org/TR/html4/interact/forms.html#successful-controls).\n * The default value of the successful argument is true.  If this value is false the value(s)\n * for each element is returned.\n *\n * Note: This method *always* returns an array.  If no valid value can be determined the\n *    array will be empty, otherwise it will contain one or more values.\n */\n$.fn.fieldValue = function(successful) {\n    for (var val=[], i=0, max=this.length; i < max; i++) {\n        var el = this[i];\n        var v = $.fieldValue(el, successful);\n        if (v === null || typeof v == 'undefined' || (v.constructor == Array && !v.length)) {\n            continue;\n        }\n        if (v.constructor == Array)\n            $.merge(val, v);\n        else\n            val.push(v);\n    }\n    return val;\n};\n\n/**\n * Returns the value of the field element.\n */\n$.fieldValue = function(el, successful) {\n    var n = el.name, t = el.type, tag = el.tagName.toLowerCase();\n    if (successful === undefined) {\n        successful = true;\n    }\n\n    if (successful && (!n || el.disabled || t == 'reset' || t == 'button' ||\n        (t == 'checkbox' || t == 'radio') && !el.checked ||\n        (t == 'submit' || t == 'image') && el.form && el.form.clk != el ||\n        tag == 'select' && el.selectedIndex == -1)) {\n            return null;\n    }\n\n    if (tag == 'select') {\n        var index = el.selectedIndex;\n        if (index < 0) {\n            return null;\n        }\n        var a = [], ops = el.options;\n        var one = (t == 'select-one');\n        var max = (one ? index+1 : ops.length);\n        for(var i=(one ? index : 0); i < max; i++) {\n            var op = ops[i];\n            if (op.selected) {\n                var v = op.value;\n                if (!v) { // extra pain for IE...\n                    v = (op.attributes && op.attributes['value'] && !(op.attributes['value'].specified)) ? op.text : op.value;\n                }\n                if (one) {\n                    return v;\n                }\n                a.push(v);\n            }\n        }\n        return a;\n    }\n    return $(el).val();\n};\n\n/**\n * Clears the form data.  Takes the following actions on the form's input fields:\n *  - input text fields will have their 'value' property set to the empty string\n *  - select elements will have their 'selectedIndex' property set to -1\n *  - checkbox and radio inputs will have their 'checked' property set to false\n *  - inputs of type submit, button, reset, and hidden will *not* be effected\n *  - button elements will *not* be effected\n */\n$.fn.clearForm = function(includeHidden) {\n    return this.each(function() {\n        $('input,select,textarea', this).clearFields(includeHidden);\n    });\n};\n\n/**\n * Clears the selected form elements.\n */\n$.fn.clearFields = $.fn.clearInputs = function(includeHidden) {\n    var re = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; // 'hidden' is not in this list\n    return this.each(function() {\n        var t = this.type, tag = this.tagName.toLowerCase();\n        if (re.test(t) || tag == 'textarea') {\n            this.value = '';\n        }\n        else if (t == 'checkbox' || t == 'radio') {\n            this.checked = false;\n        }\n        else if (tag == 'select') {\n            this.selectedIndex = -1;\n        }\n        else if (includeHidden) {\n            // includeHidden can be the value true, or it can be a selector string\n            // indicating a special test; for example:\n            //  $('#myForm').clearForm('.special:hidden')\n            // the above would clean hidden inputs that have the class of 'special'\n            if ( (includeHidden === true && /hidden/.test(t)) ||\n                 (typeof includeHidden == 'string' && $(this).is(includeHidden)) )\n                this.value = '';\n        }\n    });\n};\n\n/**\n * Resets the form data.  Causes all form elements to be reset to their original value.\n */\n$.fn.resetForm = function() {\n    return this.each(function() {\n        // guard against an input with the name of 'reset'\n        // note that IE reports the reset function as an 'object'\n        if (typeof this.reset == 'function' || (typeof this.reset == 'object' && !this.reset.nodeType)) {\n            this.reset();\n        }\n    });\n};\n\n/**\n * Enables or disables any matching elements.\n */\n$.fn.enable = function(b) {\n    if (b === undefined) {\n        b = true;\n    }\n    return this.each(function() {\n        this.disabled = !b;\n    });\n};\n\n/**\n * Checks/unchecks any matching checkboxes or radio buttons and\n * selects/deselects and matching option elements.\n */\n$.fn.selected = function(select) {\n    if (select === undefined) {\n        select = true;\n    }\n    return this.each(function() {\n        var t = this.type;\n        if (t == 'checkbox' || t == 'radio') {\n            this.checked = select;\n        }\n        else if (this.tagName.toLowerCase() == 'option') {\n            var $sel = $(this).parent('select');\n            if (select && $sel[0] && $sel[0].type == 'select-one') {\n                // deselect all other options\n                $sel.find('option').selected(false);\n            }\n            this.selected = select;\n        }\n    });\n};\n\n// expose debug var\n$.fn.ajaxSubmit.debug = false;\n\n// helper fn for console logging\nfunction log() {\n    if (!$.fn.ajaxSubmit.debug) \n        return;\n    var msg = '[jquery.form] ' + Array.prototype.join.call(arguments,'');\n    if (window.console && window.console.log) {\n        window.console.log(msg);\n    }\n    else if (window.opera && window.opera.postError) {\n        window.opera.postError(msg);\n    }\n}\n\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/vendor/jquery.form.js","// leanModal v1.1 by Ray Stone - http://finelysliced.com.au\n// Dual licensed under the MIT and GPL\n\n// Updated to prevent divs with duplicate IDs from being rendered.\n\n(function($) {\n    $.fn.extend({\n        leanModal: function(options) {\n            var defaults = {\n                top: 100,\n                overlay: 0.5,\n                closeButton: null\n            };\n\n            // Only append the overlay element if it isn't already present.\n            if ($(\"#lean_overlay\").length == 0) {\n                var overlay = $(\"<div id='lean_overlay'></div>\");\n                $(\"body\").append(overlay);\n            }\n\n            options = $.extend(defaults, options);\n            return this.each(function() {\n                var o = options;\n                $(this).click(function(e) {\n                    var modal_id = $(this).attr(\"href\");\n                    $(\"#lean_overlay\").click(function() {\n                        close_modal(modal_id)\n                    });\n                    $(o.closeButton).click(function() {\n                        close_modal(modal_id)\n                    });\n                    var modal_height = $(modal_id).outerHeight();\n                    var modal_width = $(modal_id).outerWidth();\n                    $(\"#lean_overlay\").css({\n                        \"display\": \"block\",\n                        opacity: 0\n                    });\n                    $(\"#lean_overlay\").fadeTo(200, o.overlay);\n                    $(modal_id).css({\n                        \"display\": \"block\",\n                        \"position\": \"fixed\",\n                        \"opacity\": 0,\n                        \"z-index\": 11000,\n                        \"left\": 50 + \"%\",\n                        \"margin-left\": -(modal_width / 2) + \"px\",\n                        \"top\": o.top + \"px\"\n                    });\n                    $(modal_id).fadeTo(200, 1);\n                    e.preventDefault()\n                })\n            });\n\n            function close_modal(modal_id) {\n                $(\"#lean_overlay\").fadeOut(200);\n                $(modal_id).css({\n                    \"display\": \"none\"\n                })\n            }\n        }\n    })\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/vendor/jquery.leanModal.js","/************************\r\ndatepair.js\r\n\r\nThis is a component of the jquery-timepicker plugin\r\n\r\nhttp://jonthornton.github.com/jquery-timepicker/\r\n\r\nrequires jQuery 1.6+\r\n\r\nversion: 1.2.2\r\n************************/\r\n\r\ndefine([\"jquery\", \"jquery.ui\", \"jquery.timepicker\"], function($) {\r\n\r\n$(function() {\r\n\r\n\t$('.datepair input.date').each(function(){\r\n\t\tvar $this = $(this);\r\n\t\t$this.datepicker({ 'dateFormat': 'm/d/yy' });\r\n\r\n\t\tif ($this.hasClass('start') || $this.hasClass('end')) {\r\n\t\t\t$this.on('changeDate change', doDatepair);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$('.datepair input.time').each(function() {\r\n\t\tvar $this = $(this);\r\n\t\tvar opts = { 'showDuration': true, 'timeFormat': 'H:i', 'scrollDefaultNow': true };\r\n\r\n\t\tif ($this.hasClass('start') || $this.hasClass('end')) {\r\n\t\t\topts.onSelect = doDatepair;\r\n\t\t}\r\n\r\n\t\t$this.timepicker(opts);\r\n\t});\r\n\r\n\t$('.datepair').each(initDatepair);\r\n\r\n\tfunction initDatepair()\r\n\t{\r\n\t\tvar container = $(this);\r\n\r\n\t\tvar startDateInput = container.find('input.start.date');\r\n\t\tvar endDateInput = container.find('input.end.date');\r\n\t\tvar dateDelta = 0;\r\n\r\n\t\tif (startDateInput.length && endDateInput.length) {\r\n\t\t\tvar startDate = new Date(startDateInput.val());\r\n\t\t\tvar endDate =  new Date(endDateInput.val());\r\n\r\n\t\t\tdateDelta = endDate.getTime() - startDate.getTime();\r\n\r\n\t\t\tcontainer.data('dateDelta', dateDelta);\r\n\t\t}\r\n\r\n\t\tvar startTimeInput = container.find('input.start.time');\r\n\t\tvar endTimeInput = container.find('input.end.time');\r\n\r\n\t\tif (startTimeInput.length && endTimeInput.length) {\r\n\t\t\tvar startInt = startTimeInput.timepicker('getSecondsFromMidnight');\r\n\t\t\tvar endInt = endTimeInput.timepicker('getSecondsFromMidnight');\r\n\r\n\t\t\tcontainer.data('timeDelta', endInt - startInt);\r\n\r\n\t\t\tif (dateDelta < 86400000) {\r\n\t\t\t\tendTimeInput.timepicker('option', 'minTime', startInt);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction doDatepair()\r\n\t{\r\n\t\tvar target = $(this);\r\n\t\tif (target.val() == '') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar container = target.closest('.datepair');\r\n\r\n\t\tif (target.hasClass('date')) {\r\n\t\t\tupdateDatePair(target, container);\r\n\r\n\t\t} else if (target.hasClass('time')) {\r\n\t\t\tupdateTimePair(target, container);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateDatePair(target, container)\r\n\t{\r\n\t\tvar start = container.find('input.start.date');\r\n\t\tvar end = container.find('input.end.date');\r\n\r\n\t\tif (!start.length || !end.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar startDate = new Date(start.val());\r\n\t\tvar endDate =  new Date(end.val());\r\n\r\n\t\tvar oldDelta = container.data('dateDelta');\r\n\r\n\t\tif (oldDelta && target.hasClass('start')) {\r\n\t\t\tvar newEnd = new Date(startDate.getTime()+oldDelta);\r\n\t\t\tend.val(newEnd.format('m/d/Y'));\r\n\t\t\tend.datepicker('update');\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\t\t\tvar newDelta = endDate.getTime() - startDate.getTime();\r\n\r\n\t\t\tif (newDelta < 0) {\r\n\t\t\t\tnewDelta = 0;\r\n\r\n\t\t\t\tif (target.hasClass('start')) {\r\n\t\t\t\t\tend.val(startDate.format('m/d/Y'));\r\n\t\t\t\t\tend.datepicker('update');\r\n\t\t\t\t} else if (target.hasClass('end')) {\r\n\t\t\t\t\tstart.val(endDate.format('m/d/Y'));\r\n\t\t\t\t\tstart.datepicker('update');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (newDelta < 86400000) {\r\n\t\t\t\tvar startTimeVal = container.find('input.start.time').val();\r\n\r\n\t\t\t\tif (startTimeVal) {\r\n\t\t\t\t\tcontainer.find('input.end.time').timepicker('option', {'minTime': startTimeVal});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcontainer.find('input.end.time').timepicker('option', {'minTime': null});\r\n\t\t\t}\r\n\r\n\t\t\tcontainer.data('dateDelta', newDelta);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateTimePair(target, container)\r\n\t{\r\n\t\tvar start = container.find('input.start.time');\r\n\t\tvar end = container.find('input.end.time');\r\n\r\n\t\tif (!start.length || !end.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar startInt = start.timepicker('getSecondsFromMidnight');\r\n\t\tvar endInt = end.timepicker('getSecondsFromMidnight');\r\n\r\n\t\tvar oldDelta = container.data('timeDelta');\r\n\t\tvar dateDelta = container.data('dateDelta');\r\n\r\n\t\tif (target.hasClass('start') && (!dateDelta || dateDelta < 86400000)) {\r\n\t\t\tend.timepicker('option', 'minTime', startInt);\r\n\t\t}\r\n\r\n\t\tvar endDateAdvance = 0;\r\n\t\tvar newDelta;\r\n\r\n\t\tif (oldDelta && target.hasClass('start')) {\r\n\t\t\t// lock the duration and advance the end time\r\n\r\n\t\t\tvar newEnd = (startInt+oldDelta)%86400;\r\n\r\n\t\t\tif (newEnd < 0) {\r\n\t\t\t\tnewEnd += 86400;\r\n\t\t\t}\r\n\r\n\t\t\tend.timepicker('setTime', newEnd);\r\n\t\t\tnewDelta = newEnd - startInt;\r\n\t\t} else if (startInt !== null && endInt !== null) {\r\n\t\t\tnewDelta = endInt - startInt;\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcontainer.data('timeDelta', newDelta);\r\n\r\n\t\tif (newDelta < 0 && (!oldDelta || oldDelta > 0)) {\r\n\t\t\t// overnight time span. advance the end date 1 day\r\n\t\t\tvar endDateAdvance = 86400000;\r\n\r\n\t\t} else if (newDelta > 0 && oldDelta < 0) {\r\n\t\t\t// switching from overnight to same-day time span. decrease the end date 1 day\r\n\t\t\tvar endDateAdvance = -86400000;\r\n\t\t}\r\n\r\n\t\tvar startInput = container.find('.start.date');\r\n\t\tvar endInput = container.find('.end.date');\r\n\r\n\t\tif (startInput.val() && !endInput.val()) {\r\n\t\t\tendInput.val(startInput.val());\r\n\t\t\tendInput.datepicker('update');\r\n\t\t\tdateDelta = 0;\r\n\t\t\tcontainer.data('dateDelta', 0);\r\n\t\t}\r\n\r\n\t\tif (endDateAdvance != 0) {\r\n\t\t\tif (dateDelta || dateDelta === 0) {\r\n\t\t\t\tvar endDate =  new Date(endInput.val());\r\n\t\t\t\tvar newEnd = new Date(endDate.getTime() + endDateAdvance);\r\n\t\t\t\tendInput.val(newEnd.format('m/d/Y'));\r\n\t\t\t\tendInput.datepicker('update');\r\n\t\t\t\tcontainer.data('dateDelta', dateDelta + endDateAdvance);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Simulates PHP's date function\r\nDate.prototype.format=function(format){var returnStr='';var replace=Date.replaceChars;for(var i=0;i<format.length;i++){var curChar=format.charAt(i);if(replace[curChar]){returnStr+=replace[curChar].call(this);}else{returnStr+=curChar;}}return returnStr;};Date.replaceChars={shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],longMonths:['January','February','March','April','May','June','July','August','September','October','November','December'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],longDays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d:function(){return(this.getDate()<10?'0':'')+this.getDate();},D:function(){return Date.replaceChars.shortDays[this.getDay()];},j:function(){return this.getDate();},l:function(){return Date.replaceChars.longDays[this.getDay()];},N:function(){return this.getDay()+1;},S:function(){return(this.getDate()%10==1&&this.getDate()!=11?'st':(this.getDate()%10==2&&this.getDate()!=12?'nd':(this.getDate()%10==3&&this.getDate()!=13?'rd':'th')));},w:function(){return this.getDay();},z:function(){return\"Not Yet Supported\";},W:function(){return\"Not Yet Supported\";},F:function(){return Date.replaceChars.longMonths[this.getMonth()];},m:function(){return(this.getMonth()<9?'0':'')+(this.getMonth()+1);},M:function(){return Date.replaceChars.shortMonths[this.getMonth()];},n:function(){return this.getMonth()+1;},t:function(){return\"Not Yet Supported\";},L:function(){return(((this.getFullYear()%4==0)&&(this.getFullYear()%100!=0))||(this.getFullYear()%400==0))?'1':'0';},o:function(){return\"Not Supported\";},Y:function(){return this.getFullYear();},y:function(){return(''+this.getFullYear()).substr(2);},a:function(){return this.getHours()<12?'am':'pm';},A:function(){return this.getHours()<12?'AM':'PM';},B:function(){return\"Not Yet Supported\";},g:function(){return this.getHours()%12||12;},G:function(){return this.getHours();},h:function(){return((this.getHours()%12||12)<10?'0':'')+(this.getHours()%12||12);},H:function(){return(this.getHours()<10?'0':'')+this.getHours();},i:function(){return(this.getMinutes()<10?'0':'')+this.getMinutes();},s:function(){return(this.getSeconds()<10?'0':'')+this.getSeconds();},e:function(){return\"Not Yet Supported\";},I:function(){return\"Not Supported\";},O:function(){return(-this.getTimezoneOffset()<0?'-':'+')+(Math.abs(this.getTimezoneOffset()/60)<10?'0':'')+(Math.abs(this.getTimezoneOffset()/60))+'00';},P:function(){return(-this.getTimezoneOffset()<0?'-':'+')+(Math.abs(this.getTimezoneOffset()/60)<10?'0':'')+(Math.abs(this.getTimezoneOffset()/60))+':'+(Math.abs(this.getTimezoneOffset()%60)<10?'0':'')+(Math.abs(this.getTimezoneOffset()%60));},T:function(){var m=this.getMonth();this.setMonth(0);var result=this.toTimeString().replace(/^.+ \\(?([^\\)]+)\\)?$/,'$1');this.setMonth(m);return result;},Z:function(){return-this.getTimezoneOffset()*60;},c:function(){return this.format(\"Y-m-d\")+\"T\"+this.format(\"H:i:sP\");},r:function(){return this.toString();},U:function(){return this.getTime()/1000;}};\r\n\r\n}); // end define()\r\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/vendor/timepicker/datepair.js","/************************\njquery-timepicker\nhttp://jonthornton.github.com/jquery-timepicker/\n\nrequires jQuery 1.7+\n************************/\n\n\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n\tvar _baseDate = _generateBaseDate();\n\tvar _ONE_DAY = 86400;\n\tvar _closeEvent = 'ontouchstart' in document ? 'touchstart' : 'mousedown';\n\tvar _defaults =\t{\n\t\tclassName: null,\n\t\tminTime: null,\n\t\tmaxTime: null,\n\t\tdurationTime: null,\n\t\tstep: 30,\n\t\tshowDuration: false,\n\t\ttimeFormat: 'g:ia',\n\t\tscrollDefaultNow: false,\n\t\tscrollDefaultTime: false,\n\t\tselectOnBlur: false,\n\t\tforceRoundTime: false,\n\t\tappendTo: 'body'\n\t};\n\tvar _lang = {\n\t\tdecimal: '.',\n\t\tmins: 'mins',\n\t\thr: 'hr',\n\t\thrs: 'hrs'\n\t};\n\tvar globalInit = false;\n\n\tvar methods =\n\t{\n\t\tinit: function(options)\n\t\t{\n\t\t\treturn this.each(function()\n\t\t\t{\n\t\t\t\tvar self = $(this);\n\n\t\t\t\t// convert dropdowns to text input\n\t\t\t\tif (self[0].tagName == 'SELECT') {\n\t\t\t\t\tvar input = $('<input />');\n\t\t\t\t\tvar attrs = { 'type': 'text', 'value': self.val() };\n\t\t\t\t\tvar raw_attrs = self[0].attributes;\n\n\t\t\t\t\tfor (var i=0; i < raw_attrs.length; i++) {\n\t\t\t\t\t\tattrs[raw_attrs[i].nodeName] = raw_attrs[i].nodeValue;\n\t\t\t\t\t}\n\n\t\t\t\t\tinput.attr(attrs);\n\t\t\t\t\tself.replaceWith(input);\n\t\t\t\t\tself = input;\n\t\t\t\t}\n\n\t\t\t\tvar settings = $.extend({}, _defaults);\n\n\t\t\t\tif (options) {\n\t\t\t\t\tsettings = $.extend(settings, options);\n\t\t\t\t}\n\n\t\t\t\tif (settings.minTime) {\n\t\t\t\t\tsettings.minTime = _time2int(settings.minTime);\n\t\t\t\t}\n\n\t\t\t\tif (settings.maxTime) {\n\t\t\t\t\tsettings.maxTime = _time2int(settings.maxTime);\n\t\t\t\t}\n\n\t\t\t\tif (settings.durationTime) {\n\t\t\t\t\tsettings.durationTime = _time2int(settings.durationTime);\n\t\t\t\t}\n\n\t\t\t\tif (settings.lang) {\n\t\t\t\t\t_lang = $.extend(_lang, settings.lang);\n\t\t\t\t}\n\n\t\t\t\tself.data('timepicker-settings', settings);\n\t\t\t\tself.attr('autocomplete', 'off');\n\t\t\t\tself.on('click.timepicker focus.timepicker', methods.show);\n\t\t\t\tself.on('blur.timepicker', _formatValue);\n\t\t\t\tself.on('keydown.timepicker', _keyhandler);\n\t\t\t\tself.addClass('ui-timepicker-input');\n\n\t\t\t\t_formatValue.call(self.get(0));\n\n\t\t\t\tif (!globalInit) {\n\t\t\t\t\t// close the dropdown when container loses focus\n\t\t\t\t\t$('body').on(_closeEvent, function(e) {\n\t\t\t\t\t\tvar target = $(e.target);\n\t\t\t\t\t\tvar input = target.closest('.ui-timepicker-input');\n\t\t\t\t\t\tif (input.length === 0 && target.closest('.ui-timepicker-list').length === 0) {\n\t\t\t\t\t\t\tmethods.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tglobalInit = true;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tshow: function(e)\n\t\t{\n\t\t\tvar self = $(this);\n\n\t\t\tif ('ontouchstart' in document) {\n\t\t\t\t// block the keyboard on mobile devices\n\t\t\t\tself.blur();\n\t\t\t}\n\n\t\t\tvar list = self.data('timepicker-list');\n\n\t\t\t// check if input is readonly\n\t\t\tif (self.attr('readonly')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// check if list needs to be rendered\n\t\t\tif (!list || list.length === 0) {\n\t\t\t\t_render(self);\n\t\t\t\tlist = self.data('timepicker-list');\n\t\t\t}\n\n\t\t\t// check if a flag was set to close this picker\n\t\t\tif (self.hasClass('ui-timepicker-hideme')) {\n\t\t\t\tself.removeClass('ui-timepicker-hideme');\n\t\t\t\tlist.hide();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (list.is(':visible')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// make sure other pickers are hidden\n\t\t\tmethods.hide();\n\n\t\t\tif ((self.offset().top + self.outerHeight(true) + list.outerHeight()) > $(window).height() + $(window).scrollTop()) {\n\t\t\t\t// position the dropdown on top\n\t\t\t\tlist.css({ 'left':(self.offset().left), 'top': self.offset().top - list.outerHeight() });\n\t\t\t} else {\n\t\t\t\t// put it under the input\n\t\t\t\tlist.css({ 'left':(self.offset().left), 'top': self.offset().top + self.outerHeight() });\n\t\t\t}\n\n\t\t\tlist.show();\n\n\t\t\tvar settings = self.data('timepicker-settings');\n\t\t\t// position scrolling\n\t\t\tvar selected = list.find('.ui-timepicker-selected');\n\n\t\t\tif (!selected.length) {\n                if (self.val()) {\n                    selected = _findRow(self, list, _time2int(self.val()));\n                } else if (settings.scrollDefaultNow) {\n                    selected = _findRow(self, list, _time2int(new Date()));\n                } else if (settings.scrollDefaultTime !== false) {\n                    selected = _findRow(self, list, _time2int(settings.scrollDefaultTime));\n                }\n\t\t\t}\n\n\t\t\tif (selected && selected.length) {\n\t\t\t\tvar topOffset = list.scrollTop() + selected.position().top - selected.outerHeight();\n\t\t\t\tlist.scrollTop(topOffset);\n\t\t\t} else {\n\t\t\t\tlist.scrollTop(0);\n\t\t\t}\n\n\t\t\tself.trigger('showTimepicker');\n\t\t},\n\n\t\thide: function(e)\n\t\t{\n\t\t\t$('.ui-timepicker-list:visible').each(function() {\n\t\t\t\tvar list = $(this);\n\t\t\t\tvar self = list.data('timepicker-input');\n\t\t\t\tvar settings = self.data('timepicker-settings');\n\n\t\t\t\tif (settings && settings.selectOnBlur) {\n\t\t\t\t\t_selectValue(self);\n\t\t\t\t}\n\n\t\t\t\tlist.hide();\n\t\t\t\tself.trigger('hideTimepicker');\n\t\t\t});\n\t\t},\n\n\t\toption: function(key, value)\n\t\t{\n\t\t\tvar self = $(this);\n\t\t\tvar settings = self.data('timepicker-settings');\n\t\t\tvar list = self.data('timepicker-list');\n\n\t\t\tif (typeof key == 'object') {\n\t\t\t\tsettings = $.extend(settings, key);\n\n\t\t\t} else if (typeof key == 'string' && typeof value != 'undefined') {\n\t\t\t\tsettings[key] = value;\n\n\t\t\t} else if (typeof key == 'string') {\n\t\t\t\treturn settings[key];\n\t\t\t}\n\n\t\t\tif (settings.minTime) {\n\t\t\t\tsettings.minTime = _time2int(settings.minTime);\n\t\t\t}\n\n\t\t\tif (settings.maxTime) {\n\t\t\t\tsettings.maxTime = _time2int(settings.maxTime);\n\t\t\t}\n\n\t\t\tif (settings.durationTime) {\n\t\t\t\tsettings.durationTime = _time2int(settings.durationTime);\n\t\t\t}\n\n\t\t\tself.data('timepicker-settings', settings);\n\n\t\t\tif (list) {\n\t\t\t\tlist.remove();\n\t\t\t\tself.data('timepicker-list', false);\n\t\t\t}\n\n\t\t},\n\n\t\tgetSecondsFromMidnight: function()\n\t\t{\n\t\t\treturn _time2int($(this).val());\n\t\t},\n\n\t\tgetTime: function()\n\t\t{\n\t\t\treturn new Date(_baseDate.valueOf() + (_time2int($(this).val())*1000));\n\t\t},\n\n\t\tsetTime: function(value)\n\t\t{\n\t\t\tvar self = $(this);\n\t\t\tvar prettyTime = _int2time(_time2int(value), self.data('timepicker-settings').timeFormat);\n\t\t\tself.val(prettyTime);\n\t\t},\n\n\t\tremove: function()\n\t\t{\n\t\t\tvar self = $(this);\n\n\t\t\t// check if this element is a timepicker\n\t\t\tif (!self.hasClass('ui-timepicker-input')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself.removeAttr('autocomplete', 'off');\n\t\t\tself.removeClass('ui-timepicker-input');\n\t\t\tself.removeData('timepicker-settings');\n\t\t\tself.off('.timepicker');\n\n\t\t\t// timepicker-list won't be present unless the user has interacted with this timepicker\n\t\t\tif (self.data('timepicker-list')) {\n\t\t\t\tself.data('timepicker-list').remove();\n\t\t\t}\n\n\t\t\tself.removeData('timepicker-list');\n\t\t}\n\t};\n\n\t// private methods\n\n\tfunction _render(self)\n\t{\n\t\tvar settings = self.data('timepicker-settings');\n\t\tvar list = self.data('timepicker-list');\n\n\t\tif (list && list.length) {\n\t\t\tlist.remove();\n\t\t\tself.data('timepicker-list', false);\n\t\t}\n\n\t\tlist = $('<ul />');\n\t\tlist.attr('tabindex', -1);\n\t\tlist.addClass('ui-timepicker-list');\n\t\tif (settings.className) {\n\t\t\tlist.addClass(settings.className);\n\t\t}\n\n\t\tlist.css({'display':'none', 'position': 'absolute' });\n\n\t\tif ((settings.minTime !== null || settings.durationTime !== null) && settings.showDuration) {\n\t\t\tlist.addClass('ui-timepicker-with-duration');\n\t\t}\n\n\t\tvar durStart = (settings.durationTime !== null) ? settings.durationTime : settings.minTime;\n\t\tvar start = (settings.minTime !== null) ? settings.minTime : 0;\n\t\tvar end = (settings.maxTime !== null) ? settings.maxTime : (start + _ONE_DAY - 1);\n\n\t\tif (end <= start) {\n\t\t\t// make sure the end time is greater than start time, otherwise there will be no list to show\n\t\t\tend += _ONE_DAY;\n\t\t}\n\t\tfor (var i=start; i <= end; i += settings.step*60) {\n\t\t\tvar timeInt = i;\n\t\t\tvar row = $('<li />');\n\t\t\trow.data('time', timeInt);\n\t\t\trow.text(_int2time(timeInt, settings.timeFormat));\n\n\t\t\tif ((settings.minTime !== null || settings.durationTime !== null) && settings.showDuration) {\n\t\t\t\tvar duration = $('<span />');\n\t\t\t\tduration.addClass('ui-timepicker-duration');\n\t\t\t\tduration.text(' ('+_int2duration(i - durStart)+')');\n\t\t\t\trow.append(duration);\n\t\t\t}\n\n\t\t\tlist.append(row);\n\t\t}\n\n\t\tlist.data('timepicker-input', self);\n\t\tself.data('timepicker-list', list);\n\n\t\tvar appendTo = settings.appendTo;\n\t\tif (typeof appendTo === 'string') {\n\t\t\tappendTo = $(appendTo);\n\t\t} else if (typeof appendTo === 'function') {\n\t\t\tappendTo = appendTo(self);\n\t\t}\n\t\tappendTo.append(list);\n\t\t_setSelected(self, list);\n\n\t\tlist.on('click', 'li', function(e) {\n\t\t\tself.addClass('ui-timepicker-hideme');\n\t\t\tself[0].focus();\n\n\t\t\t// make sure only the clicked row is selected\n\t\t\tlist.find('li').removeClass('ui-timepicker-selected');\n\t\t\t$(this).addClass('ui-timepicker-selected');\n\n\t\t\t_selectValue(self);\n\t\t\tlist.hide();\n\t\t});\n\t}\n\n\tfunction _generateBaseDate()\n\t{\n\t\tvar _baseDate = new Date();\n\t\tvar _currentTimezoneOffset = _baseDate.getTimezoneOffset()*60000;\n\t\t_baseDate.setHours(0); _baseDate.setMinutes(0); _baseDate.setSeconds(0);\n\t\tvar _baseDateTimezoneOffset = _baseDate.getTimezoneOffset()*60000;\n\n\t\treturn new Date(_baseDate.valueOf() - _baseDateTimezoneOffset + _currentTimezoneOffset);\n\t}\n\n\tfunction _findRow(self, list, value)\n\t{\n\t\tif (!value && value !== 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar settings = self.data('timepicker-settings');\n\t\tvar out = false;\n\t\tvar halfStep = settings.step*30;\n\n\t\t// loop through the menu items\n\t\tlist.find('li').each(function(i, obj) {\n\t\t\tvar jObj = $(obj);\n\n\t\t\tvar offset = jObj.data('time') - value;\n\n\t\t\t// check if the value is less than half a step from each row\n\t\t\tif (Math.abs(offset) < halfStep || offset == halfStep) {\n\t\t\t\tout = jObj;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\treturn out;\n\t}\n\n\tfunction _setSelected(self, list)\n\t{\n\t\tvar timeValue = _time2int(self.val());\n\n\t\tvar selected = _findRow(self, list, timeValue);\n\t\tif (selected) selected.addClass('ui-timepicker-selected');\n\t}\n\n\n\tfunction _formatValue()\n\t{\n\t\tif (this.value === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tvar self = $(this);\n\t\tvar seconds = _time2int(this.value);\n\n\t\tif (seconds === null) {\n\t\t\tself.trigger('timeFormatError');\n\t\t\treturn;\n\t\t}\n\n\t\tvar settings = self.data('timepicker-settings');\n\n\t\tif (settings.forceRoundTime) {\n\t\t\tvar offset = seconds % (settings.step*60); // step is in minutes\n\n\t\t\tif (offset >= settings.step*30) {\n\t\t\t\t// if offset is larger than a half step, round up\n\t\t\t\tseconds += (settings.step*60) - offset;\n\t\t\t} else {\n\t\t\t\t// round down\n\t\t\t\tseconds -= offset;\n\t\t\t}\n\t\t}\n\n\t\tvar prettyTime = _int2time(seconds, settings.timeFormat);\n\t\tself.val(prettyTime);\n\t}\n\n\tfunction _keyhandler(e)\n\t{\n\t\tvar self = $(this);\n\t\tvar list = self.data('timepicker-list');\n\n\t\tif (!list.is(':visible')) {\n\t\t\tif (e.keyCode == 40) {\n\t\t\t\tself.focus();\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tswitch (e.keyCode) {\n\n\t\t\tcase 13: // return\n\t\t\t\t_selectValue(self);\n\t\t\t\tmethods.hide.apply(this);\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\n\t\t\tcase 38: // up\n\t\t\t\tvar selected = list.find('.ui-timepicker-selected');\n\n\t\t\t\tif (!selected.length) {\n\t\t\t\t\tlist.children().each(function(i, obj) {\n\t\t\t\t\t\tif ($(obj).position().top > 0) {\n\t\t\t\t\t\t\tselected = $(obj);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tselected.addClass('ui-timepicker-selected');\n\n\t\t\t\t} else if (!selected.is(':first-child')) {\n\t\t\t\t\tselected.removeClass('ui-timepicker-selected');\n\t\t\t\t\tselected.prev().addClass('ui-timepicker-selected');\n\n\t\t\t\t\tif (selected.prev().position().top < selected.outerHeight()) {\n\t\t\t\t\t\tlist.scrollTop(list.scrollTop() - selected.outerHeight());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 40: // down\n\t\t\t\tselected = list.find('.ui-timepicker-selected');\n\n\t\t\t\tif (selected.length === 0) {\n\t\t\t\t\tlist.children().each(function(i, obj) {\n\t\t\t\t\t\tif ($(obj).position().top > 0) {\n\t\t\t\t\t\t\tselected = $(obj);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tselected.addClass('ui-timepicker-selected');\n\t\t\t\t} else if (!selected.is(':last-child')) {\n\t\t\t\t\tselected.removeClass('ui-timepicker-selected');\n\t\t\t\t\tselected.next().addClass('ui-timepicker-selected');\n\n\t\t\t\t\tif (selected.next().position().top + 2*selected.outerHeight() > list.outerHeight()) {\n\t\t\t\t\t\tlist.scrollTop(list.scrollTop() + selected.outerHeight());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 27: // escape\n\t\t\t\tlist.find('li').removeClass('ui-timepicker-selected');\n\t\t\t\tlist.hide();\n\t\t\t\tbreak;\n\n\t\t\tcase 9: //tab\n\t\t\t\tmethods.hide();\n\t\t\t\tbreak;\n\n\t\t\tcase 16:\n\t\t\tcase 17:\n\t\t\tcase 18:\n\t\t\tcase 19:\n\t\t\tcase 20:\n\t\t\tcase 33:\n\t\t\tcase 34:\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\tcase 37:\n\t\t\tcase 39:\n\t\t\tcase 45:\n\t\t\t\treturn;\n\n\t\t\tdefault:\n\t\t\t\tlist.find('li').removeClass('ui-timepicker-selected');\n\t\t\t\treturn;\n\t\t}\n\t}\n\n\tfunction _selectValue(self)\n\t{\n\t\tvar settings = self.data('timepicker-settings');\n\t\tvar list = self.data('timepicker-list');\n\t\tvar timeValue = null;\n\n\t\tvar cursor = list.find('.ui-timepicker-selected');\n\n\t\tif (cursor.length) {\n\t\t\t// selected value found\n\t\t\ttimeValue = cursor.data('time');\n\n\t\t} else if (self.val()) {\n\n\t\t\t// no selected value; fall back on input value\n\t\t\ttimeValue = _time2int(self.val());\n\n\t\t\t_setSelected(self, list);\n\t\t}\n\n\t\tif (timeValue !== null) {\n\t\t\tvar timeString = _int2time(timeValue, settings.timeFormat);\n\t\t\tself.attr('value', timeString);\n\t\t}\n\n\t\tself.trigger('change').trigger('changeTime');\n\t}\n\n\tfunction _int2duration(seconds)\n\t{\n\t\tvar minutes = Math.round(seconds/60);\n\t\tvar duration;\n\n\t\tif (Math.abs(minutes) < 60) {\n\t\t\tduration = [minutes, _lang.mins];\n\t\t} else if (minutes == 60) {\n\t\t\tduration = ['1', _lang.hr];\n\t\t} else {\n\t\t\tvar hours = (minutes/60).toFixed(1);\n\t\t\tif (_lang.decimal != '.') hours = hours.replace('.', _lang.decimal);\n\t\t\tduration = [hours, _lang.hrs];\n\t\t}\n\n\t\treturn duration.join(' ');\n\t}\n\n\tfunction _int2time(seconds, format)\n\t{\n\t\tif (seconds === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar time = new Date(_baseDate.valueOf() + (seconds*1000));\n\t\tvar output = '';\n\t\tvar hour, code;\n\n\t\tfor (var i=0; i<format.length; i++) {\n\n\t\t\tcode = format.charAt(i);\n\t\t\tswitch (code) {\n\n\t\t\t\tcase 'a':\n\t\t\t\t\toutput += (time.getHours() > 11) ? 'pm' : 'am';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'A':\n\t\t\t\t\toutput += (time.getHours() > 11) ? 'PM' : 'AM';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'g':\n\t\t\t\t\thour = time.getHours() % 12;\n\t\t\t\t\toutput += (hour === 0) ? '12' : hour;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'G':\n\t\t\t\t\toutput += time.getHours();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'h':\n\t\t\t\t\thour = time.getHours() % 12;\n\n\t\t\t\t\tif (hour !== 0 && hour < 10) {\n\t\t\t\t\t\thour = '0'+hour;\n\t\t\t\t\t}\n\n\t\t\t\t\toutput += (hour === 0) ? '12' : hour;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'H':\n\t\t\t\t\thour = time.getHours();\n\t\t\t\t\tif (seconds >= _ONE_DAY)\n\t\t\t\t\t\thour = Math.floor(seconds / (60 * 60));\n\t\t\t\t\toutput += (hour > 9) ? hour : '0'+hour;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'i':\n\t\t\t\t\tvar minutes = time.getMinutes();\n\t\t\t\t\toutput += (minutes > 9) ? minutes : '0'+minutes;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 's':\n\t\t\t\t\tseconds = time.getSeconds();\n\t\t\t\t\toutput += (seconds > 9) ? seconds : '0'+seconds;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\toutput += code;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tfunction _time2int(timeString)\n\t{\n\t\tif (timeString === '') return null;\n\t\tif (timeString+0 == timeString) return timeString;\n\n\t\tif (typeof(timeString) == 'object') {\n\t\t\ttimeString = timeString.getHours()+':'+timeString.getMinutes()+':'+timeString.getSeconds();\n\t\t}\n\n\t\tvar d = new Date(0);\n\t\tvar time = timeString.toLowerCase().match(/(\\d{1,2})(?::(\\d{1,2}))?(?::(\\d{2}))?\\s*([pa]?)/);\n\n\t\tif (!time) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar hour = parseInt(time[1]*1, 10);\n        var hours;\n\n\t\tif (time[4]) {\n\t\t\tif (hour == 12) {\n\t\t\t\thours = (time[4] == 'p') ? 12 : 0;\n\t\t\t} else {\n\t\t\t\thours = (hour + (time[4] == 'p' ? 12 : 0));\n\t\t\t}\n\n\t\t} else {\n\t\t\thours = hour;\n\t\t}\n\n\t\tvar minutes = ( time[2]*1 || 0 );\n\t\tvar seconds = ( time[3]*1 || 0 );\n\t\treturn hours*3600 + minutes*60 + seconds;\n\t}\n\n\t// Plugin entry\n\t$.fn.timepicker = function(method)\n\t{\n\t\tif(methods[method]) { return methods[method].apply(this, Array.prototype.slice.call(arguments, 1)); }\n\t\telse if(typeof method === \"object\" || !method) { return methods.init.apply(this, arguments); }\n\t\telse { $.error(\"Method \"+ method + \" does not exist on jQuery.timepicker\"); }\n\t};\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/vendor/timepicker/jquery.timepicker.js","(function(q,f){if(\"function\"===typeof define&&define.amd)define([\"underscore\",\"backbone\"],function(g,i){return f(q,i,g)});else if(\"undefined\"!==typeof exports){var g=require(\"underscore\"),i=require(\"backbone\");f(q,i,g);\"undefined\"!==typeof module&&module.exports&&(module.exports=i);exports=i}else f(q,q.Backbone,q._)})(this,function(q,f,g){var i,p,t,w,n,v,D,E,k,z,F,s={};i=f.Model;p=f.Collection;t=i.prototype;n=p.prototype;w=f.Events;f.Associations={VERSION:\"0.6.2\"};f.Associations.scopes=[];var G=function(){return k},\r\nA=function(a){if(!g.isString(a)||1>g.size(a))a=\".\";k=a;D=RegExp(\"[\\\\\"+k+\"\\\\[\\\\]]+\",\"g\");E=RegExp(\"[^\\\\\"+k+\"\\\\[\\\\]]+\",\"g\")};try{Object.defineProperty(f.Associations,\"SEPARATOR\",{enumerable:!0,get:G,set:A})}catch(J){}f.Associations.Many=f.Many=\"Many\";f.Associations.One=f.One=\"One\";f.Associations.Self=f.Self=\"Self\";f.Associations.SEPARATOR=\".\";f.Associations.getSeparator=G;f.Associations.setSeparator=A;f.Associations.EVENTS_BUBBLE=!0;f.Associations.EVENTS_WILDCARD=!0;f.Associations.EVENTS_NC=!1;A();\r\nv=f.AssociatedModel=f.Associations.AssociatedModel=i.extend({relations:void 0,_proxyCalls:void 0,constructor:function(a,c){c&&c.__parents__&&(this.parents=[c.__parents__]);i.apply(this,arguments)},on:function(a,c,d){var b=w.on.apply(this,arguments);if(f.Associations.EVENTS_NC)return b;var l=/\\s+/;g.isString(a)&&a&&!l.test(a)&&c&&(l=B(a))&&(s[l]=\"undefined\"===typeof s[l]?1:s[l]+1);return b},off:function(a,c,d){if(f.Associations.EVENTS_NC)return w.off.apply(this,arguments);var b=/\\s+/,l=this._events,\r\ne={},h=l?g.keys(l):[],m=!a&&!c&&!d,i=g.isString(a)&&!b.test(a);if(m||i)for(var b=0,j=h.length;b<j;b++)e[h[b]]=l[h[b]]?l[h[b]].length:0;var p=w.off.apply(this,arguments);if(m||i){b=0;for(j=h.length;b<j;b++)(m=B(h[b]))&&(s[m]=l[h[b]]?s[m]-(e[h[b]]-l[h[b]].length):s[m]-e[h[b]])}return p},get:function(a){var c=this.__attributes__,d=t.get.call(this,a),c=c?x(d)?d:c[a]:d;return x(c)?c:this._getAttr.apply(this,arguments)},set:function(a,c,d){var b;g.isObject(a)||null==a?(b=a,d=c):(b={},b[a]=c);a=this._set(b,\r\nd);this._processPendingEvents();return a},_set:function(a,c){var d,b,l,e,h=this;if(!a)return this;this.__attributes__=a;for(d in a)if(b||(b={}),d.match(D)){var f=H(d);e=g.initial(f);f=f[f.length-1];e=this.get(e);e instanceof i&&(e=b[e.cid]||(b[e.cid]={model:e,data:{}}),e.data[f]=a[d])}else e=b[this.cid]||(b[this.cid]={model:this,data:{}}),e.data[d]=a[d];if(b)for(l in b)e=b[l],this._setAttr.call(e.model,e.data,c)||(h=!1);else h=this._setAttr.call(this,a,c);delete this.__attributes__;return h},_setAttr:function(a,\r\nc){var d;c||(c={});if(c.unset)for(d in a)a[d]=void 0;this.parents=this.parents||[];this.relations&&g.each(this.relations,function(b){var d=b.key,e=b.scope||q,h=this._transformRelatedModel(b,a),m=this._transformCollectionType(b,h,a),u=g.isString(b.map)?C(b.map,e):b.map,j=this.attributes[d],k=j&&j.idAttribute,o,r,n=!1;o=b.options?g.extend({},b.options,c):c;if(a[d]){e=g.result(a,d);e=u?u.call(this,e,m?m:h):e;if(x(e))if(b.type===f.Many)j?(j._deferEvents=!0,j[o.reset?\"reset\":\"set\"](e instanceof p?e.models:\r\ne,o),h=j):(n=!0,e instanceof p?h=e:(h=this._createCollection(m||p,b.collectionOptions||(h?{model:h}:{})),h[o.reset?\"reset\":\"set\"](e,o)));else if(b.type===f.One)b=e instanceof i?e.attributes.hasOwnProperty(k):e.hasOwnProperty(k),m=e instanceof i?e.attributes[k]:e[k],j&&b&&j.attributes[k]===m?(j._deferEvents=!0,j._set(e instanceof i?e.attributes:e,o),h=j):(n=!0,e instanceof i?h=e:(o.__parents__=this,h=new h(e,o),delete o.__parents__));else throw Error(\"type attribute must be specified and have the values Backbone.One or Backbone.Many\");\r\nelse h=e;r=a[d]=h;if(n||r&&!r._proxyCallback)r._proxyCallback||(r._proxyCallback=function(){return f.Associations.EVENTS_BUBBLE&&this._bubbleEvent.call(this,d,r,arguments)}),r.on(\"all\",r._proxyCallback,this)}a.hasOwnProperty(d)&&this._setupParents(a[d],this.attributes[d])},this);return t.set.call(this,a,c)},_bubbleEvent:function(a,c,d){var b=d[0].split(\":\"),g=b[0],e=\"nested-change\"==d[0],h=\"change\"===g,m=d[1],u=-1,j=c._proxyCalls,b=b[1],n=!b||-1==b.indexOf(k),o;if(!e&&(n&&(F=B(d[0])||a),f.Associations.EVENTS_NC||\r\ns[F])){if(f.Associations.EVENTS_WILDCARD&&/\\[\\*\\]/g.test(b))return this;if(c instanceof p&&(h||b))u=c.indexOf(z||m);this instanceof i&&(z=this);b=a+(-1!==u&&(h||b)?\"[\"+u+\"]\":\"\")+(b?k+b:\"\");f.Associations.EVENTS_WILDCARD&&(o=b.replace(/\\[\\d+\\]/g,\"[*]\"));e=[];e.push.apply(e,d);e[0]=g+\":\"+b;f.Associations.EVENTS_WILDCARD&&b!==o&&(e[0]=e[0]+\" \"+g+\":\"+o);j=c._proxyCalls=j||{};if(this._isEventAvailable.call(this,j,b))return this;j[b]=!0;h&&(this._previousAttributes[a]=c._previousAttributes,this.changed[a]=\r\nc);this.trigger.apply(this,e);f.Associations.EVENTS_NC&&(h&&this.get(b)!=d[2])&&(a=[\"nested-change\",b,d[1]],d[2]&&a.push(d[2]),this.trigger.apply(this,a));j&&b&&delete j[b];z=void 0;return this}},_isEventAvailable:function(a,c){return g.find(a,function(a,b){return-1!==c.indexOf(b,c.length-b.length)})},_setupParents:function(a,c){a&&(a.parents=a.parents||[],-1==g.indexOf(a.parents,this)&&a.parents.push(this));c&&(0<c.parents.length&&c!=a)&&(c.parents=g.difference(c.parents,[this]),c._proxyCallback&&\r\nc.off(\"all\",c._proxyCallback,this))},_createCollection:function(a,c){var c=g.defaults(c,{model:a.model}),d=new a([],g.isFunction(c)?c.call(this):c);d.parents=[this];return d},_processPendingEvents:function(){this._processedEvents||(this._processedEvents=!0,this._deferEvents=!1,g.each(this._pendingEvents,function(a){a.c.trigger.apply(a.c,a.a)}),this._pendingEvents=[],g.each(this.relations,function(a){(a=this.attributes[a.key])&&a._processPendingEvents&&a._processPendingEvents()},this),delete this._processedEvents)},\r\n_transformRelatedModel:function(a,c){var d=a.relatedModel,b=a.scope||q;d&&!(d.prototype instanceof i)&&(d=g.isFunction(d)?d.call(this,a,c):d);d&&g.isString(d)&&(d=d===f.Self?this.constructor:C(d,b));if(a.type===f.One){if(!d)throw Error(\"specify a relatedModel for Backbone.One type\");if(!(d.prototype instanceof f.Model))throw Error(\"specify an AssociatedModel or Backbone.Model for Backbone.One type\");}return d},_transformCollectionType:function(a,c,d){var b=a.collectionType,l=a.scope||q;if(b&&g.isFunction(b)&&\r\nb.prototype instanceof i)throw Error(\"type is of Backbone.Model. Specify derivatives of Backbone.Collection\");b&&!(b.prototype instanceof p)&&(b=g.isFunction(b)?b.call(this,a,d):b);b&&g.isString(b)&&(b=C(b,l));if(b&&!b.prototype instanceof p)throw Error(\"collectionType must inherit from Backbone.Collection\");if(a.type===f.Many&&!c&&!b)throw Error(\"specify either a relatedModel or collectionType\");return b},trigger:function(a){this._deferEvents?(this._pendingEvents=this._pendingEvents||[],this._pendingEvents.push({c:this,\r\na:arguments})):t.trigger.apply(this,arguments)},toJSON:function(a){var c={},d;c[this.idAttribute]=this.id;this.visited||(this.visited=!0,c=t.toJSON.apply(this,arguments),a&&a.serialize_keys&&(c=g.pick(c,a.serialize_keys)),this.relations&&g.each(this.relations,function(b){var f=b.key,e=b.remoteKey,h=this.attributes[f],i=!b.isTransient,b=b.serialize||[],k=g.clone(a);delete c[f];i&&(b.length&&(k?k.serialize_keys=b:k={serialize_keys:b}),d=h&&h.toJSON?h.toJSON(k):h,c[e||f]=g.isArray(d)?g.compact(d):d)},\r\nthis),delete this.visited);return c},clone:function(a){return new this.constructor(this.toJSON(a))},cleanup:function(a){a=a||{};g.each(this.relations,function(a){if(a=this.attributes[a.key])a._proxyCallback&&a.off(\"all\",a._proxyCallback,this),a.parents=g.difference(a.parents,[this])},this);!a.listen&&this.off()},destroy:function(a){var a=a?g.clone(a):{},a=g.defaults(a,{remove_references:!0,listen:!0}),c=this;if(a.remove_references&&a.wait){var d=a.success;a.success=function(b){d&&d(c,b,a);c.cleanup(a)}}var b=\r\nt.destroy.apply(this,[a]);a.remove_references&&!a.wait&&c.cleanup(a);return b},_getAttr:function(a){var c=this,d=this.__attributes__,a=H(a),b,f;if(!(1>g.size(a))){for(f=0;f<a.length;f++){b=a[f];if(!c)break;c=c instanceof p?isNaN(b)?void 0:c.at(b):d?x(c.attributes[b])?c.attributes[b]:d[b]:c.attributes[b]}return c}}});var H=function(a){return\"\"===a?[\"\"]:g.isString(a)?a.match(E):a||[]},B=function(a){if(!a)return a;a=a.split(\":\");return 1<a.length?(a=a[a.length-1],a=a.split(k),1<a.length?a[a.length-1].split(\"[\")[0]:\r\na[0].split(\"[\")[0]):\"\"},C=function(a,c){var d,b=[c];b.push.apply(b,f.Associations.scopes);for(var i,e=0,h=b.length;e<h;++e)if(i=b[e])if(d=g.reduce(a.split(k),function(a,b){return a[b]},i))break;return d},I=function(a,c,d){var b,f;g.find(a,function(a){if(b=g.find(a.relations,function(b){return a.get(b.key)===c},this))return f=a,!0},this);return b&&b.map?b.map.call(f,d,c):d},x=function(a){return!g.isUndefined(a)&&!g.isNull(a)},y={};g.each([\"set\",\"remove\",\"reset\"],function(a){y[a]=p.prototype[a];n[a]=\r\nfunction(c,d){this.model.prototype instanceof v&&this.parents&&(arguments[0]=I(this.parents,this,c));return y[a].apply(this,arguments)}});y.trigger=n.trigger;n.trigger=function(a){this._deferEvents?(this._pendingEvents=this._pendingEvents||[],this._pendingEvents.push({c:this,a:arguments})):y.trigger.apply(this,arguments)};n._processPendingEvents=v.prototype._processPendingEvents;n.on=v.prototype.on;n.off=v.prototype.off;return f});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/backbone-associations/backbone-associations-min.js\n// module id = ./node_modules/backbone-associations/backbone-associations-min.js\n// module chunks = 4","/**\n * A Backbone view that renders a fully accessible dropdown menu.\n *\n * Initialize the view by passing in the following attributes:\n *\n *~~~ javascript\n * view = new DropdownMenuView({\n *     className: 'space separated string of classes for element',\n *     model: new Backbone.Model({\n *         main: {\n *             image: 'http://placehold.it/40x40',\n *             screenreader_label: 'Dashboard for: ',\n *             text: 'username',\n *             url: 'dashboard'\n *         },\n *         button: {\n *             icon: 'icon-angle-down',\n *             label: 'User options dropdown'\n *         },\n *         items: [\n *             {\n *                 text: 'Account',\n *                 url: 'account_settings'\n *             }, {\n *                 text: 'Sign Out',\n *                 url: 'logout'\n *             }\n *         ]\n *     }),\n *     parent: 'selector for parent element that will be replaced with dropdown menu',\n *     ...\n * });\n *~~~\n * @module DropdownMenuView\n */\n(function(define) {\n    'use strict';\n    define([\n        'backbone',\n        'jquery',\n        'underscore',\n        'edx-ui-toolkit/js/utils/constants',\n        'text!./dropdown.underscore'\n    ],\n        function(Backbone, $, _, constants, DropdownTpl) {\n            var DropdownMenuView = Backbone.View.extend({\n                tpl: _.template(DropdownTpl),\n\n                events: {\n                    'click .js-dropdown-button': 'clickOpenDropdown',\n                    'click a': 'analyticsLinkClick',\n                    keydown: 'viewKeypress'\n                },\n\n                dropdownButton: '.js-dropdown-button',\n\n                menu: '.dropdown-menu',\n\n                initialize: function(options) {\n                    if (options.parent) {\n                        this.$parent = $(options.parent);\n                    }\n\n                    this.menuId = options.menuId || 'dropdown-menu-' + this.cid;\n                    this.keyBack = [constants.keyCodes.up, constants.keyCodes.left];\n                    this.keyForward = [constants.keyCodes.down, constants.keyCodes.right];\n                    this.keyClose = [constants.keyCodes.esc, constants.keyCodes.space];\n                },\n\n                className: function() {\n                    return this.options.className;\n                },\n\n                render: function() {\n                    /**\n                     * Set in the render function to prevent error when\n                     * view is used with a pre-rendered DOM\n                     */\n                    this.model.set({menuId: this.menuId});\n\n                    this.$el.html(this.tpl(this.model.toJSON()));\n                    this.$parent.replaceWith(this.$el);\n                    this.postRender();\n\n                    return this;\n                },\n\n                postRender: function() {\n                    this.$menu = this.$('.dropdown-menu');\n                    this.$page = $(document);\n                    this.$dropdownButton = this.$(this.dropdownButton);\n                    this.$lastItem = this.$menu.find('li:last-child a');\n                },\n\n                /**\n                 * Function to track analytics.\n                 *\n                 * By default it doesn't do anything, to utilize please\n                 * extend the View and implement a method such as the\n                 * following:\n                 *\n                 *~~~ javascript\n                 * var $link = $(event.target),\n                 *     label = $link.hasClass('menu-title') ? 'Dashboard' : $link.html().trim();\n                 *\n                 * window.analytics.track('user_dropdown.clicked', {\n                 *     category: 'navigation',\n                 *     label: label,\n                 *     link: $link.attr('href')\n                 * });\n                 *~~~\n                 *\n                 * @param {object} event The event to be tracked.\n                 * @returns {*} The event.\n                 */\n                analyticsLinkClick: function(event) {\n                    return event;\n                },\n\n                clickCloseDropdown: function(event, context) {\n                    var $el = $(event.target) || $(document),\n                        $btn;\n\n                    // When using edX Pattern Library icons the target\n                    // is sometimes not the button.\n                    if (!$el.hasClass(this.dropdownButton)) {\n                        // If there is a parent dropdown button that is the element to test\n                        $btn = $el.closest(this.dropdownButton);\n                        if ($btn.length > 0) {\n                            $el = $btn;\n                        }\n                    }\n\n                    if (!$el.hasClass('button-more') && !$el.hasClass('has-dropdown')) {\n                        context.closeDropdownMenu();\n                    }\n                },\n\n                clickOpenDropdown: function(event) {\n                    event.preventDefault();\n                    this.openMenu(this.$dropdownButton);\n                },\n\n                closeDropdownMenu: function() {\n                    var $open = this.$(this.menu);\n\n                    $open.removeClass('is-visible')\n                        .addClass('is-hidden');\n\n                    this.$dropdownButton\n                        .removeClass('is-active')\n                        .attr('aria-expanded', 'false');\n                },\n\n                focusFirstItem: function() {\n                    this.$menu.find('.dropdown-item:first-child .action').focus();\n                },\n\n                focusLastItem: function() {\n                    this.$lastItem.focus();\n                },\n\n                handlerIsAction: function(key, $el) {\n                    if (_.contains(this.keyForward, key)) {\n                        this.nextMenuItemLink($el);\n                    } else if (_.contains(this.keyBack, key)) {\n                        this.previousMenuItemLink($el);\n                    }\n                },\n\n                handlerIsButton: function(key, event) {\n                    if (_.contains(this.keyForward, key)) {\n                        this.focusFirstItem();\n                        // if up arrow or left arrow key pressed or shift+tab\n                    } else if (_.contains(this.keyBack, key) || key === constants.keyCodes.tab && event.shiftKey) {\n                        event.preventDefault();\n                        this.focusLastItem();\n                    }\n                },\n\n                handlerIsMenu: function(key) {\n                    if (_.contains(this.keyForward, key)) {\n                        this.focusFirstItem();\n                    } else if (_.contains(this.keyBack, key)) {\n                        this.$dropdownButton.focus();\n                    }\n                },\n\n                handlerPageClicks: function(context) {\n                    // Only want 1 event listener for click.dropdown\n                    // on the page so unbind for instantiating\n                    this.$page.off('click.dropdown');\n                    this.$page.on('click.dropdown', function(event) {\n                        context.clickCloseDropdown(event, context);\n                    });\n                },\n\n                nextMenuItemLink: function($el) {\n                    var items = this.$('.dropdown-menu').children('.dropdown-item').find('.action'),\n                        itemsCount = items.length - 1,\n                        index = items.index($el),\n                        next = index + 1;\n\n                    if (index === itemsCount) {\n                        this.$dropdownButton.focus();\n                    } else {\n                        items.eq(next).focus();\n                    }\n                },\n\n                openMenu: function($btn) {\n                    var $menu = this.$menu;\n                    if ($menu.hasClass('is-visible')) {\n                        this.closeDropdownMenu();\n                    } else {\n                        $btn.addClass('is-active')\n                            .attr('aria-expanded', 'true');\n\n                        $menu.removeClass('is-hidden')\n                            .addClass('is-visible');\n\n                        $menu.focus();\n                        this.setOrientation();\n                        this.handlerPageClicks(this);\n                    }\n                },\n\n                previousMenuItemLink: function($el) {\n                    var items = this.$('.dropdown-menu').children('.dropdown-item').find('.action'),\n                        index = items.index($el),\n                        prev = index - 1;\n\n                    if (index === 0) {\n                        this.$dropdownButton.focus();\n                    } else {\n                        items.eq(prev).focus();\n                    }\n                },\n\n                setOrientation: function() {\n                    var midpoint = $(window).width() / 2,\n                        alignClass = (this.$dropdownButton.offset().left > midpoint) ? 'align-right' : 'align-left';\n\n                    this.$menu\n                        .removeClass('align-left align-right')\n                        .addClass(alignClass);\n                },\n\n                viewKeypress: function(event) {\n                    var key = event.keyCode,\n                        $el = $(event.target);\n\n                    if (_.contains(this.keyForward, key) || _.contains(this.keyBack, key)) {\n                        // Prevent default behavior if one of our trigger keys\n                        event.preventDefault();\n                    }\n\n                    if (key === constants.keyCodes.tab && !event.shiftKey && _.first($el) === _.first(this.$lastItem)) {\n                        event.preventDefault();\n                        this.$dropdownButton.focus();\n                    } else if (_.contains(this.keyClose, key)) {\n                        this.closeDropdownMenu();\n                        this.$dropdownButton.focus();\n                    } else if ($el.hasClass('action')) {\n                        // Key handlers for when a menu item has focus\n                        this.handlerIsAction(key, $el);\n                    } else if ($el.hasClass('dropdown-menu')) {\n                        // Key handlers for when the menu itself has focus, before an item within it receives focus\n                        this.handlerIsMenu(key);\n                    } else if ($el.hasClass('has-dropdown')) {\n                        // Key handlers for when the button that opens the menu has focus\n                        this.handlerIsButton(key, event);\n                    }\n                }\n            });\n\n            return DropdownMenuView;\n        }\n    );\n}).call(\n    this,\n    // Use the default 'define' function if available, else use 'RequireJS.define'\n    typeof define === 'function' && define.amd ? define : RequireJS.define\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/edx-ui-toolkit/src/js/dropdown-menu/dropdown-menu-view.js\n// module id = ./node_modules/edx-ui-toolkit/src/js/dropdown-menu/dropdown-menu-view.js\n// module chunks = 4 6","module.exports = \"module.exports = \\\"<a href=\\\\\\\"<%- main.url %>\\\\\\\" class=\\\\\\\"menu-title\\\\\\\">\\\\n    <% if (main.screenreader_label) { %>\\\\n        <span class=\\\\\\\"sr-only\\\\\\\"><%- main.screenreader_label %> </span>\\\\n    <% } %>\\\\n    <% if (main.image) { %>\\\\n        <img class=\\\\\\\"menu-image\\\\\\\" src=\\\\\\\"<%- main.image %>\\\\\\\" alt=\\\\\\\"\\\\\\\">\\\\n    <% } %>\\\\n    <%- main.text %>\\\\n</a>\\\\n<button type=\\\\\\\"button\\\\\\\" class=\\\\\\\"menu-button button-more has-dropdown js-dropdown-button <% if (!button.icon) { %>default-icon<% } %>\\\\\\\" aria-haspopup=\\\\\\\"true\\\\\\\" aria-expanded=\\\\\\\"false\\\\\\\" aria-controls=\\\\\\\"<%- menuId %>\\\\\\\">\\\\n    <% if (button.icon) { %>\\\\n        <span class=\\\\\\\"icon <%- button.icon %>\\\\\\\" aria-hidden=\\\\\\\"true\\\\\\\"></span>\\\\n    <% } %>\\\\n    <span class=\\\\\\\"sr-only\\\\\\\"><%- button.label %></span>\\\\n</button>\\\\n<ul class=\\\\\\\"dropdown-menu list-divided is-hidden\\\\\\\" id=\\\\\\\"<%- menuId %>\\\\\\\" tabindex=\\\\\\\"-1\\\\\\\">\\\\n    <% _.each(items, function(item, index) { %>\\\\n        <li class=\\\\\\\"dropdown-item item has-block-link\\\\\\\">\\\\n            <a href=\\\\\\\"<%- item.url %>\\\\\\\" class=\\\\\\\"action\\\\\\\"><%- item.text %></a>\\\\n        </li>\\\\n    <% }); %>\\\\n</ul>\\\\n\\\"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./~/edx-ui-toolkit/src/js/dropdown-menu/dropdown.underscore\n// module id = ./node_modules/raw-loader/index.js!./node_modules/edx-ui-toolkit/src/js/dropdown-menu/dropdown.underscore\n// module chunks = 4 6","(function() { module.exports = window[\"jQuery\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 4 5 6 9 10 12 13 14 16 17 18 19 20 21 22 23 24 25 26 29","(function() { module.exports = window[\"Backbone\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Backbone\"\n// module id = 1\n// module chunks = 4 5 6 9 10 14 16 17","(function() { module.exports = window[\"_\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"_\"\n// module id = 2\n// module chunks = 4 5 6 9 10 14 16","(function() { module.exports = window[\"gettext\"]; }());\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"gettext\"\n// module id = 3\n// module chunks = 4 6 14"],"sourceRoot":""}